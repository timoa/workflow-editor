/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={481(e,t,n){var r=n(758),o=n(896);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,o,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),_=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function T(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var $,z=Object.assign;function D(e){if(void 0===$)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);$=t&&t[1]||""}return"\n"+$+e}var R=!1;function B(e,t){if(!e||R)return"";R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),s=r.stack.split("\n"),a=o.length-1,i=s.length-1;1<=a&&0<=i&&o[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==s[i]){if(1!==a||1!==i)do{if(a--,0>--i||o[a]!==s[i]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=i);break}}}finally{R=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function V(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return B(e.type,!1);case 11:return B(e.type.render,!1);case 1:return B(e.type,!0);default:return""}}function F(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case N:return"StrictMode";case M:return"Suspense";case O:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:F(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return F(e(t))}catch(e){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function U(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function G(e,t){Q(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ye=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ne=null;function Ee(e){if(e=xo(e)){if("function"!=typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?Ne?Ne.push(e):Ne=[e]:Se=e}function _e(){if(Se){var e=Se,t=Ne;if(Ne=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function je(e,t){return e(t)}function Me(){}var Oe=!1;function Pe(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return je(e,t,n)}finally{Oe=!1,(null!==Se||null!==Ne)&&(Me(),_e())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var Ie=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Ie=!1}function Te(e,t,n,r,o,s,a,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var $e=!1,ze=null,De=!1,Re=null,Be={onError:function(e){$e=!0,ze=e}};function Ve(e,t,n,r,o,s,a,i,l){$e=!1,ze=null,Te.apply(Be,arguments)}function Fe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ke(e){if(Fe(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Fe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Ke(o),e;if(a===r)return Ke(o),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=o,r=a;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=a;break}if(l===r){i=!0,r=o,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,r=o;break}if(l===r){i=!0,r=a,n=o;break}l=l.sibling}if(!i)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ue=o.unstable_scheduleCallback,Ye=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ze=o.unstable_requestPaint,Qe=o.unstable_now,Ge=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,st=null,at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var i=a&~o;0!==i?r=dt(i):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~o)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(s=t&-t)||16===o&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function xt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wt,kt,St,Nt,Et,Ct=!1,_t=[],jt=null,Mt=null,Ot=null,Pt=new Map,At=new Map,It=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tt(e,t){switch(e){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function $t(e,t,n,r,o,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},null!==t&&null!==(t=xo(t))&&kt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function zt(e){var t=vo(e.target);if(null!==t){var n=Fe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Rt(e,t,n){Dt(e)&&n.delete(t)}function Bt(){Ct=!1,null!==jt&&Dt(jt)&&(jt=null),null!==Mt&&Dt(Mt)&&(Mt=null),null!==Ot&&Dt(Ot)&&(Ot=null),Pt.forEach(Rt),At.forEach(Rt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function Ft(e){function t(t){return Vt(t,e)}if(0<_t.length){Vt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==jt&&Vt(jt,e),null!==Mt&&Vt(Mt,e),null!==Ot&&Vt(Ot,e),Pt.forEach(t),At.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)zt(n),null===n.blockedOn&&It.shift()}var Ht=x.ReactCurrentBatchConfig,Kt=!0;function qt(e,t,n,r){var o=vt,s=Ht.transition;Ht.transition=null;try{vt=1,Ut(e,t,n,r)}finally{vt=o,Ht.transition=s}}function Wt(e,t,n,r){var o=vt,s=Ht.transition;Ht.transition=null;try{vt=4,Ut(e,t,n,r)}finally{vt=o,Ht.transition=s}}function Ut(e,t,n,r){if(Kt){var o=Xt(e,t,n,r);if(null===o)Kr(e,t,r,Yt,n),Tt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return jt=$t(jt,e,t,n,r,o),!0;case"dragenter":return Mt=$t(Mt,e,t,n,r,o),!0;case"mouseover":return Ot=$t(Ot,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return Pt.set(s,$t(Pt.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,At.set(s,$t(At.get(s)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Tt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==o;){var s=xo(o);if(null!==s&&wt(s),null===(s=Xt(e,t,n,r))&&Kr(e,t,r,Yt,n),s===o)break;o=s}null!==o&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Yt=null;function Xt(e,t,n,r){if(Yt=null,null!==(e=vo(e=we(r))))if(null===(t=Fe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ge()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Gt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Gt,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,s=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[s-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=z({},cn,{view:0,detail:0}),fn=on(dn),hn=z({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(hn),mn=on(z({},hn,{dataTransfer:0})),gn=on(z({},dn,{relatedTarget:0})),yn=on(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(bn),xn=on(z({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Nn}var Cn=z({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(Cn),jn=on(z({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=on(z({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),On=on(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=z({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=on(Pn),In=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Tn=null;u&&"documentMode"in document&&(Tn=document.documentMode);var $n=u&&"TextEvent"in window&&!Tn,zn=u&&(!Ln||Tn&&8<Tn&&11>=Tn),Dn=String.fromCharCode(32),Rn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1,Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Un=null;function Yn(e){Dr(e,0)}function Xn(e){if(U(wo(e)))return e}function Zn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Gn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"==typeof er.oninput}Gn=Jn}else Gn=!1;Qn=Gn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Un=Wn=null)}function nr(e){if("value"===e.propertyName&&Xn(Un)){var t=[];qn(t,Un,e,we(e)),Pe(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Un=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Un)}function sr(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var ir="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(ir(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!ir(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=void 0===r.end?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=ur(n,s);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,vr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==Y(r)||(r="selectionStart"in(r=gr)&&hr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Nr={};function Er(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return Sr[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Er("animationend"),_r=Er("animationiteration"),jr=Er("animationstart"),Mr=Er("transitionend"),Or=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Or.set(e,t),l(t,[e])}for(var Ir=0;Ir<Pr.length;Ir++){var Lr=Pr[Ir];Ar(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(_r,"onAnimationIteration"),Ar(jr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Mr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$r=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,i,l,c){if(Ve.apply(this,arguments),$e){if(!$e)throw Error(s(198));var u=ze;$e=!1,ze=null,De||(De=!0,Re=u)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==s&&o.isPropagationStopped())break e;zr(o,i,c),s=l}else for(a=0;a<r.length;a++){if(l=(i=r[a]).instance,c=i.currentTarget,i=i.listener,l!==s&&o.isPropagationStopped())break e;zr(o,i,c),s=l}}}if(De)throw e=Re,De=!1,Re=null,e}function Rr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Fr(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&($r.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Zt(t)){case 1:var o=qt;break;case 4:o=Wt;break;default:o=Ut}n=o.bind(null,t,n,e),o=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,o){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var i=r.stateNode.containerInfo;if(i===o||8===i.nodeType&&i.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==i;){if(null===(a=vo(i)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}i=i.parentNode}}r=r.return}Pe(function(){var r=s,o=we(n),a=[];e:{var i=Or.get(e);if(void 0!==i){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Cr:case _r:case jr:l=yn;break;case Mr:l=On;break;case"scroll":l=fn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var u=!!(4&t),d=!u&&"scroll"===e,f=u?null!==i?i+"Capture":null:i;u=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==f&&null!=(m=Ae(p,f))&&u.push(qr(p,m,h))),d)break;p=p.return}0<u.length&&(i=new l(i,c,null,n,o),a.push({event:i,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vo(c)&&!c[mo])&&(l||i)&&(i=o.window===o?o:(i=o.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vo(c):null)&&(c!==(d=Fe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=jn,m="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?i:wo(l),h=null==c?i:wo(c),(i=new u(m,p+"leave",l,n,o)).target=d,i.relatedTarget=h,m=null,vo(o)===r&&((u=new u(f,p+"enter",c,n,o)).target=h,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(f=c,p=0,h=u=l;h;h=Ur(h))p++;for(h=0,m=f;m;m=Ur(m))h++;for(;0<p-h;)u=Ur(u),p--;for(;0<h-p;)f=Ur(f),h--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Ur(u),f=Ur(f)}u=null}else u=null;null!==l&&Yr(a,i,l,u,!1),null!==c&&null!==d&&Yr(a,d,c,u,!0)}if("select"===(l=(i=r?wo(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var g=Zn;else if(Kn(i))if(Qn)g=ar;else{g=or;var y=rr}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(a,g,n,o):(y&&y(e,i,r),"focusout"===e&&(y=i._wrapperState)&&y.controlled&&"number"===i.type&&ee(i,"number",i.value)),y=r?wo(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,xr(a,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,o)}var b;if(Ln)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Fn?Bn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(zn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Fn&&(b=en()):(Gt="value"in(Qt=o)?Qt.value:Qt.textContent,Fn=!0)),0<(y=Wr(r,v)).length&&(v=new xn(v,e,null,n,o),a.push({event:v,listeners:y}),(b||null!==(b=Vn(n)))&&(v.data=b))),(b=$n?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Rn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=en(),Jt=Gt=Qt=null,Fn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Wr(r,"onBeforeInput")).length&&(o=new xn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=b)}Dr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,s=o.stateNode;5===o.tag&&null!==s&&(o=s,null!=(s=Ae(e,n))&&r.unshift(qr(e,s,o)),null!=(s=Ae(e,t))&&r.push(qr(e,s,o))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,o){for(var s=t._reactName,a=[];null!==n&&n!==r;){var i=n,l=i.alternate,c=i.stateNode;if(null!==l&&l===r)break;5===i.tag&&null!==c&&(i=c,o?null!=(l=Ae(n,s))&&a.unshift(qr(n,l,i)):o||null!=(l=Ae(n,s))&&a.push(qr(n,l,i))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Qr(e){return("string"==typeof e?e:""+e).replace(Xr,"\n").replace(Zr,"")}function Gr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(s(425))}function Jr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"==typeof setTimeout?setTimeout:void 0,oo="function"==typeof clearTimeout?clearTimeout:void 0,so="function"==typeof Promise?Promise:void 0,ao="function"==typeof queueMicrotask?queueMicrotask:void 0!==so?function(e){return so.resolve(null).then(e).catch(io)}:ro;function io(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Ft(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Ft(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),ho="__reactFiber$"+fo,po="__reactProps$"+fo,mo="__reactContainer$"+fo,go="__reactEvents$"+fo,yo="__reactListeners$"+fo,bo="__reactHandles$"+fo;function vo(e){var t=e[ho];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[ho]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[ho])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function xo(e){return!(e=e[ho]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ko(e){return e[po]||null}var So=[],No=-1;function Eo(e){return{current:e}}function Co(e){0>No||(e.current=So[No],So[No]=null,No--)}function _o(e,t){No++,So[No]=e.current,e.current=t}var jo={},Mo=Eo(jo),Oo=Eo(!1),Po=jo;function Ao(e,t){var n=e.type.contextTypes;if(!n)return jo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,s={};for(o in n)s[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Io(e){return null!=e.childContextTypes}function Lo(){Co(Oo),Co(Mo)}function To(e,t,n){if(Mo.current!==jo)throw Error(s(168));_o(Mo,t),_o(Oo,n)}function $o(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,H(e)||"Unknown",o));return z({},n,r)}function zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jo,Po=Mo.current,_o(Mo,e),_o(Oo,Oo.current),!0}function Do(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=$o(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,Co(Oo),Co(Mo),_o(Mo,e)):Co(Oo),_o(Oo,n)}var Ro=null,Bo=!1,Vo=!1;function Fo(e){null===Ro?Ro=[e]:Ro.push(e)}function Ho(){if(!Vo&&null!==Ro){Vo=!0;var e=0,t=vt;try{var n=Ro;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ro=null,Bo=!1}catch(t){throw null!==Ro&&(Ro=Ro.slice(e+1)),Ue(Je,Ho),t}finally{vt=t,Vo=!1}}return null}var Ko=[],qo=0,Wo=null,Uo=0,Yo=[],Xo=0,Zo=null,Qo=1,Go="";function Jo(e,t){Ko[qo++]=Uo,Ko[qo++]=Wo,Wo=e,Uo=t}function es(e,t,n){Yo[Xo++]=Qo,Yo[Xo++]=Go,Yo[Xo++]=Zo,Zo=e;var r=Qo;e=Go;var o=32-at(r)-1;r&=~(1<<o),n+=1;var s=32-at(t)+o;if(30<s){var a=o-o%5;s=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Qo=1<<32-at(t)+o|n<<o|r,Go=s+e}else Qo=1<<s|n<<o|r,Go=e}function ts(e){null!==e.return&&(Jo(e,1),es(e,1,0))}function ns(e){for(;e===Wo;)Wo=Ko[--qo],Ko[qo]=null,Uo=Ko[--qo],Ko[qo]=null;for(;e===Zo;)Zo=Yo[--Xo],Yo[Xo]=null,Go=Yo[--Xo],Yo[Xo]=null,Qo=Yo[--Xo],Yo[Xo]=null}var rs=null,os=null,ss=!1,as=null;function is(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,os=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,os=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zo?{id:Qo,overflow:Go}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,os=null,!0);default:return!1}}function cs(e){return!(!(1&e.mode)||128&e.flags)}function us(e){if(ss){var t=os;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=co(n.nextSibling);var r=rs;t&&ls(e,t)?is(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function fs(e){if(e!==rs)return!1;if(!ss)return ds(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=os)){if(cs(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=co(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){os=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}os=null}}else os=rs?co(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=os;e;)e=co(e.nextSibling)}function ps(){os=rs=null,ss=!1}function ms(e){null===as?as=[e]:as.push(e)}var gs=x.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$c(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===A&&vs(s)===t.type)?((r=o(t,n.props)).ref=ys(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=ys(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=$c(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case k:return(t=zc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||T(t))return(t=Lc(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case k:return n.key===o?u(e,t,n,r):null;case A:return h(e,t,(o=n._init)(n._payload),r)}if(te(n)||T(n))return null!==o?null:d(e,t,n,r,null);bs(e,n)}return null}function p(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case A:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||T(r))return d(t,e=e.get(n)||null,r,o,null);bs(t,r)}return null}function m(o,s,i,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<i.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=h(o,d,i[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(o,d),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===i.length)return n(o,d),ss&&Jo(o,m),c;if(null===d){for(;m<i.length;m++)null!==(d=f(o,i[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return ss&&Jo(o,m),c}for(d=r(o,d);m<i.length;m++)null!==(g=p(d,o,m,i[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),ss&&Jo(o,m),c}function g(o,i,l,c){var u=T(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=i,g=i=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=h(o,m,b.value,c);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(o,m),i=a(v,i,g),null===d?u=v:d.sibling=v,d=v,m=y}if(b.done)return n(o,m),ss&&Jo(o,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=f(o,b.value,c))&&(i=a(b,i,g),null===d?u=b:d.sibling=b,d=b);return ss&&Jo(o,g),u}for(m=r(o,m);!b.done;g++,b=l.next())null!==(b=p(m,o,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),i=a(b,i,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach(function(e){return t(o,e)}),ss&&Jo(o,g),u}return function e(r,s,a,l){if("object"==typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(s=o(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===A&&vs(c)===u.type){n(r,u.sibling),(s=o(u,a.props)).ref=ys(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((s=Lc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Ic(a.type,a.key,a.props,null,r.mode,l)).ref=ys(r,s,a),l.return=r,r=l)}return i(r);case k:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=o(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=zc(a,r.mode,l)).return=r,r=s}return i(r);case A:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(T(a))return g(r,s,a,l);bs(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=o(s,a)).return=r,r=s):(n(r,s),(s=$c(a,r.mode,l)).return=r,r=s),i(r)):n(r,s)}}var ws=xs(!0),ks=xs(!1),Ss=Eo(null),Ns=null,Es=null,Cs=null;function _s(){Cs=Es=Ns=null}function js(e){var t=Ss.current;Co(Ss),e._currentValue=t}function Ms(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Os(e,t){Ns=e,Cs=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vi=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ns)throw Error(s(308));Es=e,Ns.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var As=null;function Is(e){null===As?As=[e]:As.push(e)}function Ls(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Is(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ts(e,r)}function Ts(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var $s=!1;function zs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&_l){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ts(e,n)}return null===(o=r.interleaved)?(t.next=t,Is(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ts(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Fs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?o=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?o=s=t:s=s.next=t}else o=s=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,r){var o=e.updateQueue;$s=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,i=o.shared.pending;if(null!==i){o.shared.pending=null;var l=i,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&(i=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===i?u.firstBaseUpdate=c:i.next=c,u.lastBaseUpdate=l)}if(null!==s){var d=o.baseState;for(a=0,u=c=l=null,i=s;;){var f=i.lane,h=i.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,m=i;switch(f=t,h=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=m.payload)?p.call(h,d,f):p))break e;d=z({},d,f);break e;case 2:$s=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[i]:f.push(i))}else h={eventTime:h,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,a|=f;if(null===(i=i.next)){if(null===(i=o.shared.pending))break;i=(f=i).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===s&&(o.shared.lanes=0);Tl|=a,e.lanes=a,e.memoizedState=d}}function Ks(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(s(191,o));o.call(r)}}}var qs={},Ws=Eo(qs),Us=Eo(qs),Ys=Eo(qs);function Xs(e){if(e===qs)throw Error(s(174));return e}function Zs(e,t){switch(_o(Ys,t),_o(Us,e),_o(Ws,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(Ws),_o(Ws,t)}function Qs(){Co(Ws),Co(Us),Co(Ys)}function Gs(e){Xs(Ys.current);var t=Xs(Ws.current),n=le(t,e.type);t!==n&&(_o(Us,e),_o(Ws,n))}function Js(e){Us.current===e&&(Co(Ws),Co(Us))}var ea=Eo(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,aa=0,ia=null,la=null,ca=null,ua=!1,da=!1,fa=0,ha=0;function pa(){throw Error(s(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,o,a){if(aa=a,ia=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Ja:ei,e=n(r,o),da){a=0;do{if(da=!1,fa=0,25<=a)throw Error(s(301));a+=1,ca=la=null,t.updateQueue=null,oa.current=ti,e=n(r,o)}while(da)}if(oa.current=Ga,t=null!==la&&null!==la.next,aa=0,ca=la=ia=null,ua=!1,t)throw Error(s(300));return e}function ya(){var e=0!==fa;return fa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?ia.memoizedState=ca=e:ca=ca.next=e,ca}function va(){if(null===la){var e=ia.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?ia.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(s(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?ia.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"==typeof t?t(e):t}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=la,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var i=o.next;o.next=a.next,a.next=i}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var l=i=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,i=r):c=c.next=f,ia.lanes|=d,Tl|=d}u=u.next}while(null!==u&&u!==a);null===c?i=r:c.next=l,ir(r,t.memoizedState)||(vi=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,ia.lanes|=a,Tl|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var i=o=o.next;do{a=e(a,i.action),i=i.next}while(i!==o);ir(a,t.memoizedState)||(vi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Na(e,t){var n=ia,r=va(),o=t(),a=!ir(r.memoizedState,o);if(a&&(r.memoizedState=o,vi=!0),r=r.queue,$a(_a.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Pa(9,Ca.bind(null,n,r,o,t),void 0,null),null===jl)throw Error(s(349));30&aa||Ea(n,t,o)}return o}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ia.updateQueue)?(t={lastEffect:null,stores:null},ia.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,ja(t)&&Ma(e)}function _a(e,t,n){return n(function(){ja(t)&&Ma(e)})}function ja(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(e){return!0}}function Ma(e){var t=Ts(e,1);null!==t&&tc(t,e,1,-1)}function Oa(e){var t=ba();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,ia,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ia.updateQueue)?(t={lastEffect:null,stores:null},ia.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return va().memoizedState}function Ia(e,t,n,r){var o=ba();ia.flags|=e,o.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function La(e,t,n,r){var o=va();r=void 0===r?null:r;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==r&&ma(r,a.deps))return void(o.memoizedState=Pa(t,n,s,r))}ia.flags|=e,o.memoizedState=Pa(1|t,n,s,r)}function Ta(e,t){return Ia(8390656,8,e,t)}function $a(e,t){return La(2048,8,e,t)}function za(e,t){return La(4,2,e,t)}function Da(e,t){return La(4,4,e,t)}function Ra(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!=n?n.concat([e]):null,La(4,4,Ra.bind(null,t,e),n)}function Va(){}function Fa(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ka(e,t,n){return 21&aa?(ir(n,t)||(n=mt(),ia.lanes|=n,Tl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vi=!0),e.memoizedState=n)}function qa(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{vt=n,sa.transition=r}}function Wa(){return va().memoizedState}function Ua(e,t,n){var r=ec(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e)?Za(t,n):null!==(n=Ls(e,t,n,r))&&(tc(n,e,r,Jl()),Qa(n,t,r))}function Ya(e,t,n){var r=ec(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Za(t,o);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,i=s(a,n);if(o.hasEagerState=!0,o.eagerState=i,ir(i,a)){var l=t.interleaved;return null===l?(o.next=o,Is(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(e){}null!==(n=Ls(e,t,o,r))&&(tc(n,e,r,o=Jl()),Qa(n,t,r))}}function Xa(e){var t=e.alternate;return e===ia||null!==t&&t===ia}function Za(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Ga={readContext:Ps,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Ps,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Ta,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ia(4194308,4,Ra.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ia(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ia(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ua.bind(null,ia,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Oa,useDebugValue:Va,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Oa(!1),t=e[0];return e=qa.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ia,o=ba();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===jl)throw Error(s(349));30&aa||Ea(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Ta(_a.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ca.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=jl.identifierPrefix;if(ss){var n=Go;t=":"+t+"R"+(n=(Qo&~(1<<32-at(Qo)-1)).toString(32)+n),0<(n=fa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:Ps,useCallback:Fa,useContext:Ps,useEffect:$a,useImperativeHandle:Ba,useInsertionEffect:za,useLayoutEffect:Da,useMemo:Ha,useReducer:wa,useRef:Aa,useState:function(){return wa(xa)},useDebugValue:Va,useDeferredValue:function(e){return Ka(va(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],va().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Na,useId:Wa,unstable_isNewReconciler:!1},ti={readContext:Ps,useCallback:Fa,useContext:Ps,useEffect:$a,useImperativeHandle:Ba,useInsertionEffect:za,useLayoutEffect:Da,useMemo:Ha,useReducer:ka,useRef:Aa,useState:function(){return ka(xa)},useDebugValue:Va,useDeferredValue:function(e){var t=va();return null===la?t.memoizedState=e:Ka(t,la.memoizedState,e)},useTransition:function(){return[ka(xa)[0],va().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Na,useId:Wa,unstable_isNewReconciler:!1};function ni(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ri(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oi={isMounted:function(e){return!!(e=e._reactInternals)&&Fe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Jl(),o=ec(e),s=Rs(r,o);s.payload=t,null!=n&&(s.callback=n),null!==(t=Bs(e,s,o))&&(tc(t,e,o,r),Vs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Jl(),o=ec(e),s=Rs(r,o);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Bs(e,s,o))&&(tc(t,e,o,r),Vs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jl(),r=ec(e),o=Rs(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=Bs(e,o,r))&&(tc(t,e,r,n),Vs(t,e,r))}};function si(e,t,n,r,o,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(o,s))}function ai(e,t,n){var r=!1,o=jo,s=t.contextType;return"object"==typeof s&&null!==s?s=Ps(s):(o=Io(t)?Po:Mo.current,s=(r=null!=(r=t.contextTypes))?Ao(e,o):jo),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function ii(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function li(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},zs(e);var s=t.contextType;"object"==typeof s&&null!==s?o.context=Ps(s):(s=Io(t)?Po:Mo.current,o.context=Ao(e,s)),o.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ri(e,t,s,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oi.enqueueReplaceState(o,o.state,null),Hs(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function ui(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function di(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var fi="function"==typeof WeakMap?WeakMap:Map;function hi(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),di(0,t)},n}function pi(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){di(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){di(0,t),"function"!=typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mi(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fi;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function gi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yi(e,t,n,r,o){return 1&e.mode?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Bs(n,t,1))),n.lanes|=1),e)}var bi=x.ReactCurrentOwner,vi=!1;function xi(e,t,n,r){t.child=null===e?ks(t,null,n,r):ws(t,e.child,n,r)}function wi(e,t,n,r,o){n=n.render;var s=t.ref;return Os(t,o),r=ga(e,t,n,r,s,o),n=ya(),null===e||vi?(ss&&n&&ts(t),t.flags|=1,xi(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hi(e,t,o))}function ki(e,t,n,r,o){if(null===e){var s=n.type;return"function"!=typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Si(e,t,s,r,o))}if(s=e.child,0===(e.lanes&o)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hi(e,t,o)}return t.flags|=1,(e=Ac(s,r)).ref=t.ref,e.return=t,t.child=e}function Si(e,t,n,r,o){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(vi=!1,t.pendingProps=r=s,0===(e.lanes&o))return t.lanes=e.lanes,Hi(e,t,o);131072&e.flags&&(vi=!0)}}return Ci(e,t,n,r,o)}function Ni(e,t,n){var r=t.pendingProps,o=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_o(Al,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,_o(Al,Pl),Pl|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_o(Al,Pl),Pl|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_o(Al,Pl),Pl|=r;return xi(e,t,o,n),t.child}function Ei(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ci(e,t,n,r,o){var s=Io(n)?Po:Mo.current;return s=Ao(t,s),Os(t,o),n=ga(e,t,n,r,s,o),r=ya(),null===e||vi?(ss&&r&&ts(t),t.flags|=1,xi(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hi(e,t,o))}function _i(e,t,n,r,o){if(Io(n)){var s=!0;zo(t)}else s=!1;if(Os(t,o),null===t.stateNode)Fi(e,t),ai(t,n,r),li(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,i=t.memoizedProps;a.props=i;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?Ps(c):Ao(t,c=Io(n)?Po:Mo.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(i!==r||l!==c)&&ii(t,a,r,c),$s=!1;var f=t.memoizedState;a.state=f,Hs(t,r,a,o),l=t.memoizedState,i!==r||f!==l||Oo.current||$s?("function"==typeof u&&(ri(t,n,u,r),l=t.memoizedState),(i=$s||si(t,n,i,r,f,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=i):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ds(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ni(t.type,i),a.props=c,d=t.pendingProps,f=a.context,l="object"==typeof(l=n.contextType)&&null!==l?Ps(l):Ao(t,l=Io(n)?Po:Mo.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(i!==d||f!==l)&&ii(t,a,r,l),$s=!1,f=t.memoizedState,a.state=f,Hs(t,r,a,o);var p=t.memoizedState;i!==d||f!==p||Oo.current||$s?("function"==typeof h&&(ri(t,n,h,r),p=t.memoizedState),(c=$s||si(t,n,c,r,f,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return ji(e,t,n,r,s,o)}function ji(e,t,n,r,o,s){Ei(e,t);var a=!!(128&t.flags);if(!r&&!a)return o&&Do(t,n,!1),Hi(e,t,s);r=t.stateNode,bi.current=t;var i=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,i,s)):xi(e,t,i,s),t.memoizedState=r.state,o&&Do(t,n,!0),t.child}function Mi(e){var t=e.stateNode;t.pendingContext?To(0,t.pendingContext,t.pendingContext!==t.context):t.context&&To(0,t.context,!1),Zs(e,t.containerInfo)}function Oi(e,t,n,r,o){return ps(),ms(o),t.flags|=256,xi(e,t,n,r),t.child}var Pi,Ai,Ii,Li={dehydrated:null,treeContext:null,retryLane:0};function Ti(e){return{baseLanes:e,cachePool:null,transitions:null}}function $i(e,t,n){var r,o=t.pendingProps,a=ea.current,i=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&a)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_o(ea,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=o.children,e=o.fallback,i?(o=t.mode,i=t.child,l={mode:"hidden",children:l},1&o||null===i?i=Tc(l,o,0,null):(i.childLanes=0,i.pendingProps=l),e=Lc(e,o,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ti(n),t.memoizedState=Li,e):zi(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,i){if(n)return 256&t.flags?(t.flags&=-257,Di(e,t,i,r=ui(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Tc({mode:"visible",children:r.children},o,0,null),(a=Lc(a,o,i,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,1&t.mode&&ws(t,e.child,null,i),t.child.memoizedState=Ti(i),t.memoizedState=Li,a);if(!(1&t.mode))return Di(e,t,i,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Di(e,t,i,r=ui(a=Error(s(419)),r,void 0))}if(l=0!==(i&e.childLanes),vi||l){if(null!==(r=jl)){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|i))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Ts(e,o),tc(r,e,o,-1))}return pc(),Di(e,t,i,r=ui(Error(s(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,os=co(o.nextSibling),rs=t,ss=!0,as=null,null!==e&&(Yo[Xo++]=Qo,Yo[Xo++]=Go,Yo[Xo++]=Zo,Qo=e.id,Go=e.overflow,Zo=t),(t=zi(t,r.children)).flags|=4096,t)}(e,t,l,o,r,a,n);if(i){i=o.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 1&l||t.child===a?(o=Ac(a,c)).subtreeFlags=14680064&a.subtreeFlags:((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null),null!==r?i=Ac(r,i):(i=Lc(i,l,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,l=null===(l=e.child.memoizedState)?Ti(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Li,o}return e=(i=e.child).sibling,o=Ac(i,{mode:"visible",children:o.children}),!(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function zi(e,t){return(t=Tc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Di(e,t,n,r){return null!==r&&ms(r),ws(t,e.child,null,n),(e=zi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ri(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ms(e.return,t,n)}function Bi(e,t,n,r,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Vi(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(xi(e,t,r.children,n),2&(r=ea.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ri(e,n,t);else if(19===e.tag)Ri(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_o(ea,r),1&t.mode)switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Bi(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Bi(t,!0,n,null,s);break;case"together":Bi(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Fi(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hi(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ac(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ac(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ki(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wi(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(t),null;case 1:case 17:return Io(t.type)&&Lo(),qi(t),null;case 3:return r=t.stateNode,Qs(),Co(Oo),Co(Mo),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==as&&(sc(as),as=null))),qi(t),null;case 5:Js(t);var o=Xs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Ai(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return qi(t),null}if(e=Xs(Ws.current),fs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ho]=t,r[po]=a,e=!!(1&t.mode),n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(o=0;o<Tr.length;o++)Rr(Tr[o],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":Z(r,a),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Rr("invalid",r);break;case"textarea":oe(r,a),Rr("invalid",r)}for(var l in be(n,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Gr(r.textContent,c,e),o=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Gr(r.textContent,c,e),o=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Rr("scroll",r)}switch(n){case"input":W(r),J(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Jr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ho]=t,e[po]=r,Pi(e,t),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),o=r;break;case"iframe":case"object":case"embed":Rr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Tr.length;o++)Rr(Tr[o],e);o=r;break;case"source":Rr("error",e),o=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),o=r;break;case"details":Rr("toggle",e),o=r;break;case"input":Z(e,r),o=X(e,r),Rr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=z({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Rr("invalid",e)}for(a in be(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"==typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(i.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Rr("scroll",e):null!=u&&v(e,a,u,l))}switch(n){case"input":W(e),J(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qi(t),null;case 6:if(e&&null!=t.stateNode)Ii(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ys.current),Xs(Ws.current),fs(t)){if(r=t.stateNode,n=t.memoizedProps,r[ho]=t,(a=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Gr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Gr(r.nodeValue,n,!!(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ho]=t,t.stateNode=r}return qi(t),null;case 13:if(Co(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==os&&1&t.mode&&!(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=fs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[ho]=t}else ps(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qi(t),a=!1}else null!==as&&(sc(as),as=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ea.current?0===Il&&(Il=3):pc())),null!==t.updateQueue&&(t.flags|=4),qi(t),null);case 4:return Qs(),null===e&&Fr(t.stateNode.containerInfo),qi(t),null;case 10:return js(t.type._context),qi(t),null;case 19:if(Co(ea),null===(a=t.memoizedState))return qi(t),null;if(r=!!(128&t.flags),null===(l=a.rendering))if(r)Ki(a,!1);else{if(0!==Il||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ki(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _o(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vl&&(t.flags|=128,r=!0,Ki(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ki(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ss)return qi(t),null}else 2*Qe()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Ki(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ea.current,_o(ea,r?1&n|2:1&n),t):(qi(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Pl)&&(qi(t),6&t.subtreeFlags&&(t.flags|=8192)):qi(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ui(e,t){switch(ns(t),t.tag){case 1:return Io(t.type)&&Lo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Co(Oo),Co(Mo),ra(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Co(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(ea),null;case 4:return Qs(),null;case 10:return js(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Pi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ai=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Xs(Ws.current);var s,a=null;switch(n){case"input":o=X(e,o),r=X(e,r),a=[];break;case"select":o=z({},o,{value:void 0}),r=z({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Jr)}for(u in be(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(i.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(i.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Rr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ii=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yi=!1,Xi=!1,Zi="function"==typeof WeakSet?WeakSet:Set,Qi=null;function Gi(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Sc(e,t,n)}else n.current=null}function Ji(e,t,n){try{n()}catch(n){Sc(e,t,n)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,void 0!==s&&Ji(t,n,s)}o=o.next}while(o!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[ho],delete t[po],delete t[go],delete t[yo],delete t[bo]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function il(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(il(e,t,n),e=e.sibling;null!==e;)il(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(ot,n)}catch(e){}switch(n.tag){case 5:Xi||Gi(n,t);case 6:var r=cl,o=ul;cl=null,dl(e,t,n),ul=o,null!==(cl=r)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Ft(e)):lo(cl,n.stateNode));break;case 4:r=cl,o=ul,cl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),cl=r,ul=o;break;case 0:case 11:case 14:case 15:if(!Xi&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){o=r=r.next;do{var s=o,a=s.destroy;s=s.tag,void 0!==a&&(2&s||4&s)&&Ji(n,t,a),o=o.next}while(o!==r)}dl(e,t,n);break;case 1:if(!Xi&&(Gi(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Sc(n,t,e)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Xi=(r=Xi)||null!==n.memoizedState,dl(e,t,n),Xi=r):dl(e,t,n);break;default:dl(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zi),t.forEach(function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(s(160));fl(a,i,o),cl=null,ul=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(e){Sc(o,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),gl(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(t){Sc(e,e.return,t)}try{tl(5,e,e.return)}catch(t){Sc(e,e.return,t)}}break;case 1:pl(t,e),gl(e),512&r&&null!==n&&Gi(n,n.return);break;case 5:if(pl(t,e),gl(e),512&r&&null!==n&&Gi(n,n.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(t){Sc(e,e.return,t)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,i=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(o,a),ve(l,i);var u=ve(l,a);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];"style"===d?ge(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):v(o,d,f,u)}switch(l){case"input":G(o,a);break;case"textarea":se(o,a);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(t){Sc(e,e.return,t)}}break;case 6:if(pl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(t){Sc(e,e.return,t)}}break;case 3:if(pl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ft(t.containerInfo)}catch(t){Sc(e,e.return,t)}break;case 4:default:pl(t,e),gl(e);break;case 13:pl(t,e),gl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Bl=Qe())),4&r&&hl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xi=(u=Xi)||d,pl(t,e),Xi=u):pl(t,e),gl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Qi=e,d=e.child;null!==d;){for(f=Qi=d;null!==Qi;){switch(p=(h=Qi).child,h.tag){case 0:case 11:case 14:case 15:tl(4,h,h.return);break;case 1:Gi(h,h.return);var m=h.stateNode;if("function"==typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Sc(r,n,e)}}break;case 5:Gi(h,h.return);break;case 22:if(null!==h.memoizedState){xl(f);continue}}null!==p?(p.return=h,Qi=p):xl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,u?"function"==typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=f.stateNode,i=null!=(c=f.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",i))}catch(t){Sc(e,e.return,t)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(t){Sc(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pl(t,e),gl(e),4&r&&hl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(fe(o,""),r.flags&=-33),ll(e,al(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;il(e,al(e),a);break;default:throw Error(s(161))}}catch(t){Sc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qi=e,bl(e,t,n)}function bl(e,t,n){for(var r=!!(1&e.mode);null!==Qi;){var o=Qi,s=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Yi;if(!a){var i=o.alternate,l=null!==i&&null!==i.memoizedState||Xi;i=Yi;var c=Xi;if(Yi=a,(Xi=l)&&!c)for(Qi=o;null!==Qi;)l=(a=Qi).child,22===a.tag&&null!==a.memoizedState?wl(o):null!==l?(l.return=a,Qi=l):wl(o);for(;null!==s;)Qi=s,bl(s,t,n),s=s.sibling;Qi=o,Yi=i,Xi=c}vl(e)}else 8772&o.subtreeFlags&&null!==s?(s.return=o,Qi=s):vl(e)}}function vl(e){for(;null!==Qi;){var t=Qi;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Xi||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xi)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ni(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ks(t,a,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ks(t,i,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Ft(f)}}}break;default:throw Error(s(163))}Xi||512&t.flags&&rl(t)}catch(e){Sc(t,t.return,e)}}if(t===e){Qi=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qi=n;break}Qi=t.return}}function xl(e){for(;null!==Qi;){var t=Qi;if(t===e){Qi=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qi=n;break}Qi=t.return}}function wl(e){for(;null!==Qi;){var t=Qi;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(e){Sc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(e){Sc(t,o,e)}}var s=t.return;try{rl(t)}catch(e){Sc(t,s,e)}break;case 5:var a=t.return;try{rl(t)}catch(e){Sc(t,a,e)}}}catch(e){Sc(t,t.return,e)}if(t===e){Qi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Qi=i;break}Qi=t.return}}var kl,Sl=Math.ceil,Nl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,_l=0,jl=null,Ml=null,Ol=0,Pl=0,Al=Eo(0),Il=0,Ll=null,Tl=0,$l=0,zl=0,Dl=null,Rl=null,Bl=0,Vl=1/0,Fl=null,Hl=!1,Kl=null,ql=null,Wl=!1,Ul=null,Yl=0,Xl=0,Zl=null,Ql=-1,Gl=0;function Jl(){return 6&_l?Qe():-1!==Ql?Ql:Ql=Qe()}function ec(e){return 1&e.mode?2&_l&&0!==Ol?Ol&-Ol:null!==gs.transition?(0===Gl&&(Gl=mt()),Gl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Zt(e.type):1}function tc(e,t,n,r){if(50<Xl)throw Xl=0,Zl=null,Error(s(185));yt(e,n,r),2&_l&&e===jl||(e===jl&&(!(2&_l)&&($l|=n),4===Il&&ac(e,Ol)),nc(e,r),1===n&&0===_l&&!(1&t.mode)&&(Vl=Qe()+500,Bo&&Ho()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),i=1<<a,l=o[a];-1===l?0!==(i&n)&&0===(i&r)||(o[a]=ht(i,t)):l<=t&&(e.expiredLanes|=i),s&=~i}}(e,t);var r=ft(e,e===jl?Ol:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bo=!0,Fo(e)}(ic.bind(null,e)):Fo(ic.bind(null,e)),ao(function(){!(6&_l)&&Ho()}),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=jc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ql=-1,Gl=0,6&_l)throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ft(e,e===jl?Ol:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var o=_l;_l|=2;var a=hc();for(jl===e&&Ol===t||(Fl=null,Vl=Qe()+500,dc(e,t));;)try{yc();break}catch(t){fc(e,t)}_s(),Nl.current=a,_l=o,null!==Ml?t=0:(jl=null,Ol=0,t=Il)}if(0!==t){if(2===t&&0!==(o=pt(e))&&(r=o,t=oc(e,o)),1===t)throw n=Ll,dc(e,0),ac(e,r),nc(e,Qe()),n;if(6===t)ac(e,r);else{if(o=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!ir(s(),o))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)||(t=mc(e,r),2===t&&(a=pt(e),0!==a&&(r=a,t=oc(e,a))),1!==t)))throw n=Ll,dc(e,0),ac(e,r),nc(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Rl,Fl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Bl+500-Qe())){if(0!==ft(e,0))break;if(((o=e.suspendedLanes)&r)!==r){Jl(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(xc.bind(null,e,Rl,Fl),t);break}xc(e,Rl,Fl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-at(r);a=1<<i,(i=t[i])>o&&(o=i),r&=~a}if(r=o,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ro(xc.bind(null,e,Rl,Fl),r);break}xc(e,Rl,Fl);break;default:throw Error(s(329))}}}return nc(e,Qe()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=Dl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Rl,Rl=n,null!==t&&sc(t)),e}function sc(e){null===Rl?Rl=e:Rl.push.apply(Rl,e)}function ac(e,t){for(t&=~zl,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ic(e){if(6&_l)throw Error(s(327));wc();var t=ft(e,0);if(!(1&t))return nc(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),nc(e,Qe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Rl,Fl),nc(e,Qe()),null}function lc(e,t){var n=_l;_l|=1;try{return e(t)}finally{0===(_l=n)&&(Vl=Qe()+500,Bo&&Ho())}}function cc(e){null!==Ul&&0===Ul.tag&&!(6&_l)&&wc();var t=_l;_l|=1;var n=Cl.transition,r=vt;try{if(Cl.transition=null,vt=1,e)return e()}finally{vt=r,Cl.transition=n,!(6&(_l=t))&&Ho()}}function uc(){Pl=Al.current,Co(Al)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Lo();break;case 3:Qs(),Co(Oo),Co(Mo),ra();break;case 5:Js(r);break;case 4:Qs();break;case 13:case 19:Co(ea);break;case 10:js(r.type._context);break;case 22:case 23:uc()}n=n.return}if(jl=e,Ml=e=Ac(e.current,null),Ol=Pl=t,Il=0,Ll=null,zl=$l=Tl=0,Rl=Dl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var o=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=o,r.next=a}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=Ml;try{if(_s(),oa.current=Ga,ua){for(var r=ia.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=ia=null,da=!1,fa=0,El.current=null,null===n||null===n.return){Il=1,Ll=t,Ml=null;break}e:{var a=e,i=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,f=d.tag;if(!(1&d.mode||0!==f&&11!==f&&15!==f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gi(i);if(null!==p){p.flags&=-257,yi(p,i,l,0,t),1&p.mode&&mi(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){mi(a,u,t),pc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var y=gi(i);if(null!==y){!(65536&y.flags)&&(y.flags|=256),yi(y,i,l,0,t),ms(ci(c,l));break e}}a=c=ci(c,l),4!==Il&&(Il=2),null===Dl?Dl=[a]:Dl.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fs(a,hi(0,c,t));break e;case 1:l=c;var b=a.type,v=a.stateNode;if(!(128&a.flags||"function"!=typeof b.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==ql&&ql.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t,Fs(a,pi(a,l,t));break e}}a=a.return}while(null!==a)}vc(n)}catch(e){t=e,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function hc(){var e=Nl.current;return Nl.current=Ga,null===e?Ga:e}function pc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===jl||!(268435455&Tl)&&!(268435455&$l)||ac(jl,Ol)}function mc(e,t){var n=_l;_l|=2;var r=hc();for(jl===e&&Ol===t||(Fl=null,dc(e,t));;)try{gc();break}catch(t){fc(e,t)}if(_s(),_l=n,Nl.current=r,null!==Ml)throw Error(s(261));return jl=null,Ol=0,Il}function gc(){for(;null!==Ml;)bc(Ml)}function yc(){for(;null!==Ml&&!Xe();)bc(Ml)}function bc(e){var t=kl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?vc(e):Ml=t,El.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ui(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Il=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Wi(n,t,Pl)))return void(Ml=n);if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Il&&(Il=5)}function xc(e,t,n){var r=vt,o=Cl.transition;try{Cl.transition=null,vt=1,function(e,t,n,r){do{wc()}while(null!==Ul);if(6&_l)throw Error(s(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}(e,a),e===jl&&(Ml=jl=null,Ol=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Wl||(Wl=!0,jc(tt,function(){return wc(),null})),a=!!(15990&n.flags),15990&n.subtreeFlags||a){a=Cl.transition,Cl.transition=null;var i=vt;vt=1;var l=_l;_l|=4,El.current=null,function(e,t){if(eo=Kt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==o&&3!==f.nodeType||(l=i+o),f!==a||0!==r&&3!==f.nodeType||(c=i+r),3===f.nodeType&&(i+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===o&&(l=i),h===a&&++d===r&&(c=i),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Kt=!1,Qi=t;null!==Qi;)if(e=(t=Qi).child,1028&t.subtreeFlags&&null!==e)e.return=t,Qi=e;else for(;null!==Qi;){t=Qi;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ni(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(e){Sc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Qi=e;break}Qi=t.return}m=el,el=!1}(e,n),ml(n,e),pr(to),Kt=!!eo,to=eo=null,e.current=n,yl(n,e,o),Ze(),_l=l,vt=i,Cl.transition=a}else e.current=n;if(Wl&&(Wl=!1,Ul=e,Yl=o),0===(a=e.pendingLanes)&&(ql=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(ot,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),nc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((o=t[n]).value,{componentStack:o.stack,digest:o.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;!!(1&Yl)&&0!==e.tag&&wc(),1&(a=e.pendingLanes)?e===Zl?Xl++:(Xl=0,Zl=e):Xl=0,Ho()}(e,t,n,r)}finally{Cl.transition=o,vt=r}return null}function wc(){if(null!==Ul){var e=xt(Yl),t=Cl.transition,n=vt;try{if(Cl.transition=null,vt=16>e?16:e,null===Ul)var r=!1;else{if(e=Ul,Ul=null,Yl=0,6&_l)throw Error(s(331));var o=_l;for(_l|=4,Qi=e.current;null!==Qi;){var a=Qi,i=a.child;if(16&Qi.flags){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qi=u;null!==Qi;){var d=Qi;switch(d.tag){case 0:case 11:case 15:tl(8,d,a)}var f=d.child;if(null!==f)f.return=d,Qi=f;else for(;null!==Qi;){var h=(d=Qi).sibling,p=d.return;if(ol(d),d===u){Qi=null;break}if(null!==h){h.return=p,Qi=h;break}Qi=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qi=a}}if(2064&a.subtreeFlags&&null!==i)i.return=a,Qi=i;else e:for(;null!==Qi;){if(2048&(a=Qi).flags)switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Qi=b;break e}Qi=a.return}}var v=e.current;for(Qi=v;null!==Qi;){var x=(i=Qi).child;if(2064&i.subtreeFlags&&null!==x)x.return=i,Qi=x;else e:for(i=v;null!==Qi;){if(2048&(l=Qi).flags)try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(e){Sc(l,l.return,e)}if(l===i){Qi=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qi=w;break e}Qi=l.return}}if(_l=o,Ho(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(ot,e)}catch(e){}r=!0}return r}finally{vt=n,Cl.transition=t}}return!1}function kc(e,t,n){e=Bs(e,t=hi(0,t=ci(n,t),1),1),t=Jl(),null!==e&&(yt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Bs(t,e=pi(t,e=ci(n,e),1),1),e=Jl(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Jl(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Ol&n)===n&&(4===Il||3===Il&&(130023424&Ol)===Ol&&500>Qe()-Bl?dc(e,0):zl|=n),nc(e,t)}function Ec(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=Jl();null!==(e=Ts(e,t))&&(yt(e,t,n),nc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ec(e,n)}function jc(e,t){return Ue(e,t)}function Mc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Mc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,o,a){var i=2;if(r=e,"function"==typeof e)Pc(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case S:return Lc(n.children,o,a,t);case N:i=8,o|=8;break;case E:return(e=Oc(12,n,t,2|o)).elementType=E,e.lanes=a,e;case M:return(e=Oc(13,n,t,o)).elementType=M,e.lanes=a,e;case O:return(e=Oc(19,n,t,o)).elementType=O,e.lanes=a,e;case I:return Tc(n,o,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:i=10;break e;case _:i=9;break e;case j:i=11;break e;case P:i=14;break e;case A:i=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(i,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Tc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function $c(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Rc(e,t,n,r,o,s,a,i,l){return e=new Dc(e,t,n,i,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zs(s),e}function Bc(e){if(!e)return jo;e:{if(Fe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Io(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Io(n))return $o(e,n,t)}return t}function Vc(e,t,n,r,o,s,a,i,l){return(e=Rc(n,r,!0,e,0,s,0,i,l)).context=Bc(null),n=e.current,(s=Rs(r=Jl(),o=ec(n))).callback=null!=t?t:null,Bs(n,s,o),e.current.lanes=o,yt(e,o,r),nc(e,r),e}function Fc(e,t,n,r){var o=t.current,s=Jl(),a=ec(o);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bs(o,t,a))&&(tc(e,o,a,s),Vs(e,o,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oo.current)vi=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return vi=!1,function(e,t,n){switch(t.tag){case 3:Mi(t),ps();break;case 5:Gs(t);break;case 1:Io(t.type)&&zo(t);break;case 4:Zs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;_o(Ss,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_o(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?$i(e,t,n):(_o(ea,1&ea.current),null!==(e=Hi(e,t,n))?e.sibling:null);_o(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Vi(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),_o(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Ni(e,t,n)}return Hi(e,t,n)}(e,t,n);vi=!!(131072&e.flags)}else vi=!1,ss&&1048576&t.flags&&es(t,Uo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Fi(e,t),e=t.pendingProps;var o=Ao(t,Mo.current);Os(t,n),o=ga(null,t,r,e,o,n);var a=ya();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Io(r)?(a=!0,zo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,zs(t),o.updater=oi,t.stateNode=o,o._reactInternals=t,li(t,r,e,n),t=ji(null,t,r,!0,a,n)):(t.tag=0,ss&&a&&ts(t),xi(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Fi(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return Pc(e)?1:0;if(null!=e){if((e=e.$$typeof)===j)return 11;if(e===P)return 14}return 2}(r),e=ni(r,e),o){case 0:t=Ci(null,t,r,e,n);break e;case 1:t=_i(null,t,r,e,n);break e;case 11:t=wi(null,t,r,e,n);break e;case 14:t=ki(null,t,r,ni(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ci(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 1:return r=t.type,o=t.pendingProps,_i(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 3:e:{if(Mi(t),null===e)throw Error(s(387));r=t.pendingProps,o=(a=t.memoizedState).element,Ds(e,t),Hs(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Oi(e,t,r,n,o=ci(Error(s(423)),t));break e}if(r!==o){t=Oi(e,t,r,n,o=ci(Error(s(424)),t));break e}for(os=co(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,as=null,n=ks(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===o){t=Hi(e,t,n);break e}xi(e,t,r,n)}t=t.child}return t;case 5:return Gs(t),null===e&&us(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,i=o.children,no(r,o)?i=null:null!==a&&no(r,a)&&(t.flags|=32),Ei(e,t),xi(e,t,i,n),t.child;case 6:return null===e&&us(t),null;case 13:return $i(e,t,n);case 4:return Zs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):xi(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,wi(e,t,r,o=t.elementType===r?o:ni(r,o),n);case 7:return xi(e,t,t.pendingProps,n),t.child;case 8:case 12:return xi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,_o(Ss,r._currentValue),r._currentValue=i,null!==a)if(ir(a.value,i)){if(a.children===o.children&&!Oo.current){t=Hi(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){i=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Rs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ms(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)i=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(i=a.return))throw Error(s(341));i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ms(i,n,t),i=a.sibling}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===t){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}xi(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Os(t,n),r=r(o=Ps(o)),t.flags|=1,xi(e,t,r,n),t.child;case 14:return o=ni(r=t.type,t.pendingProps),ki(e,t,r,o=ni(r.type,o),n);case 15:return Si(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ni(r,o),Fi(e,t),t.tag=1,Io(r)?(e=!0,zo(t)):e=!1,Os(t,n),ai(t,r,o),li(t,r,o,n),ji(null,t,r,!0,e,n);case 19:return Vi(e,t,n);case 22:return Ni(e,t,n)}throw Error(s(156,t.tag))};var Wc="function"==typeof reportError?reportError:function(e){console.error(e)};function Uc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Gc(e,t,n,r,o){var s=n._reactRootContainer;if(s){var a=s;if("function"==typeof o){var i=o;o=function(){var e=Hc(a);i.call(e)}}Fc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"==typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[mo]=a.current,Fr(8===e.nodeType?e.parentNode:e),cc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var i=r;r=function(){var e=Hc(l);i.call(e)}}var l=Rc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[mo]=l.current,Fr(8===e.nodeType?e.parentNode:e),cc(function(){Fc(t,l,n,r)}),l}(n,t,e,o,r);return Hc(a)}Yc.prototype.render=Uc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Fc(e,t,null,null)},Yc.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Fc(null,e,null,null)}),t[mo]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&zt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),nc(t,Qe()),!(6&_l)&&(Vl=Qe()+500,Ho()))}break;case 13:cc(function(){var t=Ts(e,1);if(null!==t){var n=Jl();tc(t,e,1,n)}}),qc(e,1)}},kt=function(e){if(13===e.tag){var t=Ts(e,134217728);null!==t&&tc(t,e,134217728,Jl()),qc(e,134217728)}},St=function(e){if(13===e.tag){var t=ec(e),n=Ts(e,t);null!==n&&tc(n,e,t,Jl()),qc(e,t)}},Nt=function(){return vt},Et=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},ke=function(e,t,n){switch(t){case"input":if(G(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(s(90));U(r),G(r,o)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},je=lc,Me=cc;var Jc={usingClientEntryPoint:!1,Events:[xo,wo,ko,Ce,_e,lc]},eu={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{ot=nu.inject(tu),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",o=Wc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Rc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,Fr(8===e.nodeType?e.parentNode:e),new Uc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return Gc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",i=Wc;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,o,0,a,i),e[mo]=t.current,Fr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return Gc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(cc(function(){Gc(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Gc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},576(e,t,n){var r=n(143);t.H=r.createRoot,r.hydrateRoot},143(e,t,n){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(481)},462(e,t,n){var r=n(758),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:s,_owner:i.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},713(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=v.prototype=new b;x.constructor=v,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var o,s={},a=null,i=null;if(null!=t)for(o in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,o)&&!N.hasOwnProperty(o)&&(s[o]=t[o]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===s[o]&&(s[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:i,props:s,_owner:S.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(e,t,o,s,a){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+j(l,0):s,w(a)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),M(a,t,o,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+j(i=e[c],c);l+=M(i,t,o,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(i=e.next()).done;)l+=M(i=i.value,t,o,u=s+j(i,c++),a);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],o=0;return M(e,r,"","",function(e){return t.call(n,e,o++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},I={transition:null},L={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};function T(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=v,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=T,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),s=e.key,a=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,i=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!N.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:o,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=T,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},758(e,t,n){e.exports=n(713)},70(e,t,n){e.exports=n(462)},733(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<s(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var i=2*(r+1)-1,l=e[i],c=i+1,u=e[c];if(0>s(l,n))c<o&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[i]=n,r=i);else{if(!(c<o&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,I(k);else{var t=r(u);null!==t&&L(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,b(C),C=-1),p=!0;var s=h;try{for(x(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!M());){var a=f.callback;if("function"==typeof a){f.callback=null,h=f.priorityLevel;var i=a(f.expirationTime<=n);n=t.unstable_now(),"function"==typeof i?f.callback=i:f===r(c)&&o(c),x(n)}else o(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&L(w,d.startTime-n),l=!1}return l}finally{f=null,h=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,N=!1,E=null,C=-1,_=5,j=-1;function M(){return!(t.unstable_now()-j<_)}function O(){if(null!==E){var e=t.unstable_now();j=e;var n=!0;try{n=E(!0,e)}finally{n?S():(N=!1,E=null)}}else N=!1}if("function"==typeof v)S=function(){v(O)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=O,S=function(){A.postMessage(null)}}else S=function(){y(O,0)};function I(e){E=e,N||(N=!0,S())}function L(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,L(w,s-a))):(e.sortIndex=i,n(c,e),m||p||(m=!0,I(k))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},896(e,t,n){e.exports=n(733)},278(e,t,n){var r=n(758),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,a=r.useEffect,i=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return i(function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})},[e,n,t]),a(function(){return c(o)&&u({inst:o}),e(function(){c(o)&&u({inst:o})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},49(e,t,n){var r=n(758),o=n(809),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useSyncExternalStore,i=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=i(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=c(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return i=t}return i=e}if(t=i,s(a,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(a=e,t):(a=e,i=n)}var a,i,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,o]);var h=a(e,d[0],d[1]);return l(function(){f.hasValue=!0,f.value=h},[h]),u(h),h}},809(e,t,n){e.exports=n(278)},7(e,t,n){e.exports=n(49)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{BOM:()=>Jd,DOCUMENT:()=>ef,FLOW_END:()=>tf,SCALAR:()=>nf,createScalarToken:()=>Vd,isCollection:()=>rf,isScalar:()=>of,prettyToken:()=>sf,resolveAsScalar:()=>Bd,setScalarValue:()=>Fd,stringify:()=>qd,tokenType:()=>af,visit:()=>Qd});var o={};n.r(o),n.d(o,{Alias:()=>Nc,CST:()=>r,Composer:()=>Rd,Document:()=>dd,Lexer:()=>pf,LineCounter:()=>mf,Pair:()=>ru,Parser:()=>kf,Scalar:()=>_c,Schema:()=>ud,YAMLError:()=>hd,YAMLMap:()=>cu,YAMLParseError:()=>pd,YAMLSeq:()=>du,YAMLWarning:()=>md,isAlias:()=>Zl,isCollection:()=>nc,isDocument:()=>Ql,isMap:()=>Gl,isNode:()=>rc,isPair:()=>Jl,isScalar:()=>ec,isSeq:()=>tc,parse:()=>Cf,parseAllDocuments:()=>Nf,parseDocument:()=>Ef,stringify:()=>_f,visit:()=>lc,visitAsync:()=>uc});var s=n(70),a=n(758),i=n(576);function l(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=l(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var c={value:()=>{}};function u(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new d(r)}function d(e){this._=e}function f(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function h(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=c,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}d.prototype=u.prototype={constructor:d,on:function(e,t){var n,r,o=this._,s=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,i=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<i;)if(n=(e=s[a]).type)o[n]=h(o[n],e.name,t);else if(null==t)for(n in o)o[n]=h(o[n],e.name,null);return this}for(;++a<i;)if((n=(e=s[a]).type)&&(n=f(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new d(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),s=0;s<n;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=0,n=(r=this._[e]).length;s<n;++s)r[s].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};const p=u;function m(){}function g(e){return null==e?m:function(){return this.querySelector(e)}}function y(){return[]}function b(e){return null==e?y:function(){return this.querySelectorAll(e)}}function v(e){return function(){return this.matches(e)}}function x(e){return function(t){return t.matches(e)}}var w=Array.prototype.find;function k(){return this.firstElementChild}var S=Array.prototype.filter;function N(){return Array.from(this.children)}function E(e){return new Array(e.length)}function C(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function _(e,t,n,r,o,s){for(var a,i=0,l=t.length,c=s.length;i<c;++i)(a=t[i])?(a.__data__=s[i],r[i]=a):n[i]=new C(e,s[i]);for(;i<l;++i)(a=t[i])&&(o[i]=a)}function j(e,t,n,r,o,s,a){var i,l,c,u=new Map,d=t.length,f=s.length,h=new Array(d);for(i=0;i<d;++i)(l=t[i])&&(h[i]=c=a.call(l,l.__data__,i,t)+"",u.has(c)?o[i]=l:u.set(c,l));for(i=0;i<f;++i)c=a.call(e,s[i],i,s)+"",(l=u.get(c))?(r[i]=l,l.__data__=s[i],u.delete(c)):n[i]=new C(e,s[i]);for(i=0;i<d;++i)(l=t[i])&&u.get(h[i])===l&&(o[i]=l)}function M(e){return e.__data__}function O(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function P(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}C.prototype={constructor:C,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var A="http://www.w3.org/1999/xhtml";const I={svg:"http://www.w3.org/2000/svg",xhtml:A,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function L(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),I.hasOwnProperty(t)?{space:I[t],local:e}:e}function T(e){return function(){this.removeAttribute(e)}}function $(e){return function(){this.removeAttributeNS(e.space,e.local)}}function z(e,t){return function(){this.setAttribute(e,t)}}function D(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function R(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function B(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function V(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function F(e){return function(){this.style.removeProperty(e)}}function H(e,t,n){return function(){this.style.setProperty(e,t,n)}}function K(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function q(e,t){return e.style.getPropertyValue(t)||V(e).getComputedStyle(e,null).getPropertyValue(t)}function W(e){return function(){delete this[e]}}function U(e,t){return function(){this[e]=t}}function Y(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function X(e){return e.trim().split(/^|\s+/)}function Z(e){return e.classList||new Q(e)}function Q(e){this._node=e,this._names=X(e.getAttribute("class")||"")}function G(e,t){for(var n=Z(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function J(e,t){for(var n=Z(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function ee(e){return function(){G(this,e)}}function te(e){return function(){J(this,e)}}function ne(e,t){return function(){(t.apply(this,arguments)?G:J)(this,e)}}function re(){this.textContent=""}function oe(e){return function(){this.textContent=e}}function se(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ae(){this.innerHTML=""}function ie(e){return function(){this.innerHTML=e}}function le(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ce(){this.nextSibling&&this.parentNode.appendChild(this)}function ue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function de(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===A&&t.documentElement.namespaceURI===A?t.createElement(e):t.createElementNS(n,e)}}function fe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function he(e){var t=L(e);return(t.local?fe:de)(t)}function pe(){return null}function me(){var e=this.parentNode;e&&e.removeChild(this)}function ge(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ye(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function be(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,s=t.length;r<s;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function ve(e,t,n){return function(){var r,o=this.__on,s=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var a=0,i=o.length;a<i;++a)if((r=o[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=t);this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function xe(e,t,n){var r=V(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function we(e,t){return function(){return xe(this,e,t)}}function ke(e,t){return function(){return xe(this,e,t.apply(this,arguments))}}Q.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Se=[null];function Ne(e,t){this._groups=e,this._parents=t}function Ee(){return new Ne([[document.documentElement]],Se)}Ne.prototype=Ee.prototype={constructor:Ne,select:function(e){"function"!=typeof e&&(e=g(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s,a,i=t[o],l=i.length,c=r[o]=new Array(l),u=0;u<l;++u)(s=i[u])&&(a=e.call(s,s.__data__,u,i))&&("__data__"in s&&(a.__data__=s.__data__),c[u]=a);return new Ne(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):b(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var a,i=t[s],l=i.length,c=0;c<l;++c)(a=i[c])&&(r.push(e.call(a,a.__data__,c,i)),o.push(a));return new Ne(r,o)},selectChild:function(e){return this.select(null==e?k:function(e){return function(){return w.call(this.children,e)}}("function"==typeof e?e:x(e)))},selectChildren:function(e){return this.selectAll(null==e?N:function(e){return function(){return S.call(this.children,e)}}("function"==typeof e?e:x(e)))},filter:function(e){"function"!=typeof e&&(e=v(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s,a=t[o],i=a.length,l=r[o]=[],c=0;c<i;++c)(s=a[c])&&e.call(s,s.__data__,c,a)&&l.push(s);return new Ne(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,M);var n,r=t?j:_,o=this._parents,s=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=s.length,i=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var d=o[u],f=s[u],h=f.length,p=O(e.call(d,d&&d.__data__,u,o)),m=p.length,g=l[u]=new Array(m),y=i[u]=new Array(m);r(d,f,g,y,c[u]=new Array(h),p,t);for(var b,v,x=0,w=0;x<m;++x)if(b=g[x]){for(x>=w&&(w=x+1);!(v=y[w])&&++w<m;);b._next=v||null}}return(i=new Ne(i,o))._enter=l,i._exit=c,i},enter:function(){return new Ne(this._enter||this._groups.map(E),this._parents)},exit:function(){return new Ne(this._exit||this._groups.map(E),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,s=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?s.remove():n(s),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,a=Math.min(o,s),i=new Array(o),l=0;l<a;++l)for(var c,u=n[l],d=r[l],f=u.length,h=i[l]=new Array(f),p=0;p<f;++p)(c=u[p]||d[p])&&(h[p]=c);for(;l<o;++l)i[l]=n[l];return new Ne(i,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],s=o.length-1,a=o[s];--s>=0;)(r=o[s])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=P);for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var a,i=n[s],l=i.length,c=o[s]=new Array(l),u=0;u<l;++u)(a=i[u])&&(c[u]=a);c.sort(t)}return new Ne(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,s=t[n],a=0,i=s.length;a<i;++a)(o=s[a])&&e.call(o,o.__data__,a,s);return this},attr:function(e,t){var n=L(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?$:T:"function"==typeof t?n.local?B:R:n.local?D:z)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?F:"function"==typeof t?K:H)(e,t,null==n?"":n)):q(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?W:"function"==typeof t?Y:U)(e,t)):this.node()[e]},classed:function(e,t){var n=X(e+"");if(arguments.length<2){for(var r=Z(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?ne:t?ee:te)(n,t))},text:function(e){return arguments.length?this.each(null==e?re:("function"==typeof e?se:oe)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ae:("function"==typeof e?le:ie)(e)):this.node().innerHTML},raise:function(){return this.each(ce)},lower:function(){return this.each(ue)},append:function(e){var t="function"==typeof e?e:he(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:he(e),r=null==t?pe:"function"==typeof t?t:g(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(me)},clone:function(e){return this.select(e?ye:ge)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,s=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=s.length;if(!(arguments.length<2)){for(i=t?ve:be,r=0;r<a;++r)this.each(i(s[r],t,n));return this}var i=this.node().__on;if(i)for(var l,c=0,u=i.length;c<u;++c)for(r=0,l=i[c];r<a;++r)if((o=s[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?ke:we)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],s=0,a=o.length;s<a;++s)(r=o[s])&&(yield r)}};const Ce=Ee;function _e(e){return"string"==typeof e?new Ne([[document.querySelector(e)]],[document.documentElement]):new Ne([[e]],Se)}function je(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Me={passive:!1},Oe={capture:!0,passive:!1};function Pe(e){e.stopImmediatePropagation()}function Ae(e){e.preventDefault(),e.stopImmediatePropagation()}function Ie(e){var t=e.document.documentElement,n=_e(e).on("dragstart.drag",Ae,Oe);"onselectstart"in t?n.on("selectstart.drag",Ae,Oe):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Le(e,t){var n=e.document.documentElement,r=_e(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ae,Oe),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Te=e=>()=>e;function $e(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:a,y:i,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function ze(e){return!e.ctrlKey&&!e.button}function De(){return this.parentNode}function Re(e,t){return null==t?{x:e.x,y:e.y}:t}function Be(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ve(){var e,t,n,r,o=ze,s=De,a=Re,i=Be,l={},c=p("start","drag","end"),u=0,d=0;function f(e){e.on("mousedown.drag",h).filter(i).on("touchstart.drag",y).on("touchmove.drag",b,Me).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,i){if(!r&&o.call(this,a,i)){var l=x(this,s.call(this,a,i),a,i,"mouse");l&&(_e(a.view).on("mousemove.drag",m,Oe).on("mouseup.drag",g,Oe),Ie(a.view),Pe(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function m(r){if(Ae(r),!n){var o=r.clientX-e,s=r.clientY-t;n=o*o+s*s>d}l.mouse("drag",r)}function g(e){_e(e.view).on("mousemove.drag mouseup.drag",null),Le(e.view,n),Ae(e),l.mouse("end",e)}function y(e,t){if(o.call(this,e,t)){var n,r,a=e.changedTouches,i=s.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=x(this,i,e,t,a[n].identifier,a[n]))&&(Pe(e),r("start",e,a[n]))}}function b(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(Ae(e),n("drag",e,r[t]))}function v(e){var t,n,o=e.changedTouches,s=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<s;++t)(n=l[o[t].identifier])&&(Pe(e),n("end",e,o[t]))}function x(e,t,n,r,o,s){var i,d,h,p=c.copy(),m=je(s||n,t);if(null!=(h=a.call(e,new $e("beforestart",{sourceEvent:n,target:f,identifier:o,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return i=h.x-m[0]||0,d=h.y-m[1]||0,function n(s,a,c){var g,y=m;switch(s){case"start":l[o]=n,g=u++;break;case"end":delete l[o],--u;case"drag":m=je(c||a,t),g=u}p.call(s,e,new $e(s,{sourceEvent:a,subject:h,target:f,identifier:o,active:g,x:m[0]+i,y:m[1]+d,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:Te(!!e),f):o},f.container=function(e){return arguments.length?(s="function"==typeof e?e:Te(e),f):s},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:Te(e),f):a},f.touchable=function(e){return arguments.length?(i="function"==typeof e?e:Te(!!e),f):i},f.on=function(){var e=c.on.apply(c,arguments);return e===c?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function Fe(e){return((e=Math.exp(e))+1/e)/2}$e.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const He=function e(t,n,r){function o(e,o){var s,a,i=e[0],l=e[1],c=e[2],u=o[0],d=o[1],f=o[2],h=u-i,p=d-l,m=h*h+p*p;if(m<1e-12)a=Math.log(f/c)/t,s=function(e){return[i+e*h,l+e*p,c*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(f*f-c*c+r*m)/(2*c*n*g),b=(f*f-c*c-r*m)/(2*f*n*g),v=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(b*b+1)-b);a=(x-v)/t,s=function(e){var r,o=e*a,s=Fe(v),u=c/(n*g)*(s*(r=t*o+v,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[i+u*h,l+u*p,c*s/Fe(t*o+v)]}}return s.duration=1e3*a*t/Math.SQRT2,s}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var Ke,qe,We=0,Ue=0,Ye=0,Xe=0,Ze=0,Qe=0,Ge="object"==typeof performance&&performance.now?performance:Date,Je="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function et(){return Ze||(Je(tt),Ze=Ge.now()+Qe)}function tt(){Ze=0}function nt(){this._call=this._time=this._next=null}function rt(e,t,n){var r=new nt;return r.restart(e,t,n),r}function ot(){Ze=(Xe=Ge.now())+Qe,We=Ue=0;try{!function(){et(),++We;for(var e,t=Ke;t;)(e=Ze-t._time)>=0&&t._call.call(void 0,e),t=t._next;--We}()}finally{We=0,function(){for(var e,t,n=Ke,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ke=t);qe=e,at(r)}(),Ze=0}}function st(){var e=Ge.now(),t=e-Xe;t>1e3&&(Qe-=t,Xe=e)}function at(e){We||(Ue&&(Ue=clearTimeout(Ue)),e-Ze>24?(e<1/0&&(Ue=setTimeout(ot,e-Ge.now()-Qe)),Ye&&(Ye=clearInterval(Ye))):(Ye||(Xe=Ge.now(),Ye=setInterval(st,1e3)),We=1,Je(ot)))}function it(e,t,n){var r=new nt;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}nt.prototype=rt.prototype={constructor:nt,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?et():+n)+(null==t?0:+t),this._next||qe===this||(qe?qe._next=this:Ke=this,qe=this),this._call=e,this._time=n,at()},stop:function(){this._call&&(this._call=null,this._time=1/0,at())}};var lt=p("start","end","cancel","interrupt"),ct=[];function ut(e,t,n,r,o,s){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function s(l){var c,u,d,f;if(1!==n.state)return i();for(c in o)if((f=o[c]).name===n.name){if(3===f.state)return it(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(it(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(i),n.state=5,1),s=-1,a=r.length;++s<a;)r[s].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),i())}function i(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=rt(function(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:lt,tween:ct,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function dt(e,t){var n=ht(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function ft(e,t){var n=ht(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ht(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function pt(e,t){var n,r,o,s=e.__transition,a=!0;if(s){for(o in t=null==t?null:t+"",s)(n=s[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete s[o]):a=!1;a&&delete e.__transition}}function mt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var gt,yt=180/Math.PI,bt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vt(e,t,n,r,o,s){var a,i,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(i=Math.sqrt(n*n+r*r))&&(n/=i,r/=i,l/=i),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*yt,skewX:Math.atan(l)*yt,scaleX:a,scaleY:i}}function xt(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(s,a){var i=[],l=[];return s=e(s),a=e(a),function(e,r,o,s,a,i){if(e!==o||r!==s){var l=a.push("translate(",null,t,null,n);i.push({i:l-4,x:mt(e,o)},{i:l-2,x:mt(r,s)})}else(o||s)&&a.push("translate("+o+t+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,i,l),function(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(o(n)+"rotate(",null,r)-2,x:mt(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(s.rotate,a.rotate,i,l),function(e,t,n,s){e!==t?s.push({i:n.push(o(n)+"skewX(",null,r)-2,x:mt(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(s.skewX,a.skewX,i,l),function(e,t,n,r,s,a){if(e!==n||t!==r){var i=s.push(o(s)+"scale(",null,",",null,")");a.push({i:i-4,x:mt(e,n)},{i:i-2,x:mt(t,r)})}else 1===n&&1===r||s.push(o(s)+"scale("+n+","+r+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,i,l),s=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)i[(t=l[n]).i]=t.x(e);return i.join("")}}}var wt=xt(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bt:vt(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),kt=xt(function(e){return null==e?bt:(gt||(gt=document.createElementNS("http://www.w3.org/2000/svg","g")),gt.setAttribute("transform",e),(e=gt.transform.baseVal.consolidate())?vt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):bt)},", ",")",")");function St(e,t){var n,r;return function(){var o=ft(this,e),s=o.tween;if(s!==n)for(var a=0,i=(r=n=s).length;a<i;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}function Nt(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var s=ft(this,e),a=s.tween;if(a!==r){o=(r=a).slice();for(var i={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=i;break}l===c&&o.push(i)}s.tween=o}}function Et(e,t,n){var r=e._id;return e.each(function(){var e=ft(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return ht(e,r).value[t]}}function Ct(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _t(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function jt(){}var Mt=.7,Ot=1/Mt,Pt="\\s*([+-]?\\d+)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",It="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lt=/^#([0-9a-f]{3,8})$/,Tt=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),$t=new RegExp(`^rgb\\(${It},${It},${It}\\)$`),zt=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${At}\\)$`),Dt=new RegExp(`^rgba\\(${It},${It},${It},${At}\\)$`),Rt=new RegExp(`^hsl\\(${At},${It},${It}\\)$`),Bt=new RegExp(`^hsla\\(${At},${It},${It},${At}\\)$`),Vt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ft(){return this.rgb().formatHex()}function Ht(){return this.rgb().formatRgb()}function Kt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Lt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?qt(t):3===n?new Yt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Wt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Wt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Tt.exec(e))?new Yt(t[1],t[2],t[3],1):(t=$t.exec(e))?new Yt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=zt.exec(e))?Wt(t[1],t[2],t[3],t[4]):(t=Dt.exec(e))?Wt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Rt.exec(e))?en(t[1],t[2]/100,t[3]/100,1):(t=Bt.exec(e))?en(t[1],t[2]/100,t[3]/100,t[4]):Vt.hasOwnProperty(e)?qt(Vt[e]):"transparent"===e?new Yt(NaN,NaN,NaN,0):null}function qt(e){return new Yt(e>>16&255,e>>8&255,255&e,1)}function Wt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Yt(e,t,n,r)}function Ut(e,t,n,r){return 1===arguments.length?((o=e)instanceof jt||(o=Kt(o)),o?new Yt((o=o.rgb()).r,o.g,o.b,o.opacity):new Yt):new Yt(e,t,n,null==r?1:r);var o}function Yt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Xt(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function Zt(){const e=Qt(this.opacity);return`${1===e?"rgb(":"rgba("}${Gt(this.r)}, ${Gt(this.g)}, ${Gt(this.b)}${1===e?")":`, ${e})`}`}function Qt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jt(e){return((e=Gt(e))<16?"0":"")+e.toString(16)}function en(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nn(e,t,n,r)}function tn(e){if(e instanceof nn)return new nn(e.h,e.s,e.l,e.opacity);if(e instanceof jt||(e=Kt(e)),!e)return new nn;if(e instanceof nn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,i=s-o,l=(s+o)/2;return i?(a=t===s?(n-r)/i+6*(n<r):n===s?(r-t)/i+2:(t-n)/i+4,i/=l<.5?s+o:2-s-o,a*=60):i=l>0&&l<1?0:a,new nn(a,i,l,e.opacity)}function nn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function rn(e){return(e=(e||0)%360)<0?e+360:e}function on(e){return Math.max(0,Math.min(1,e||0))}function sn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function an(e,t,n,r,o){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*r+a*o)/6}Ct(jt,Kt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ft,formatHex:Ft,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tn(this).formatHsl()},formatRgb:Ht,toString:Ht}),Ct(Yt,Ut,_t(jt,{brighter(e){return e=null==e?Ot:Math.pow(Ot,e),new Yt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Mt:Math.pow(Mt,e),new Yt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yt(Gt(this.r),Gt(this.g),Gt(this.b),Qt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xt,formatHex:Xt,formatHex8:function(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Zt,toString:Zt})),Ct(nn,function(e,t,n,r){return 1===arguments.length?tn(e):new nn(e,t,n,null==r?1:r)},_t(jt,{brighter(e){return e=null==e?Ot:Math.pow(Ot,e),new nn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Mt:Math.pow(Mt,e),new nn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Yt(sn(e>=240?e-240:e+120,o,r),sn(e,o,r),sn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new nn(rn(this.h),on(this.s),on(this.l),Qt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qt(this.opacity);return`${1===e?"hsl(":"hsla("}${rn(this.h)}, ${100*on(this.s)}%, ${100*on(this.l)}%${1===e?")":`, ${e})`}`}}));const ln=e=>()=>e;function cn(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):ln(isNaN(e)?t:e)}const un=function e(t){var n=function(e){return 1===(e=+e)?cn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ln(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=Ut(e)).r,(t=Ut(t)).r),o=n(e.g,t.g),s=n(e.b,t.b),a=cn(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=s(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function dn(e){return function(t){var n,r,o=t.length,s=new Array(o),a=new Array(o),i=new Array(o);for(n=0;n<o;++n)r=Ut(t[n]),s[n]=r.r||0,a[n]=r.g||0,i[n]=r.b||0;return s=e(s),a=e(a),i=e(i),r.opacity=1,function(e){return r.r=s(e),r.g=a(e),r.b=i(e),r+""}}}dn(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],s=e[r+1],a=r>0?e[r-1]:2*o-s,i=r<t-1?e[r+2]:2*s-o;return an((n-r/t)*t,a,o,s,i)}}),dn(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],s=e[r%t],a=e[(r+1)%t],i=e[(r+2)%t];return an((n-r/t)*t,o,s,a,i)}});var fn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hn=new RegExp(fn.source,"g");function pn(e,t){var n,r,o,s=fn.lastIndex=hn.lastIndex=0,a=-1,i=[],l=[];for(e+="",t+="";(n=fn.exec(e))&&(r=hn.exec(t));)(o=r.index)>s&&(o=t.slice(s,o),i[a]?i[a]+=o:i[++a]=o),(n=n[0])===(r=r[0])?i[a]?i[a]+=r:i[++a]=r:(i[++a]=null,l.push({i:a,x:mt(n,r)})),s=hn.lastIndex;return s<t.length&&(o=t.slice(s),i[a]?i[a]+=o:i[++a]=o),i.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)i[(n=l[r]).i]=n.x(e);return i.join("")})}function mn(e,t){var n;return("number"==typeof t?mt:t instanceof Kt?un:(n=Kt(t))?(t=n,un):pn)(e,t)}function gn(e){return function(){this.removeAttribute(e)}}function yn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bn(e,t,n){var r,o,s=n+"";return function(){var a=this.getAttribute(e);return a===s?null:a===r?o:o=t(r=a,n)}}function vn(e,t,n){var r,o,s=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===s?null:a===r?o:o=t(r=a,n)}}function xn(e,t,n){var r,o,s;return function(){var a,i,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(i=l+"")?null:a===r&&i===o?s:(o=i,s=t(r=a,l));this.removeAttribute(e)}}function wn(e,t,n){var r,o,s;return function(){var a,i,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(i=l+"")?null:a===r&&i===o?s:(o=i,s=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function kn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Sn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Nn(e,t){return function(){dt(this,e).delay=+t.apply(this,arguments)}}function En(e,t){return t=+t,function(){dt(this,e).delay=t}}function Cn(e,t){return function(){ft(this,e).duration=+t.apply(this,arguments)}}function _n(e,t){return t=+t,function(){ft(this,e).duration=t}}var jn=Ce.prototype.constructor;function Mn(e){return function(){this.style.removeProperty(e)}}var On=0;function Pn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function An(){return++On}var In=Ce.prototype;Pn.prototype=function(e){return Ce().transition(e)}.prototype={constructor:Pn,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=g(e));for(var r=this._groups,o=r.length,s=new Array(o),a=0;a<o;++a)for(var i,l,c=r[a],u=c.length,d=s[a]=new Array(u),f=0;f<u;++f)(i=c[f])&&(l=e.call(i,i.__data__,f,c))&&("__data__"in i&&(l.__data__=i.__data__),d[f]=l,ut(d[f],t,n,f,d,ht(i,n)));return new Pn(s,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=b(e));for(var r=this._groups,o=r.length,s=[],a=[],i=0;i<o;++i)for(var l,c=r[i],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var f,h=e.call(l,l.__data__,d,c),p=ht(l,n),m=0,g=h.length;m<g;++m)(f=h[m])&&ut(f,t,n,m,h,p);s.push(h),a.push(l)}return new Pn(s,a,t,n)},selectChild:In.selectChild,selectChildren:In.selectChildren,filter:function(e){"function"!=typeof e&&(e=v(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s,a=t[o],i=a.length,l=r[o]=[],c=0;c<i;++c)(s=a[c])&&e.call(s,s.__data__,c,a)&&l.push(s);return new Pn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),a=new Array(r),i=0;i<s;++i)for(var l,c=t[i],u=n[i],d=c.length,f=a[i]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(f[h]=l);for(;i<r;++i)a[i]=t[i];return new Pn(a,this._parents,this._name,this._id)},selection:function(){return new jn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=An(),r=this._groups,o=r.length,s=0;s<o;++s)for(var a,i=r[s],l=i.length,c=0;c<l;++c)if(a=i[c]){var u=ht(a,t);ut(a,e,n,c,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Pn(r,this._parents,e,n)},call:In.call,nodes:In.nodes,node:In.node,size:In.size,empty:In.empty,each:In.each,on:function(e,t){var n=this._id;return arguments.length<2?ht(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,s=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?dt:ft;return function(){var a=s(this,e),i=a.on;i!==r&&(o=(r=i).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=L(e),r="transform"===n?kt:mn;return this.attrTween(e,"function"==typeof t?(n.local?wn:xn)(n,r,Et(this,"attr."+e,t)):null==t?(n.local?yn:gn)(n):(n.local?vn:bn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=L(e);return this.tween(n,(r.local?kn:Sn)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?wt:mn;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var s=q(this,e),a=(this.style.removeProperty(e),q(this,e));return s===a?null:s===n&&a===r?o:o=t(n=s,r=a)}}(e,r)).on("end.style."+e,Mn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,s;return function(){var a=q(this,e),i=n(this),l=i+"";return null==i&&(this.style.removeProperty(e),l=i=q(this,e)),a===l?null:a===r&&l===o?s:(o=l,s=t(r=a,i))}}(e,r,Et(this,"style."+e,t))).each(function(e,t){var n,r,o,s,a="style."+t,i="end."+a;return function(){var l=ft(this,e),c=l.on,u=null==l.value[a]?s||(s=Mn(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(i,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,s=n+"";return function(){var a=q(this,e);return a===s?null:a===r?o:o=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function s(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,s,n)),r}return s._value=t,s}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Et(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=ht(this.node(),n).tween,s=0,a=o.length;s<a;++s)if((r=o[s]).name===e)return r.value;return null}return this.each((null==t?St:Nt)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Nn:En)(t,e)):ht(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Cn:_n)(t,e)):ht(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){ft(this,e).ease=t}}(t,e)):ht(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;ft(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,a){var i={value:a},l={value:function(){0===--o&&s()}};n.each(function(){var n=ft(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(i),t._.interrupt.push(i),t._.end.push(l)),n.on=t}),0===o&&s()})},[Symbol.iterator]:In[Symbol.iterator]};var Ln={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Tn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Ce.prototype.interrupt=function(e){return this.each(function(){pt(this,e)})},Ce.prototype.transition=function(e){var t,n;e instanceof Pn?(t=e._id,e=e._name):(t=An(),(n=Ln).time=et(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var a,i=r[s],l=i.length,c=0;c<l;++c)(a=i[c])&&ut(a,e,t,c,i,n||Tn(a,t));return new Pn(r,this._parents,e,t)};const $n=e=>()=>e;function zn(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Dn(e,t,n){this.k=e,this.x=t,this.y=n}Dn.prototype={constructor:Dn,scale:function(e){return 1===e?this:new Dn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Dn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rn=new Dn(1,0,0);function Bn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Rn;return e.__zoom}function Vn(e){e.stopImmediatePropagation()}function Fn(e){e.preventDefault(),e.stopImmediatePropagation()}function Hn(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Kn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function qn(){return this.__zoom||Rn}function Wn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Un(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yn(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function Xn(){var e,t,n,r=Hn,o=Kn,s=Yn,a=Wn,i=Un,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=He,f=p("start","zoom","end"),h=0,m=10;function g(e){e.property("__zoom",qn).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",E).filter(i).on("touchstart.zoom",C).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Dn(t,e.x,e.y)}function b(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Dn(e.k,r,o)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,r){e.on("start.zoom",function(){w(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,s=arguments,a=w(e,s).event(r),i=o.apply(e,s),l=null==n?v(i):"function"==typeof n?n.apply(e,s):n,c=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),u=e.__zoom,f="function"==typeof t?t.apply(e,s):t,h=d(u.invert(l).concat(c/u.k),f.invert(l).concat(c/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=c/t[2];e=new Dn(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}})}function w(e,t,n){return!n&&e.__zooming||new k(e,t)}function k(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function S(e,...t){if(r.apply(this,arguments)){var n=w(this,t).event(e),o=this.__zoom,i=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,a.apply(this,arguments)))),u=je(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=o.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(o.k===i)return;n.mouse=[u,o.invert(u)],pt(this),n.start()}Fn(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",s(b(y(o,i),n.mouse[0],n.mouse[1]),n.extent,c))}}function N(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,a=w(this,t,!0).event(e),i=_e(e.view).on("mousemove.zoom",function(e){if(Fn(e),!a.moved){var t=e.clientX-u,n=e.clientY-d;a.moved=t*t+n*n>h}a.event(e).zoom("mouse",s(b(a.that.__zoom,a.mouse[0]=je(e,o),a.mouse[1]),a.extent,c))},!0).on("mouseup.zoom",function(e){i.on("mousemove.zoom mouseup.zoom",null),Le(e.view,a.moved),Fn(e),a.event(e).end()},!0),l=je(e,o),u=e.clientX,d=e.clientY;Ie(e.view),Vn(e),a.mouse=[l,this.__zoom.invert(l)],pt(this),a.start()}}function E(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,a=je(e.changedTouches?e.changedTouches[0]:e,this),i=n.invert(a),l=n.k*(e.shiftKey?.5:2),d=s(b(y(n,l),a,i),o.apply(this,t),c);Fn(e),u>0?_e(this).transition().duration(u).call(x,d,a,e):_e(this).call(g.transform,d,a,e)}}function C(n,...o){if(r.apply(this,arguments)){var s,a,i,l,c=n.touches,u=c.length,d=w(this,o,n.changedTouches.length===u).event(n);for(Vn(n),a=0;a<u;++a)l=[l=je(i=c[a],this),this.__zoom.invert(l),i.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,s=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(d.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),pt(this),d.start())}}function _(e,...t){if(this.__zooming){var n,r,o,a,i=w(this,t).event(e),l=e.changedTouches,u=l.length;for(Fn(e),n=0;n<u;++n)o=je(r=l[n],this),i.touch0&&i.touch0[2]===r.identifier?i.touch0[0]=o:i.touch1&&i.touch1[2]===r.identifier&&(i.touch1[0]=o);if(r=i.that.__zoom,i.touch1){var d=i.touch0[0],f=i.touch0[1],h=i.touch1[0],p=i.touch1[1],m=(m=h[0]-d[0])*m+(m=h[1]-d[1])*m,g=(g=p[0]-f[0])*g+(g=p[1]-f[1])*g;r=y(r,Math.sqrt(m/g)),o=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!i.touch0)return;o=i.touch0[0],a=i.touch0[1]}i.zoom("touch",s(b(r,o,a),i.extent,c))}}function j(e,...r){if(this.__zooming){var o,s,a=w(this,r).event(e),i=e.changedTouches,l=i.length;for(Vn(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<l;++o)s=i[o],a.touch0&&a.touch0[2]===s.identifier?delete a.touch0:a.touch1&&a.touch1[2]===s.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(s=je(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<m)){var c=_e(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",qn),e!==o?x(e,t,n,r):o.interrupt().each(function(){w(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},g.scaleBy=function(e,t,n,r){g.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,i=r.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return s(b(y(r,l),a,i),e,c)},n,r)},g.translateBy=function(e,t,n,r){g.transform(e,function(){return s(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)},null,r)},g.translateTo=function(e,t,n,r,a){g.transform(e,function(){var e=o.apply(this,arguments),a=this.__zoom,i=null==r?v(e):"function"==typeof r?r.apply(this,arguments):r;return s(Rn.translate(i[0],i[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},r,a)},k.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=_e(this.that).datum();f.call(e,this.that,new zn(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:f}),t)}},g.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:$n(+e),g):a},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:$n(!!e),g):r},g.touchable=function(e){return arguments.length?(i="function"==typeof e?e:$n(!!e),g):i},g.extent=function(e){return arguments.length?(o="function"==typeof e?e:$n([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(s=e,g):s},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=f.on.apply(f,arguments);return e===f?g:e},g.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,g):Math.sqrt(h)},g.tapDistance=function(e){return arguments.length?(m=+e,g):m},g}function Zn(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,s=new Array(o),a=new Array(r);for(n=0;n<o;++n)s[n]=er(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=s[n](e);return a}}function Qn(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Gn(e,t){var n,r={},o={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=er(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}function Jn(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(s){for(n=0;n<r;++n)o[n]=e[n]*(1-s)+t[n]*s;return o}}function er(e,t){var n,r,o=typeof t;return null==t||"boolean"===o?ln(t):("number"===o?mt:"string"===o?(n=Kt(t))?(t=n,un):pn:t instanceof Kt?un:t instanceof Date?Qn:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Zn:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Gn:mt:Jn))(e,t)}Bn.prototype=Dn.prototype;const tr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nr=["Enter"," ","Escape"],rr={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var or,sr,ar;!function(e){e.Strict="strict",e.Loose="loose"}(or||(or={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(sr||(sr={})),function(e){e.Partial="partial",e.Full="full"}(ar||(ar={}));const ir={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var lr,cr,ur;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(lr||(lr={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(cr||(cr={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(ur||(ur={}));const dr={[ur.Left]:ur.Right,[ur.Right]:ur.Left,[ur.Top]:ur.Bottom,[ur.Bottom]:ur.Top};function fr(e){return null===e?null:e?"valid":"invalid"}const hr=e=>"id"in e&&"source"in e&&"target"in e,pr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),mr=(e,t=[0,0])=>{const{width:n,height:r}=Vr(e),o=e.origin??t,s=n*o[0],a=r*o[1];return{x:e.position.x-s,y:e.position.y-a}},gr=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(e=>{(void 0===t.filter||t.filter(e))&&(n=Nr(n,jr(e)),r=!0)}),r?Cr(n):{x:0,y:0,width:0,height:0}},yr=(e,t,[n,r,o]=[0,0,1],s=!1,a=!1)=>{const i={...Tr(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(const t of e.values()){const{measured:e,selectable:n=!0,hidden:r=!1}=t;if(a&&!n||r)continue;const o=e.width??t.width??t.initialWidth??null,c=e.height??t.height??t.initialHeight??null,u=Or(i,_r(t)),d=(o??0)*(c??0),f=s&&u>0;(!t.internals.handleBounds||f||u>=d||t.dragging)&&l.push(t)}return l};function br({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:s}){const a=n.get(e),i=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=i?i.internals.positionAbsolute:{x:0,y:0},u=a.origin??r;let d=a.extent||o;if("parent"!==a.extent||a.expandParent)i&&Br(a.extent)&&(d=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);else if(i){const e=i.measured.width,t=i.measured.height;e&&t&&(d=[[l,c],[l+e,c+t]])}else s?.("005","Only child nodes can use a parent extent.");const f=Br(d)?xr(t,d,a.measured):t;return void 0!==a.measured.width&&void 0!==a.measured.height||s?.("015","It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."),{position:{x:f.x-l+(a.measured.width??0)*u[0],y:f.y-c+(a.measured.height??0)*u[1]},positionAbsolute:f}}const vr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),xr=(e={x:0,y:0},t,n)=>({x:vr(e.x,t[0][0],t[1][0]-(n?.width??0)),y:vr(e.y,t[0][1],t[1][1]-(n?.height??0))});function wr(e,t,n){const{width:r,height:o}=Vr(n),{x:s,y:a}=n.internals.positionAbsolute;return xr(e,[[s,a],[s+r,a+o]],t)}const kr=(e,t,n)=>e<t?vr(Math.abs(e-t),1,t)/t:e>n?-vr(Math.abs(e-n),1,t)/t:0,Sr=(e,t,n=15,r=40)=>[kr(e.x,r,t.width-r)*n,kr(e.y,r,t.height-r)*n],Nr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Er=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Cr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),_r=(e,t=[0,0])=>{const{x:n,y:r}=pr(e)?e.internals.positionAbsolute:mr(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},jr=(e,t=[0,0])=>{const{x:n,y:r}=pr(e)?e.internals.positionAbsolute:mr(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},Mr=(e,t)=>Cr(Nr(Er(e),Er(t))),Or=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Pr=e=>Ar(e.width)&&Ar(e.height)&&Ar(e.x)&&Ar(e.y),Ar=e=>!isNaN(e)&&isFinite(e),Ir=(e,t)=>{},Lr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Tr=({x:e,y:t},[n,r,o],s=!1,a=[1,1])=>{const i={x:(e-n)/o,y:(t-r)/o};return s?Lr(i,a):i},$r=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function zr(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const Dr=(e,t,n,r,o,s)=>{const a=function(e,t,n){if("string"==typeof e||"number"==typeof e){const r=zr(e,n),o=zr(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){const r=zr(e.top??e.y??0,n),o=zr(e.bottom??e.y??0,n),s=zr(e.left??e.x??0,t),a=zr(e.right??e.x??0,t);return{top:r,right:a,bottom:o,left:s,x:s+a,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(s,t,n),i=(t-a.x)/e.width,l=(n-a.y)/e.height,c=Math.min(i,l),u=vr(c,r,o),d=t/2-(e.x+e.width/2)*u,f=n/2-(e.y+e.height/2)*u,h=function(e,t,n,r,o,s){const{x:a,y:i}=$r(e,[t,n,r]),{x:l,y:c}=$r({x:e.x+e.width,y:e.y+e.height},[t,n,r]),u=o-l,d=s-c;return{left:Math.floor(a),top:Math.floor(i),right:Math.floor(u),bottom:Math.floor(d)}}(e,d,f,u,t,n),p=Math.min(h.left-a.left,0),m=Math.min(h.top-a.top,0);return{x:d-p+Math.min(h.right-a.right,0),y:f-m+Math.min(h.bottom-a.bottom,0),zoom:u}},Rr=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function Br(e){return null!=e&&"parent"!==e}function Vr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Fr(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function Hr(e,t={width:0,height:0},n,r,o){const s={...e},a=r.get(n);if(a){const e=a.origin||o;s.x+=a.internals.positionAbsolute.x-(t.width??0)*e[0],s.y+=a.internals.positionAbsolute.y-(t.height??0)*e[1]}return s}function Kr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function qr(e){return{...rr,...e||{}}}function Wr(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:s,y:a}=Gr(e),i=Tr({x:s-(o?.left??0),y:a-(o?.top??0)},r),{x:l,y:c}=n?Lr(i,t):i;return{xSnapped:l,ySnapped:c,...i}}const Ur=e=>({width:e.offsetWidth,height:e.offsetHeight}),Yr=e=>e?.getRootNode?.()||window?.document,Xr=["INPUT","SELECT","TEXTAREA"];function Zr(e){const t=e.composedPath?.()?.[0]||e.target;return 1===t?.nodeType&&(Xr.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}const Qr=e=>"clientX"in e,Gr=(e,t)=>{const n=Qr(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},Jr=(e,t,n,r,o)=>{const s=t.querySelectorAll(`.${e}`);return s&&s.length?Array.from(s).map(t=>{const s=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...Ur(t)}}):null};function eo({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:a,targetControlY:i}){const l=.125*e+.375*o+.375*a+.125*n,c=.125*t+.375*s+.375*i+.125*r;return[l,c,Math.abs(l-e),Math.abs(c-t)]}function to(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function no({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case ur.Left:return[t-to(t-r,s),n];case ur.Right:return[t+to(r-t,s),n];case ur.Top:return[t,n-to(n-o,s)];case ur.Bottom:return[t,n+to(o-n,s)]}}function ro({sourceX:e,sourceY:t,sourcePosition:n=ur.Bottom,targetX:r,targetY:o,targetPosition:s=ur.Top,curvature:a=.25}){const[i,l]=no({pos:n,x1:e,y1:t,x2:r,y2:o,c:a}),[c,u]=no({pos:s,x1:r,y1:o,x2:e,y2:t,c:a}),[d,f,h,p]=eo({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${r},${o}`,d,f,h,p]}function oo({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,a=Math.abs(r-t)/2;return[s,r<t?r+a:r-a,o,a]}function so({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const s=Nr(jr(e),jr(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const a={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return Or(a,Cr(s))>0}const ao=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`;function io({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,a,i]=oo({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,a,i]}const lo={[ur.Left]:{x:-1,y:0},[ur.Right]:{x:1,y:0},[ur.Top]:{x:0,y:-1},[ur.Bottom]:{x:0,y:1}},co=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function uo({sourceX:e,sourceY:t,sourcePosition:n=ur.Bottom,targetX:r,targetY:o,targetPosition:s=ur.Top,borderRadius:a=5,centerX:i,centerY:l,offset:c=20,stepPosition:u=.5}){const[d,f,h,p,m]=function({source:e,sourcePosition:t=ur.Bottom,target:n,targetPosition:r=ur.Top,center:o,offset:s,stepPosition:a}){const i=lo[t],l=lo[r],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+l.x*s,y:n.y+l.y*s},d=(({source:e,sourcePosition:t=ur.Bottom,target:n})=>t===ur.Left||t===ur.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:c,sourcePosition:t,target:u}),f=0!==d.x?"x":"y",h=d[f];let p,m,g=[];const y={x:0,y:0},b={x:0,y:0},[,,v,x]=oo({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){"x"===f?(p=o.x??c.x+(u.x-c.x)*a,m=o.y??(c.y+u.y)/2):(p=o.x??(c.x+u.x)/2,m=o.y??c.y+(u.y-c.y)*a);const e=[{x:p,y:c.y},{x:p,y:u.y}],t=[{x:c.x,y:m},{x:u.x,y:m}];g=i[f]===h?"x"===f?e:t:"x"===f?t:e}else{const o=[{x:c.x,y:u.y}],a=[{x:u.x,y:c.y}];if(g="x"===f?i.x===h?a:o:i.y===h?o:a,t===r){const t=Math.abs(e[f]-n[f]);if(t<=s){const r=Math.min(s-1,s-t);i[f]===h?y[f]=(c[f]>e[f]?-1:1)*r:b[f]=(u[f]>n[f]?-1:1)*r}}if(t!==r){const e="x"===f?"y":"x",t=i[f]===l[e],n=c[e]>u[e],r=c[e]<u[e];(1===i[f]&&(!t&&n||t&&r)||1!==i[f]&&(!t&&r||t&&n))&&(g="x"===f?o:a)}const d={x:c.x+y.x,y:c.y+y.y},v={x:u.x+b.x,y:u.y+b.y};Math.max(Math.abs(d.x-g[0].x),Math.abs(v.x-g[0].x))>=Math.max(Math.abs(d.y-g[0].y),Math.abs(v.y-g[0].y))?(p=(d.x+v.x)/2,m=g[0].y):(p=g[0].x,m=(d.y+v.y)/2)}return[[e,{x:c.x+y.x,y:c.y+y.y},...g,{x:u.x+b.x,y:u.y+b.y},n],p,m,v,x]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:i,y:l},offset:c,stepPosition:u});return[d.reduce((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const o=Math.min(co(e,t)/2,co(t,n)/2,r),{x:s,y:a}=t;if(e.x===s&&s===n.x||e.y===a&&a===n.y)return`L${s} ${a}`;if(e.y===a)return`L ${s+o*(e.x<n.x?-1:1)},${a}Q ${s},${a} ${s},${a+o*(e.y<n.y?1:-1)}`;const i=e.x<n.x?1:-1;return`L ${s},${a+o*(e.y<n.y?-1:1)}Q ${s},${a} ${s+o*i},${a}`}(d[n-1],t,d[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+r},""),f,h,p,m]}function fo(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function ho(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function po(e,t,n=ur.Left,r=!1){const o=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:i}=t??Vr(e);if(r)return{x:o+a/2,y:s+i/2};switch(t?.position??n){case ur.Top:return{x:o+a/2,y:s};case ur.Right:return{x:o+a,y:s+i/2};case ur.Bottom:return{x:o+a/2,y:s+i};case ur.Left:return{x:o,y:s+i/2}}}function mo(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function go(e,t){return e?"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`:""}const yo={nodeOrigin:[0,0],nodeExtent:tr,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},bo={...yo,checkEquality:!0};function vo(e,t){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function xo(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const t of e.handles){const o={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(o):"target"===t.type&&r.push(o)}return{source:n,target:r}}function wo(e){return"manual"===e}function ko(e,t,n,r={}){const o=vo(bo,r),s={i:0},a=new Map(t),i=o?.elevateNodesOnSelect&&!wo(o.zIndexMode)?1e3:0;let l=e.length>0;t.clear(),n.clear();for(const c of e){let e=a.get(c.id);if(o.checkEquality&&c===e?.internals.userNode)t.set(c.id,e);else{const n=mr(c,o.nodeOrigin),r=Br(c.extent)?c.extent:o.nodeExtent,s=xr(n,r,Vr(c));e={...o.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:s,handleBounds:xo(c,e),z:No(c,i,o.zIndexMode),userNode:c}},t.set(c.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(l=!1),c.parentId&&So(e,t,n,r,s)}return l}function So(e,t,n,r,o){const{elevateNodesOnSelect:s,nodeOrigin:a,nodeExtent:i,zIndexMode:l}=vo(yo,r),c=e.parentId,u=t.get(c);if(!u)return void console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n),o&&!u.parentId&&void 0===u.internals.rootParentIndex&&"auto"===l&&(u.internals.rootParentIndex=++o.i,u.internals.z=u.internals.z+10*o.i),o&&void 0!==u.internals.rootParentIndex&&(o.i=u.internals.rootParentIndex);const d=s&&!wo(l)?1e3:0,{x:f,y:h,z:p}=function(e,t,n,r,o,s){const{x:a,y:i}=t.internals.positionAbsolute,l=Vr(e),c=mr(e,n),u=Br(e.extent)?xr(c,e.extent,l):c;let d=xr({x:a+u.x,y:i+u.y},r,l);"parent"===e.extent&&(d=wr(d,l,t));const f=No(e,o,s),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>=f?h+1:f}}(e,u,a,i,d,l),{positionAbsolute:m}=e.internals,g=f!==m.x||h!==m.y;(g||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:f,y:h}:m,z:p}})}function No(e,t,n){const r=Ar(e.zIndex)?e.zIndex:0;return wo(n)?r:r+(e.selected?t:0)}function Eo(e,t,n,r=[0,0]){const o=[],s=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const r=s.get(n.parentId)?.expandedRect??_r(e),o=Mr(r,n.rect);s.set(n.parentId,{expandedRect:o,parent:e})}return s.size>0&&s.forEach(({expandedRect:t,parent:s},a)=>{const i=s.internals.positionAbsolute,l=Vr(s),c=s.origin??r,u=t.x<i.x?Math.round(Math.abs(i.x-t.x)):0,d=t.y<i.y?Math.round(Math.abs(i.y-t.y)):0,f=Math.max(l.width,Math.round(t.width)),h=Math.max(l.height,Math.round(t.height)),p=(f-l.width)*c[0],m=(h-l.height)*c[1];(u>0||d>0||p||m)&&(o.push({id:a,type:"position",position:{x:s.position.x-u+p,y:s.position.y-d+m}}),n.get(a)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+u,y:t.position.y+d}})})),(l.width<t.width||l.height<t.height||u||d)&&o.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:f+(u?c[0]*u-p:0),height:h+(d?c[1]*d-m:0)}})}),o}function Co(e,t,n,r,o,s){let a=o;const i=r.get(a)||new Map;r.set(a,i.set(n,t)),a=`${o}-${e}`;const l=r.get(a)||new Map;if(r.set(a,l.set(n,t)),s){a=`${o}-${e}-${s}`;const i=r.get(a)||new Map;r.set(a,i.set(n,t))}}function _o(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:o,sourceHandle:s=null,targetHandle:a=null}=r,i={edgeId:r.id,source:n,target:o,sourceHandle:s,targetHandle:a},l=`${n}-${s}--${o}-${a}`;Co("source",i,`${o}-${a}--${n}-${s}`,e,n,s),Co("target",i,l,e,o,a),t.set(r.id,r)}}function jo(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||jo(n,t))}function Mo(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Oo({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const o=[];for(const[e,s]of t){const t=n.get(e)?.internals.userNode;t&&o.push({...t,position:s.position,dragging:r})}if(!e)return[o[0],o];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:o[0],o]}function Po(e,t,n,r,o,s=!1){const a=r.get(e);if(!a)return null;const i="strict"===o?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],l=(n?i?.find(e=>e.id===n):i?.[0])??null;return l&&s?{...l,...po(a,l,l.position,!0)}:l}function Ao(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const Io=()=>!0;function Lo(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:s,doc:a,lib:i,flowId:l,isValidConnection:c=Io,nodeLookup:u}){const d="target"===s,f=t?a.querySelector(`.${i}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:p}=Gr(e),m=a.elementFromPoint(h,p),g=m?.classList.contains(`${i}-flow__handle`)?m:f,y={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){const e=Ao(void 0,g),t=g.getAttribute("data-nodeid"),s=g.getAttribute("data-handleid"),a=g.classList.contains("connectable"),i=g.classList.contains("connectableend");if(!t||!e)return y;const l={source:d?t:r,sourceHandle:d?s:o,target:d?r:t,targetHandle:d?o:s};y.connection=l;const f=a&&i&&(n===or.Strict?d&&"source"===e||!d&&"target"===e:t!==r||s!==o);y.isValid=f&&c(l),y.toHandle=Po(t,e,s,u,n,!0)}return y}const To={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:s,isTarget:a,domNode:i,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:m,onConnectEnd:g,isValidConnection:y=Io,onReconnectEnd:b,updateConnection:v,getTransform:x,getFromHandle:w,autoPanSpeed:k,dragThreshold:S=1,handleDomNode:N}){const E=Yr(e.target);let C,_=0;const{x:j,y:M}=Gr(e),O=Ao(s,N),P=i?.getBoundingClientRect();let A=!1;if(!P||!O)return;const I=Po(o,O,r,l,t);if(!I)return;let L=Gr(e,P),T=!1,$=null,z=!1,D=null;function R(){if(!u||!P)return;const[e,t]=Sr(L,P,k);f({x:e,y:t}),_=requestAnimationFrame(R)}const B={...I,nodeId:o,type:O,position:I.position},V=l.get(o);let F={inProgress:!0,isValid:null,from:po(V,B,ur.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:V,to:L,toHandle:null,toPosition:dr[B.position],toNode:null,pointer:L};function H(){A=!0,v(F),p?.(e,{nodeId:o,handleId:r,handleType:O})}function K(e){if(!A){const{x:t,y:n}=Gr(e),r=t-j,o=n-M;if(!(r*r+o*o>S*S))return;H()}if(!w()||!B)return void q(e);const s=x();L=Gr(e,P),C=function(e,t,n,r){let o=[],s=1/0;const a=function(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())Or(o,_r(e))>0&&r.push(e);return r}(e,n,t+250);for(const n of a){const a=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const i of a){if(r.nodeId===i.nodeId&&r.type===i.type&&r.id===i.id)continue;const{x:a,y:l}=po(n,i,i.position,!0),c=Math.sqrt(Math.pow(a-e.x,2)+Math.pow(l-e.y,2));c>t||(c<s?(o=[{...i,x:a,y:l}],s=c):c===s&&o.push({...i,x:a,y:l}))}}if(!o.length)return null;if(o.length>1){const e="source"===r.type?"target":"source";return o.find(t=>t.type===e)??o[0]}return o[0]}(Tr(L,s,!1,[1,1]),n,l,B),T||(R(),T=!0);const i=Lo(e,{handle:C,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:a?"target":"source",isValidConnection:y,doc:E,lib:c,flowId:d,nodeLookup:l});D=i.handleDomNode,$=i.connection,z=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!C,i.isValid);const u=l.get(o),f=u?po(u,B,ur.Left,!0):F.from,h={...F,from:f,isValid:z,to:i.toHandle&&z?$r({x:i.toHandle.x,y:i.toHandle.y},s):L,toHandle:i.toHandle,toPosition:z&&i.toHandle?i.toHandle.position:dr[B.position],toNode:i.toHandle?l.get(i.toHandle.nodeId):null,pointer:L};v(h),F=h}function q(e){if(!("touches"in e&&e.touches.length>0)){if(A){(C||D)&&$&&z&&m?.($);const{inProgress:t,...n}=F,r={...n,toPosition:F.toHandle?F.toPosition:null};g?.(e,r),s&&b?.(e,r)}h(),cancelAnimationFrame(_),T=!1,z=!1,$=null,D=null,E.removeEventListener("mousemove",K),E.removeEventListener("mouseup",q),E.removeEventListener("touchmove",K),E.removeEventListener("touchend",q)}}0===S&&H(),E.addEventListener("mousemove",K),E.addEventListener("mouseup",q),E.addEventListener("touchmove",K),E.addEventListener("touchend",q)},isValid:Lo},$o=e=>({x:e.x,y:e.y,zoom:e.k}),zo=({x:e,y:t,zoom:n})=>Rn.translate(e,t).scale(n),Do=(e,t)=>e.target.closest(`.${t}`),Ro=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Bo=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Vo=(e,t=0,n=Bo,r=()=>{})=>{const o="number"==typeof t&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},Fo=e=>{const t=e.ctrlKey&&Rr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function Ho({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:i,onDraggingChange:l}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),d=Xn().scaleExtent([t,n]).translateExtent(r),f=_e(e).call(d);y({x:o.x,y:o.y,zoom:vr(o.zoom,t,n)},[[0,0],[u.width,u.height]],r);const h=f.on("wheel.zoom"),p=f.on("dblclick.zoom");function m(e,t){return f?new Promise(n=>{d?.interpolate("linear"===t?.interpolate?er:He).transform(Vo(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function g(){d.on("zoom",null)}async function y(e,t,n){const r=zo(e),o=d?.constrain()(r,t,n);return o&&await m(o),new Promise(e=>e(o))}return d.wheelDelta(Fo),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:u,panOnScrollMode:m,panOnScrollSpeed:y,preventScrolling:b,zoomOnPinch:v,zoomOnScroll:x,zoomOnDoubleClick:w,zoomActivationKeyPressed:k,lib:S,onTransformChange:N,connectionInProgress:E,paneClickDistance:C,selectionOnDrag:_}){r&&!c.isZoomingOrPanning&&g();const j=o&&!k&&!r;d.clickDistance(_?1/0:!Ar(C)||C<0?0:C);const M=j?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:a,onPanZoomStart:i,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Do(u,t))return u.ctrlKey&&u.preventDefault(),!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&a){const e=je(u),t=Fo(u),o=d*Math.pow(2,t);return void r.scaleTo(n,o,e,u)}const f=1===u.deltaMode?20:1;let h=o===sr.Vertical?0:u.deltaX*f,p=o===sr.Horizontal?0:u.deltaY*f;!Rr()&&u.shiftKey&&o!==sr.Vertical&&(h=u.deltaY*f,p=0),r.translateBy(n,-h/d*s,-p/d*s,{internal:!0});const m=$o(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l?.(u,m),e.panScrollTimeout=setTimeout(()=>{c?.(u,m),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,i?.(u,m))}}({zoomPanValues:c,noWheelClassName:e,d3Selection:f,d3Zoom:d,panOnScrollMode:m,panOnScrollSpeed:y,zoomOnPinch:v,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:i}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const s="wheel"===r.type,a=!t&&s&&!r.ctrlKey,i=Do(r,e);if(r.ctrlKey&&s&&i&&r.preventDefault(),a||i)return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:b,d3ZoomHandler:h});if(f.on("wheel.zoom",M,{passive:!1}),!r){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const o=$o(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,"mousedown"===r.sourceEvent?.type&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:c,onDraggingChange:l,onPanZoomStart:a});d.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return s=>{e.usedRightMouseButton=!(!n||!Ro(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),o&&!s.sourceEvent?.internal&&o?.(s.sourceEvent,$o(s.transform))}}({zoomPanValues:c,panOnDrag:u,onPaneContextMenu:!!n,onPanZoom:s,onTransformChange:N});d.on("zoom",t);const r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:s}){return a=>{if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&Ro(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&s(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){const t=$o(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(a.sourceEvent,t)},n?150:0)}}}({zoomPanValues:c,panOnDrag:u,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:i,onDraggingChange:l});d.on("end",r)}const O=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:a,noWheelClassName:i,noPanClassName:l,lib:c,connectionInProgress:u}){return d=>{const f=e||t,h=n&&d.ctrlKey,p="wheel"===d.type;if(1===d.button&&"mousedown"===d.type&&(Do(d,`${c}-flow__node`)||Do(d,`${c}-flow__edge`)))return!0;if(!(r||f||o||s||n))return!1;if(a)return!1;if(u&&!p)return!1;if(Do(d,i)&&p)return!1;if(Do(d,l)&&(!p||o&&p&&!e))return!1;if(!n&&d.ctrlKey&&p)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!o&&!h&&p)return!1;if(!r&&("mousedown"===d.type||"touchstart"===d.type))return!1;if(Array.isArray(r)&&!r.includes(d.button)&&"mousedown"===d.type)return!1;const m=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||p)&&m}}({zoomActivationKeyPressed:k,panOnDrag:u,zoomOnScroll:x,panOnScroll:o,zoomOnDoubleClick:w,zoomOnPinch:v,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:S,connectionInProgress:E});d.filter(O),w?f.on("dblclick.zoom",p):f.on("dblclick.zoom",null)},destroy:g,setViewport:async function(e,t){const n=zo(e);return await m(n,t),new Promise(e=>e(n))},setViewportConstrained:y,getViewport:function(){const e=f?Bn(f.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return f?new Promise(n=>{d?.interpolate("linear"===t?.interpolate?er:He).scaleTo(Vo(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return f?new Promise(n=>{d?.interpolate("linear"===t?.interpolate?er:He).scaleBy(Vo(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){d?.scaleExtent(e)},setTranslateExtent:function(e){d?.translateExtent(e)},syncViewport:function(e){if(f){const t=zo(e),n=f.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||d?.transform(f,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Ar(e)||e<0?0:e;d?.clickDistance(t)}}}var Ko;function qo(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}function Wo(e,t){return Math.max(0,t-e)}function Uo(e,t){return Math.max(0,e-t)}function Yo(e,t,n){return Math.max(0,t-e,e-n)}function Xo(e,t){return e?!t:t}!function(e){e.Line="line",e.Handle="handle"}(Ko||(Ko={}));const Zo={width:0,height:0,x:0,y:0},Qo={...Zo,pointerX:0,pointerY:0,aspectRatio:1};function Go(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,s=e.measured.width??0,a=e.measured.height??0,i=n[0]*s,l=n[1]*a;return[[r-i,o-l],[r+s-i,o+a-l]]}var Jo=n(7);const es=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,s={setState:r,getState:o,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,o,s);return s},{useDebugValue:ts}=a,{useSyncExternalStoreWithSelector:ns}=Jo,rs=e=>e;function os(e,t=rs,n){const r=ns(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ts(r),r}const ss=(e,t)=>{const n=(e=>e?es(e):es)(e),r=(e,r=t)=>os(n,e,r);return Object.assign(r,n),r};function as(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n(143);const is=(0,a.createContext)(null),ls=is.Provider,cs="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function us(e,t){const n=(0,a.useContext)(is);if(null===n)throw new Error(cs);return os(n,e,t)}function ds(){const e=(0,a.useContext)(is);if(null===e)throw new Error(cs);return(0,a.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const fs={display:"none"},hs={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ps="react-flow__node-desc",ms="react-flow__edge-desc",gs=e=>e.ariaLiveMessage,ys=e=>e.ariaLabelConfig;function bs({rfId:e}){const t=us(gs);return(0,s.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:hs,children:t})}function vs({rfId:e,disableKeyboardA11y:t}){const n=us(ys);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{id:`${ps}-${e}`,style:fs,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,s.jsx)("div",{id:`${ms}-${e}`,style:fs,children:n["edge.a11yDescription.default"]}),!t&&(0,s.jsx)(bs,{rfId:e})]})}const xs=(0,a.forwardRef)(({position:e="top-left",children:t,className:n,style:r,...o},a)=>{const i=`${e}`.split("-");return(0,s.jsx)("div",{className:l(["react-flow__panel",n,...i]),style:r,ref:a,...o,children:t})});function ws({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,s.jsx)(xs,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,s.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}xs.displayName="Panel";const ks=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},Ss=e=>e.id;function Ns(e,t){return as(e.selectedNodes.map(Ss),t.selectedNodes.map(Ss))&&as(e.selectedEdges.map(Ss),t.selectedEdges.map(Ss))}function Es({onSelectionChange:e}){const t=ds(),{selectedNodes:n,selectedEdges:r}=us(ks,Ns);return(0,a.useEffect)(()=>{const o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach(e=>e(o))},[n,r,e]),null}const Cs=e=>!!e.onSelectionChangeHandlers;function _s({onSelectionChange:e}){const t=us(Cs);return e||t?(0,s.jsx)(Es,{onSelectionChange:e}):null}const js=[0,0],Ms={x:0,y:0,zoom:1},Os=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode","rfId"],Ps=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),As={translateExtent:tr,nodeOrigin:js,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Is(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:s,setNodeExtent:i,reset:l,setDefaultNodesAndEdges:c}=us(Ps,as),u=ds();(0,a.useEffect)(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=As,l()}),[]);const d=(0,a.useRef)(As);return(0,a.useEffect)(()=>{for(const a of Os){const l=e[a];l!==d.current[a]&&void 0!==e[a]&&("nodes"===a?t(l):"edges"===a?n(l):"minZoom"===a?r(l):"maxZoom"===a?o(l):"translateExtent"===a?s(l):"nodeExtent"===a?i(l):"ariaLabelConfig"===a?u.setState({ariaLabelConfig:qr(l)}):"fitView"===a?u.setState({fitViewQueued:l}):"fitViewOptions"===a?u.setState({fitViewOptions:l}):u.setState({[a]:l}))}d.current=e},Os.map(t=>e[t])),null}function Ls(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const Ts="undefined"!=typeof document?document:null;function $s(e=null,t={target:Ts,actInsideInputWithModifier:!0}){const[n,r]=(0,a.useState)(!1),o=(0,a.useRef)(!1),s=(0,a.useRef)(new Set([])),[i,l]=(0,a.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,a.useEffect)(()=>{const n=t?.target??Ts,a=t?.actInsideInputWithModifier??!0;if(null!==e){const e=e=>{if(o.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!o.current||o.current&&!a)&&Zr(e))return!1;const n=Ds(e.code,l);if(s.current.add(e[n]),zs(i,s.current,!1)){const n=e.composedPath?.()?.[0]||e.target,s="BUTTON"===n?.nodeName||"A"===n?.nodeName;!1===t.preventDefault||!o.current&&s||e.preventDefault(),r(!0)}},c=e=>{const t=Ds(e.code,l);zs(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(e[t]),"Meta"===e.key&&s.current.clear(),o.current=!1},u=()=>{s.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",c),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",c),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,r]),n}function zs(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Ds(e,t){return t.includes(e)?"code":"key"}function Rs(e,t){const n=[],r=new Map,o=[];for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{const e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}else o.push(t);for(const e of t){const t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const o={...e};for(const e of t)Bs(e,o);n.push(o)}return o.length&&o.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function Bs(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured={...e.dimensions},e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function Vs(e,t){return{id:e,type:"select",selected:t}}function Fs(e,t=new Set,n=!1){const r=[];for(const[o,s]of e){const e=t.has(o);void 0===s.selected&&!e||s.selected===e||(n&&(s.selected=e),r.push(Vs(s.id,e)))}return r}function Hs({items:e=[],lookup:t}){const n=[],r=new Map(e.map(e=>[e.id,e]));for(const[r,o]of e.entries()){const e=t.get(o.id),s=e?.internals?.userNode??e;void 0!==s&&s!==o&&n.push({id:o.id,item:o,type:"replace"}),void 0===s&&n.push({item:o,type:"add",index:r})}for(const[e]of t)void 0===r.get(e)&&n.push({id:e,type:"remove"});return n}function Ks(e){return{id:e.id,type:"remove"}}const qs=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function Ws(e){return(0,a.forwardRef)(e)}const Us="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;function Ys(e){const[t,n]=(0,a.useState)(BigInt(0)),[r]=(0,a.useState)(()=>function(){let e=[];return{get:()=>e,reset:()=>{e=[]},push:t=>{e.push(t),n(e=>e+BigInt(1))}}}());return Us(()=>{const t=r.get();t.length&&(e(t),r.reset())},[t]),r}const Xs=(0,a.createContext)(null);function Zs({children:e}){const t=ds(),n=Ys((0,a.useCallback)(e=>{const{nodes:n=[],setNodes:r,hasDefaultNodes:o,onNodesChange:s,nodeLookup:a,fitViewQueued:i,onNodesChangeMiddlewareMap:l}=t.getState();let c=n;for(const t of e)c="function"==typeof t?t(c):t;let u=Hs({items:c,lookup:a});for(const e of l.values())u=e(u);o&&r(c),u.length>0?s?.(u):i&&window.requestAnimationFrame(()=>{const{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[])),r=Ys((0,a.useCallback)(e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:s,edgeLookup:a}=t.getState();let i=n;for(const t of e)i="function"==typeof t?t(i):t;o?r(i):s&&s(Hs({items:i,lookup:a}))},[])),o=(0,a.useMemo)(()=>({nodeQueue:n,edgeQueue:r}),[]);return(0,s.jsx)(Xs.Provider,{value:o,children:e})}const Qs=e=>!!e.panZoom;function Gs(){const e=(()=>{const e=ds();return(0,a.useMemo)(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,s],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:s,maxZoom:a,panZoom:i}=e.getState(),l=Dr(t,r,o,s,a,n?.padding??.1);return i?(await i.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:o,snapToGrid:s,domNode:a}=e.getState();if(!a)return t;const{x:i,y:l}=a.getBoundingClientRect(),c={x:t.x-i,y:t.y-l},u=n.snapGrid??o,d=n.snapToGrid??s;return Tr(c,r,d,u)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:s}=r.getBoundingClientRect(),a=$r(t,n);return{x:a.x+o,y:a.y+s}}}),[])})(),t=ds(),n=function(){const e=(0,a.useContext)(Xs);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),r=us(Qs),o=(0,a.useMemo)(()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},s=e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState(),o=qs(e)?e:n.get(e.id),s=o.parentId?Hr(o.position,o.measured,o.parentId,n,r):o.position,a={...o,position:s,width:o.measured?.width??o.width,height:o.measured?.height??o.height};return _r(a)},a=(e,t,n={replace:!1})=>{r(r=>r.map(r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&qs(e)?e:{...r,...e}}return r}))},i=(e,t,n={replace:!1})=>{o(r=>r.map(r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&hr(e)?e:{...r,...e}}return r}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,s,a]=r;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:s,zoom:a}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:r,edges:o,onNodesDelete:s,onEdgesDelete:a,triggerNodeChanges:i,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:u}=t.getState(),{nodes:d,edges:f}=await async function({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const s=new Set(e.map(e=>e.id)),a=[];for(const e of n){if(!1===e.deletable)continue;const t=s.has(e.id),n=!t&&e.parentId&&a.find(t=>t.id===e.parentId);(t||n)&&a.push(e)}const i=new Set(t.map(e=>e.id)),l=r.filter(e=>!1!==e.deletable),c=((e,t)=>{const n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))})(a,l),u=c;for(const e of l)i.has(e.id)&&!u.find(t=>t.id===e.id)&&u.push(e);if(!o)return{edges:u,nodes:a};const d=await o({nodes:a,edges:u});return"boolean"==typeof d?d?{edges:u,nodes:a}:{edges:[],nodes:[]}:d}({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:o,onBeforeDelete:u}),h=f.length>0,p=d.length>0;if(h){const e=f.map(Ks);a?.(f),l(e)}if(p){const e=d.map(Ks);s?.(d),i(e)}return(p||h)&&c?.({nodes:d,edges:f}),{deletedNodes:d,deletedEdges:f}},getIntersectingNodes:(e,n=!0,r)=>{const o=Pr(e),a=o?e:s(e),i=void 0!==r;return a?(r||t.getState().nodes).filter(r=>{const s=t.getState().nodeLookup.get(r.id);if(s&&!o&&(r.id===e.id||!s.internals.positionAbsolute))return!1;const l=_r(i?r:s),c=Or(l,a);return n&&c>0||c>=l.width*l.height||c>=a.width*a.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{const r=Pr(e)?e:s(e);if(!r)return!1;const o=Or(r,t);return n&&o>0||o>=t.width*t.height||o>=r.width*r.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:i,updateEdgeData:(e,t,n={replace:!1})=>{i(e,e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState();return((e,t={nodeOrigin:[0,0]})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const r="string"==typeof n;let o=t.nodeLookup||r?void 0:n;t.nodeLookup&&(o=r?t.nodeLookup.get(n):pr(n)?n:t.nodeLookup.get(n.id));const s=o?jr(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Nr(e,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Cr(n)})(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{const r=t.getState().fitViewResolver??function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:r}),n.nodeQueue.push(e=>[...e]),r.promise}}},[]);return(0,a.useMemo)(()=>({...o,...e,viewportInitialized:r}),[r])}const Js=e=>e.selected,ea="undefined"!=typeof window?window:void 0,ta={position:"absolute",width:"100%",height:"100%",top:0,left:0},na=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function ra({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=sr.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:u,translateExtent:d,minZoom:f,maxZoom:h,zoomActivationKeyCode:p,preventScrolling:m=!0,children:g,noWheelClassName:y,noPanClassName:b,onViewportChange:v,isControlledViewport:x,paneClickDistance:w,selectionOnDrag:k}){const S=ds(),N=(0,a.useRef)(null),{userSelectionActive:E,lib:C,connectionInProgress:_}=us(na,as),j=$s(p),M=(0,a.useRef)();!function(e){const t=ds();(0,a.useEffect)(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??1))return!1;const n=Ur(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}},[])}(N);const O=(0,a.useCallback)(e=>{v?.({x:e[0],y:e[1],zoom:e[2]}),x||S.setState({transform:e})},[v,x]);return(0,a.useEffect)(()=>{if(N.current){M.current=Ho({domNode:N.current,minZoom:f,maxZoom:h,translateExtent:d,viewport:u,onDraggingChange:e=>S.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=S.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=S.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=S.getState();r?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=M.current.getViewport();return S.setState({panZoom:M.current,transform:[e,t,n],domNode:N.current.closest(".react-flow")}),()=>{M.current?.destroy()}}},[]),(0,a.useEffect)(()=>{M.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:j,preventScrolling:m,noPanClassName:b,userSelectionActive:E,noWheelClassName:y,lib:C,onTransformChange:O,connectionInProgress:_,selectionOnDrag:k,paneClickDistance:w})},[e,t,n,r,o,i,l,c,j,m,b,E,y,C,O,_,k,w]),(0,s.jsx)("div",{className:"react-flow__renderer",ref:N,style:ta,children:g})}const oa=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function sa(){const{userSelectionActive:e,userSelectionRect:t}=us(oa,as);return e&&t?(0,s.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const aa=(e,t)=>n=>{n.target===t.current&&e?.(n)},ia=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function la({isSelecting:e,selectionKeyPressed:t,selectionMode:n=ar.Full,panOnDrag:r,paneClickDistance:o,selectionOnDrag:i,onSelectionStart:c,onSelectionEnd:u,onPaneClick:d,onPaneContextMenu:f,onPaneScroll:h,onPaneMouseEnter:p,onPaneMouseMove:m,onPaneMouseLeave:g,children:y}){const b=ds(),{userSelectionActive:v,elementsSelectable:x,dragging:w,connectionInProgress:k}=us(ia,as),S=x&&(e||v),N=(0,a.useRef)(null),E=(0,a.useRef)(),C=(0,a.useRef)(new Set),_=(0,a.useRef)(new Set),j=(0,a.useRef)(!1),M=e=>{j.current||k?j.current=!1:(d?.(e),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1}))},O=h?e=>h(e):void 0,P=!0===r||Array.isArray(r)&&r.includes(0);return(0,s.jsxs)("div",{className:l(["react-flow__pane",{draggable:P,dragging:w,selection:e}]),onClick:S?void 0:aa(M,N),onContextMenu:aa(e=>{Array.isArray(r)&&r?.includes(2)?e.preventDefault():f?.(e)},N),onWheel:aa(O,N),onPointerEnter:S?void 0:p,onPointerMove:S?e=>{const{userSelectionRect:r,transform:s,nodeLookup:a,edgeLookup:i,connectionLookup:l,triggerNodeChanges:u,triggerEdgeChanges:d,defaultEdgeOptions:f,resetSelectedElements:h}=b.getState();if(!E.current||!r)return;const{x:p,y:m}=Gr(e.nativeEvent,E.current),{startX:g,startY:y}=r;if(!j.current){const n=t?0:o;if(Math.hypot(p-g,m-y)<=n)return;h(),c?.(e)}j.current=!0;const v={startX:g,startY:y,x:p<g?p:g,y:m<y?m:y,width:Math.abs(p-g),height:Math.abs(m-y)},x=C.current,w=_.current;C.current=new Set(yr(a,v,s,n===ar.Partial,!0).map(e=>e.id)),_.current=new Set;const k=f?.selectable??!0;for(const e of C.current){const t=l.get(e);if(t)for(const{edgeId:e}of t.values()){const t=i.get(e);t&&(t.selectable??k)&&_.current.add(e)}}Kr(x,C.current)||u(Fs(a,C.current,!0)),Kr(w,_.current)||d(Fs(i,_.current)),b.setState({userSelectionRect:v,userSelectionActive:!0,nodesSelectionActive:!1})}:m,onPointerUp:S?e=>{0===e.button&&(e.target?.releasePointerCapture?.(e.pointerId),!v&&e.target===N.current&&b.getState().userSelectionRect&&M?.(e),b.setState({userSelectionActive:!1,userSelectionRect:null}),j.current&&(u?.(e),b.setState({nodesSelectionActive:C.current.size>0})))}:void 0,onPointerDownCapture:S?n=>{const{domNode:r}=b.getState();if(E.current=r?.getBoundingClientRect(),!E.current)return;const o=n.target===N.current;if(!o&&n.target.closest(".nokey")||!e||!(i&&o||t)||0!==n.button||!n.isPrimary)return;n.target?.setPointerCapture?.(n.pointerId),j.current=!1;const{x:s,y:a}=Gr(n.nativeEvent,E.current);b.setState({userSelectionRect:{width:0,height:0,startX:s,startY:a,x:s,y:a}}),o||(n.stopPropagation(),n.preventDefault())}:void 0,onClickCapture:S?e=>{j.current&&(e.stopPropagation(),j.current=!1)}:void 0,onPointerLeave:g,ref:N,style:ta,children:[y,(0,s.jsx)(sa,{})]})}function ca({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:a,nodeLookup:i,onError:l}=t.getState(),c=i.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])):l?.("012",(e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`)(e))}function ua({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,nodeClickDistance:i}){const l=ds(),[c,u]=(0,a.useState)(!1),d=(0,a.useRef)();return(0,a.useEffect)(()=>{d.current=function({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let s={x:null,y:null},a=0,i=new Map,l=!1,c={x:0,y:0},u=null,d=!1,f=null,h=!1,p=!1,m=null;return{update:function({noDragClassName:g,handleSelector:y,domNode:b,isSelectable:v,nodeId:x,nodeClickDistance:w=0}){function k({x:e,y:n}){const{nodeLookup:o,nodeExtent:a,snapGrid:l,snapToGrid:c,nodeOrigin:u,onNodeDrag:d,onSelectionDrag:f,onError:h,updateNodePositions:g}=t();s={x:e,y:n};let y=!1;const b=i.size>1,v=b&&a?Er(gr(i)):null,w=b&&c?function({dragItems:e,snapGrid:t,x:n,y:r}){const o=e.values().next().value;if(!o)return null;const s={x:n-o.distance.x,y:r-o.distance.y},a=Lr(s,t);return{x:a.x-s.x,y:a.y-s.y}}({dragItems:i,snapGrid:l,x:e,y:n}):null;for(const[t,r]of i){if(!o.has(t))continue;let s={x:e-r.distance.x,y:n-r.distance.y};c&&(s=w?{x:Math.round(s.x+w.x),y:Math.round(s.y+w.y)}:Lr(s,l));let i=null;if(b&&a&&!r.extent&&v){const{positionAbsolute:e}=r.internals,t=e.x-v.x+a[0][0],n=e.x+r.measured.width-v.x2+a[1][0];i=[[t,e.y-v.y+a[0][1]],[n,e.y+r.measured.height-v.y2+a[1][1]]]}const{position:d,positionAbsolute:f}=br({nodeId:t,nextPosition:s,nodeLookup:o,nodeExtent:i||a,nodeOrigin:u,onError:h});y=y||r.position.x!==d.x||r.position.y!==d.y,r.position=d,r.internals.positionAbsolute=f}if(p=p||y,y&&(g(i,!0),m&&(r||d||!x&&f))){const[e,t]=Oo({nodeId:x,dragItems:i,nodeLookup:o});r?.(m,i,e,t),d?.(m,e,t),x||f?.(m,t)}}async function S(){if(!u)return;const{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:o}=t();if(!o)return l=!1,void cancelAnimationFrame(a);const[i,d]=Sr(c,u,r);0===i&&0===d||(s.x=(s.x??0)-i/e[2],s.y=(s.y??0)-d/e[2],await n({x:i,y:d})&&k(s)),a=requestAnimationFrame(S)}function N(r){const{nodeLookup:o,multiSelectionActive:a,nodesDraggable:l,transform:c,snapGrid:f,snapToGrid:h,selectNodesOnDrag:p,onNodeDragStart:m,onSelectionDragStart:g,unselectNodesAndEdges:y}=t();d=!0,p&&v||a||!x||o.get(x)?.selected||y(),v&&p&&x&&e?.(x);const b=Wr(r.sourceEvent,{transform:c,snapGrid:f,snapToGrid:h,containerBounds:u});if(s=b,i=function(e,t,n,r){const o=new Map;for(const[s,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!jo(a,e))&&(a.draggable||t&&void 0===a.draggable)){const t=e.get(s);t&&o.set(s,{id:s,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,l,b,x),i.size>0&&(n||m||!x&&g)){const[e,t]=Oo({nodeId:x,dragItems:i,nodeLookup:o});n?.(r.sourceEvent,i,e,t),m?.(r.sourceEvent,e,t),x||g?.(r.sourceEvent,t)}}f=_e(b);const E=Ve().clickDistance(w).on("start",e=>{const{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:a,snapToGrid:i}=t();u=n?.getBoundingClientRect()||null,h=!1,p=!1,m=e.sourceEvent,0===r&&N(e);const l=Wr(e.sourceEvent,{transform:o,snapGrid:a,snapToGrid:i,containerBounds:u});s=l,c=Gr(e.sourceEvent,u)}).on("drag",e=>{const{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:a,nodeDragThreshold:f,nodeLookup:p}=t(),g=Wr(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:a,containerBounds:u});if(m=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||x&&!p.has(x))&&(h=!0),!h){if(!l&&n&&d&&(l=!0,S()),!d){const t=Gr(e.sourceEvent,u),n=t.x-c.x,r=t.y-c.y;Math.sqrt(n*n+r*r)>f&&N(e)}(s.x!==g.xSnapped||s.y!==g.ySnapped)&&i&&d&&(c=Gr(e.sourceEvent,u),k(g))}}).on("end",e=>{if(d&&!h&&(l=!1,d=!1,cancelAnimationFrame(a),i.size>0)){const{nodeLookup:n,updateNodePositions:r,onNodeDragStop:s,onSelectionDragStop:a}=t();if(p&&(r(i,!1),p=!1),o||s||!x&&a){const[t,r]=Oo({nodeId:x,dragItems:i,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,i,t,r),s?.(e.sourceEvent,t,r),x||a?.(e.sourceEvent,r)}}}).filter(e=>{const t=e.target;return!e.button&&(!g||!Mo(t,`.${g}`,b))&&(!y||Mo(t,y,b))});f.call(E)},destroy:function(){f?.on(".drag",null)}}}({getStoreItems:()=>l.getState(),onNodeMouseDown:t=>{ca({id:t,store:l,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),(0,a.useEffect)(()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:o,nodeClickDistance:i}),()=>{d.current?.destroy()}},[n,r,t,s,e,o]),c}function da(){const e=ds();return(0,a.useCallback)(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:s,onError:a,updateNodePositions:i,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,d=(e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable))(s),f=r?o[0]:5,h=r?o[1]:5,p=t.direction.x*f*t.factor,m=t.direction.y*h*t.factor;for(const[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+m};r&&(t=Lr(t,o));const{position:s,positionAbsolute:i}=br({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:a});e.position=s,e.internals.positionAbsolute=i,u.set(e.id,e)}i(u)},[])}const fa=(0,a.createContext)(null),ha=fa.Provider;fa.Consumer;const pa=()=>(0,a.useContext)(fa),ma=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),ga=(0,a.memo)(Ws(function({type:e="source",position:t=ur.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:c,children:u,className:d,onMouseDown:f,onTouchStart:h,...p},m){const g=i||null,y="target"===e,b=ds(),v=pa(),{connectOnClick:x,noPanClassName:w,rfId:k}=us(ma,as),{connectingFrom:S,connectingTo:N,clickConnecting:E,isPossibleEndHandle:C,connectionInProcess:_,clickConnectionInProcess:j,valid:M}=us(((e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:s,connection:a}=r,{fromHandle:i,toHandle:l,isValid:c}=a,u=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:i?.nodeId===e&&i?.id===t&&i?.type===n,connectingTo:u,clickConnecting:o?.nodeId===e&&o?.id===t&&o?.type===n,isPossibleEndHandle:s===or.Strict?i?.type!==n:e!==i?.nodeId||t!==i?.id,connectionInProcess:!!i,clickConnectionInProcess:!!o,valid:u&&c}})(v,g,e),as);v||b.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");const O=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=b.getState(),o={...t,...e};if(r){const{edges:e,setEdges:t}=b.getState();t(((e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||ao;let o;return o=hr(e)?{...e}:{...e,id:r(e)},((e,t)=>t.some(t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle))))(o,t)?t:(null===o.sourceHandle&&delete o.sourceHandle,null===o.targetHandle&&delete o.targetHandle,t.concat(o))})(o,e))}n?.(o),c?.(o)},P=e=>{if(!v)return;const t=Qr(e.nativeEvent);if(o&&(t&&0===e.button||!t)){const t=b.getState();To.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:y,handleId:g,nodeId:v,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:O,isValidConnection:n||t.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?f?.(e):h?.(e)};return(0,s.jsx)("div",{"data-handleid":g,"data-nodeid":v,"data-handlepos":t,"data-id":`${k}-${v}-${g}-${e}`,className:l(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,d,{source:!y,target:y,connectable:r,connectablestart:o,connectableend:a,clickconnecting:E,connectingfrom:S,connectingto:N,valid:M,connectionindicator:r&&(!_||C)&&(_||j?a:o)}]),onMouseDown:P,onTouchStart:P,onClick:x?t=>{const{onClickConnectStart:r,onClickConnectEnd:s,connectionClickStartHandle:a,connectionMode:i,isValidConnection:l,lib:c,rfId:u,nodeLookup:d,connection:f}=b.getState();if(!v||!a&&!o)return;if(!a)return r?.(t.nativeEvent,{nodeId:v,handleId:g,handleType:e}),void b.setState({connectionClickStartHandle:{nodeId:v,type:e,id:g}});const h=Yr(t.target),p=n||l,{connection:m,isValid:y}=To.isValid(t.nativeEvent,{handle:{nodeId:v,id:g,type:e},connectionMode:i,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:p,flowId:u,doc:h,lib:c,nodeLookup:d});y&&m&&O(m);const x=structuredClone(f);delete x.inProgress,x.toPosition=x.toHandle?x.toHandle.position:null,s?.(t,x),b.setState({connectionClickStartHandle:null})}:void 0,ref:m,...p,children:u})})),ya={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ba={input:function({data:e,isConnectable:t,sourcePosition:n=ur.Bottom}){return(0,s.jsxs)(s.Fragment,{children:[e?.label,(0,s.jsx)(ga,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=ur.Top,sourcePosition:r=ur.Bottom}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ga,{type:"target",position:n,isConnectable:t}),e?.label,(0,s.jsx)(ga,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=ur.Top}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ga,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},va=e=>{const{width:t,height:n,x:r,y:o}=gr(e.nodeLookup,{filter:e=>!!e.selected});return{width:Ar(t)?t:null,height:Ar(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function xa({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ds(),{width:o,height:i,transformString:c,userSelectionActive:u}=us(va,as),d=da(),f=(0,a.useRef)(null);if((0,a.useEffect)(()=>{n||f.current?.focus({preventScroll:!0})},[n]),ua({nodeRef:f}),u||!o||!i)return null;const h=e?t=>{const n=r.getState().nodes.filter(e=>e.selected);e(t,n)}:void 0;return(0,s.jsx)("div",{className:l(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:(0,s.jsx)("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(ya,e.key)&&(e.preventDefault(),d({direction:ya[e.key],factor:e.shiftKey?4:1}))},style:{width:o,height:i}})})}const wa="undefined"!=typeof window?window:void 0,ka=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Sa({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:b,elementsSelectable:v,zoomOnScroll:x,zoomOnPinch:w,panOnScroll:k,panOnScrollSpeed:S,panOnScrollMode:N,zoomOnDoubleClick:E,panOnDrag:C,defaultViewport:_,translateExtent:j,minZoom:M,maxZoom:O,preventScrolling:P,onSelectionContextMenu:A,noWheelClassName:I,noPanClassName:L,disableKeyboardA11y:T,onViewportChange:$,isControlledViewport:z}){const{nodesSelectionActive:D,userSelectionActive:R}=us(ka,as),B=$s(d,{target:wa}),V=$s(y,{target:wa}),F=V||C,H=V||k,K=f&&!0!==F,q=B||R||K;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ds(),{deleteElements:r}=Gs(),o=$s(e,{actInsideInputWithModifier:!1}),s=$s(t,{target:ea});(0,a.useEffect)(()=>{if(o){const{edges:e,nodes:t}=n.getState();r({nodes:t.filter(Js),edges:e.filter(Js)}),n.setState({nodesSelectionActive:!1})}},[o]),(0,a.useEffect)(()=>{n.setState({multiSelectionActive:s})},[s])}({deleteKeyCode:u,multiSelectionKeyCode:g}),(0,s.jsx)(ra,{onPaneContextMenu:i,elementsSelectable:v,zoomOnScroll:x,zoomOnPinch:w,panOnScroll:H,panOnScrollSpeed:S,panOnScrollMode:N,zoomOnDoubleClick:E,panOnDrag:!B&&F,defaultViewport:_,translateExtent:j,minZoom:M,maxZoom:O,zoomActivationKeyCode:b,preventScrolling:P,noWheelClassName:I,noPanClassName:L,onViewportChange:$,isControlledViewport:z,paneClickDistance:c,selectionOnDrag:K,children:(0,s.jsxs)(la,{onSelectionStart:p,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:l,panOnDrag:F,isSelecting:!!q,selectionMode:h,selectionKeyPressed:B,paneClickDistance:c,selectionOnDrag:K,children:[e,D&&(0,s.jsx)(xa,{onSelectionContextMenu:A,noPanClassName:L,disableKeyboardA11y:T})]})})}Sa.displayName="FlowRenderer";const Na=(0,a.memo)(Sa);const Ea=e=>e.updateNodeInternals;var Ca=(0,a.memo)(function({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:c,nodesDraggable:u,elementsSelectable:d,nodesConnectable:f,nodesFocusable:h,resizeObserver:p,noDragClassName:m,noPanClassName:g,disableKeyboardA11y:y,rfId:b,nodeTypes:v,nodeClickDistance:x,onError:w}){const{node:k,internals:S,isParent:N}=us(t=>{const n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},as);let E=k.type||"default",C=v?.[E]||ba[E];void 0===C&&(w?.("003",(e=>`Node type "${e}" not found. Using fallback type "default".`)(E)),E="default",C=v?.default||ba.default);const _=!!(k.draggable||u&&void 0===k.draggable),j=!!(k.selectable||d&&void 0===k.selectable),M=!!(k.connectable||f&&void 0===k.connectable),O=!!(k.focusable||h&&void 0===k.focusable),P=ds(),A=Fr(k),I=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=ds(),s=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,a.useRef)(e.sourcePosition),c=(0,a.useRef)(e.targetPosition),u=(0,a.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,a.useEffect)(()=>{!s.current||e.hidden||d&&i.current===s.current||(i.current&&r?.unobserve(i.current),r?.observe(s.current),i.current=s.current)},[d,e.hidden]),(0,a.useEffect)(()=>()=>{i.current&&(r?.unobserve(i.current),i.current=null)},[]),(0,a.useEffect)(()=>{if(s.current){const n=u.current!==t,r=l.current!==e.sourcePosition,a=c.current!==e.targetPosition;(n||r||a)&&(u.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}({node:k,nodeType:E,hasDimensions:A,resizeObserver:p}),L=ua({nodeRef:I,disabled:k.hidden||!_,noDragClassName:m,handleSelector:k.dragHandle,nodeId:e,isSelectable:j,nodeClickDistance:x}),T=da();if(k.hidden)return null;const $=Vr(k),z=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(k),D=j||_||t||n||r||o,R=n?e=>n(e,{...S.userNode}):void 0,B=r?e=>r(e,{...S.userNode}):void 0,V=o?e=>o(e,{...S.userNode}):void 0,F=i?e=>i(e,{...S.userNode}):void 0,H=c?e=>c(e,{...S.userNode}):void 0;return(0,s.jsx)("div",{className:l(["react-flow__node",`react-flow__node-${E}`,{[g]:_},k.className,{selected:k.selected,selectable:j,parent:N,draggable:_,dragging:L}]),ref:I,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:D?"all":"none",visibility:A?"visible":"hidden",...k.style,...z},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:R,onMouseMove:B,onMouseLeave:V,onContextMenu:F,onClick:n=>{const{selectNodesOnDrag:r,nodeDragThreshold:o}=P.getState();j&&(!r||!_||o>0)&&ca({id:e,store:P,nodeRef:I}),t&&t(n,{...S.userNode})},onDoubleClick:H,onKeyDown:O?t=>{if(!Zr(t.nativeEvent)&&!y)if(nr.includes(t.key)&&j){const n="Escape"===t.key;ca({id:e,store:P,unselect:n,nodeRef:I})}else if(_&&k.selected&&Object.prototype.hasOwnProperty.call(ya,t.key)){t.preventDefault();const{ariaLabelConfig:e}=P.getState();P.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~S.positionAbsolute.x,y:~~S.positionAbsolute.y})}),T({direction:ya[t.key],factor:t.shiftKey?4:1})}}:void 0,tabIndex:O?0:void 0,onFocus:O?()=>{if(y||!I.current?.matches(":focus-visible"))return;const{transform:t,width:n,height:r,autoPanOnNodeFocus:o,setCenter:s}=P.getState();o&&(yr(new Map([[e,k]]),{x:0,y:0,width:n,height:r},t,!0).length>0||s(k.position.x+$.width/2,k.position.y+$.height/2,{zoom:t[2]}))}:void 0,role:k.ariaRole??(O?"group":void 0),"aria-roledescription":"node","aria-describedby":y?void 0:`${ps}-${b}`,"aria-label":k.ariaLabel,...k.domAttributes,children:(0,s.jsx)(ha,{value:e,children:(0,s.jsx)(C,{id:e,data:k.data,type:E,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:k.selected??!1,selectable:j,draggable:_,deletable:k.deletable??!0,isConnectable:M,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:L,dragHandle:k.dragHandle,zIndex:S.z,parentId:k.parentId,...$})})})});const _a=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function ja(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=us(_a,as),l=(u=e.onlyRenderVisibleElements,us((0,a.useCallback)((e=>t=>e?yr(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()))(u),[u]),as)),c=function(){const e=us(Ea),[t]=(0,a.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{const n=new Map;t.forEach(e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,a.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();var u;return(0,s.jsx)("div",{className:"react-flow__nodes",style:ta,children:l.map(a=>(0,s.jsx)(Ca,{id:a,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},a))})}ja.displayName="NodeRenderer";const Ma=(0,a.memo)(ja),Oa={[cr.Arrow]:({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return(0,s.jsx)("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[cr.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,s.jsx)("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},Pa=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const u=function(e){const t=ds();return(0,a.useMemo)(()=>Object.prototype.hasOwnProperty.call(Oa,e)?Oa[e]:(t.getState().onError?.("009",(e=>`Marker type "${e}" doesn't exist.`)(e)),null),[e])}(t);return u?(0,s.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0",children:(0,s.jsx)(u,{color:n,strokeWidth:l})}):null},Aa=({defaultColor:e,rfId:t})=>{const n=us(e=>e.edges),r=us(e=>e.defaultEdgeOptions),o=(0,a.useMemo)(()=>{const o=function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const s=new Set;return e.reduce((e,a)=>([a.markerStart||r,a.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){const o=go(r,t);s.has(o)||(e.push({id:o,color:r.color||n,...r}),s.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd});return o},[n,r,t,e]);return o.length?(0,s.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,s.jsx)("defs",{children:o.map(e=>(0,s.jsx)(Pa,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};Aa.displayName="MarkerDefinitions";var Ia=(0,a.memo)(Aa);function La({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:i,labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:d,className:f,...h}){const[p,m]=(0,a.useState)({x:1,y:0,width:0,height:0}),g=l(["react-flow__edge-textwrapper",f]),y=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(y.current){const e=y.current.getBBox();m({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n?(0,s.jsxs)("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:g,visibility:p.width?"visible":"hidden",...h,children:[o&&(0,s.jsx)("rect",{width:p.width+2*c[0],x:-c[0],y:-c[1],height:p.height+2*c[1],className:"react-flow__edge-textbg",style:i,rx:u,ry:u}),(0,s.jsx)("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:y,style:r,children:n}),d]}):null}La.displayName="EdgeText";const Ta=(0,a.memo)(La);function $a({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:c,labelBgBorderRadius:u,interactionWidth:d=20,...f}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{...f,d:e,fill:"none",className:l(["react-flow__edge-path",f.className])}),d?(0,s.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&Ar(t)&&Ar(n)?(0,s.jsx)(Ta,{x:t,y:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:c,labelBgBorderRadius:u}):null]})}function za({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===ur.Left||e===ur.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Da({sourceX:e,sourceY:t,sourcePosition:n=ur.Bottom,targetX:r,targetY:o,targetPosition:s=ur.Top}){const[a,i]=za({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=za({pos:s,x1:r,y1:o,x2:e,y2:t}),[u,d,f,h]=eo({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:i,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${i} ${l},${c} ${r},${o}`,u,d,f,h]}function Ra(e){return(0,a.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i,targetPosition:l,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:y,interactionWidth:b})=>{const[v,x,w]=Da({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:l}),k=e.isInternal?void 0:t;return(0,s.jsx)($a,{id:k,path:v,labelX:x,labelY:w,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:y,interactionWidth:b})})}const Ba=Ra({isInternal:!1}),Va=Ra({isInternal:!0});function Fa(e){return(0,a.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,sourcePosition:p=ur.Bottom,targetPosition:m=ur.Top,markerEnd:g,markerStart:y,pathOptions:b,interactionWidth:v})=>{const[x,w,k]=uo({sourceX:n,sourceY:r,sourcePosition:p,targetX:o,targetY:a,targetPosition:m,borderRadius:b?.borderRadius,offset:b?.offset,stepPosition:b?.stepPosition}),S=e.isInternal?void 0:t;return(0,s.jsx)($a,{id:S,path:x,labelX:w,labelY:k,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:y,interactionWidth:v})})}Ba.displayName="SimpleBezierEdge",Va.displayName="SimpleBezierEdgeInternal";const Ha=Fa({isInternal:!1}),Ka=Fa({isInternal:!0});function qa(e){return(0,a.memo)(({id:t,...n})=>{const r=e.isInternal?void 0:t;return(0,s.jsx)(Ha,{...n,id:r,pathOptions:(0,a.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}Ha.displayName="SmoothStepEdge",Ka.displayName="SmoothStepEdgeInternal";const Wa=qa({isInternal:!1}),Ua=qa({isInternal:!0});function Ya(e){return(0,a.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:m,interactionWidth:g})=>{const[y,b,v]=io({sourceX:n,sourceY:r,targetX:o,targetY:a}),x=e.isInternal?void 0:t;return(0,s.jsx)($a,{id:x,path:y,labelX:b,labelY:v,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:m,interactionWidth:g})})}Wa.displayName="StepEdge",Ua.displayName="StepEdgeInternal";const Xa=Ya({isInternal:!1}),Za=Ya({isInternal:!0});function Qa(e){return(0,a.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=ur.Bottom,targetPosition:l=ur.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:y,pathOptions:b,interactionWidth:v})=>{const[x,w,k]=ro({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:l,curvature:b?.curvature}),S=e.isInternal?void 0:t;return(0,s.jsx)($a,{id:S,path:x,labelX:w,labelY:k,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:y,interactionWidth:v})})}Xa.displayName="StraightEdge",Za.displayName="StraightEdgeInternal";const Ga=Qa({isInternal:!1}),Ja=Qa({isInternal:!0});Ga.displayName="BezierEdge",Ja.displayName="BezierEdgeInternal";const ei={default:Ja,straight:Za,step:Ua,smoothstep:Ka,simplebezier:Va},ti={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ni=(e,t,n)=>n===ur.Left?e-t:n===ur.Right?e+t:e,ri=(e,t,n)=>n===ur.Top?e-t:n===ur.Bottom?e+t:e,oi="react-flow__edgeupdater";function si({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:c}){return(0,s.jsx)("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:l([oi,`${oi}-${c}`]),cx:ni(t,r,e),cy:ri(n,r,e),r,stroke:"transparent",fill:"transparent"})}function ai({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:i,sourcePosition:l,targetPosition:c,onReconnect:u,onReconnectStart:d,onReconnectEnd:f,setReconnecting:h,setUpdateHover:p}){const m=ds(),g=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:r,domNode:o,isValidConnection:s,connectionMode:a,connectionRadius:i,lib:l,onConnectStart:c,onConnectEnd:p,cancelConnection:g,nodeLookup:y,rfId:b,panBy:v,updateConnection:x}=m.getState(),w="target"===t.type;To.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:a,connectionRadius:i,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:b,cancelConnection:g,panBy:v,isValidConnection:s,onConnect:e=>u?.(n,e),onConnectStart:(r,o)=>{h(!0),d?.(e,n,t.type),c?.(r,o)},onConnectEnd:p,onReconnectEnd:(e,r)=>{h(!1),f?.(e,n,t.type,r)},updateConnection:x,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},y=()=>p(!0),b=()=>p(!1);return(0,s.jsxs)(s.Fragment,{children:[(!0===e||"source"===e)&&(0,s.jsx)(si,{position:l,centerX:r,centerY:o,radius:t,onMouseDown:e=>g(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:y,onMouseOut:b,type:"source"}),(!0===e||"target"===e)&&(0,s.jsx)(si,{position:c,centerX:a,centerY:i,radius:t,onMouseDown:e=>g(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:y,onMouseOut:b,type:"target"})]})}var ii=(0,a.memo)(function({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:c,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,reconnectRadius:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,rfId:y,edgeTypes:b,noPanClassName:v,onError:x,disableKeyboardA11y:w}){let k=us(t=>t.edgeLookup.get(e));const S=us(e=>e.defaultEdgeOptions);k=S?{...S,...k}:k;let N=k.type||"default",E=b?.[N]||ei[N];void 0===E&&(x?.("011",(e=>`Edge type "${e}" not found. Using fallback type "default".`)(N)),N="default",E=b?.default||ei.default);const C=!!(k.focusable||t&&void 0===k.focusable),_=void 0!==p&&(k.reconnectable||n&&void 0===k.reconnectable),j=!!(k.selectable||r&&void 0===k.selectable),M=(0,a.useRef)(null),[O,P]=(0,a.useState)(!1),[A,I]=(0,a.useState)(!1),L=ds(),{zIndex:T,sourceX:$,sourceY:z,targetX:D,targetY:R,sourcePosition:B,targetPosition:V}=us((0,a.useCallback)(t=>{const n=t.nodeLookup.get(k.source),r=t.nodeLookup.get(k.target);if(!n||!r)return{zIndex:k.zIndex,...ti};const o=function(e){const{sourceNode:t,targetNode:n}=e;if(!fo(t)||!fo(n))return null;const r=t.internals.handleBounds||ho(t.handles),o=n.internals.handleBounds||ho(n.handles),s=mo(r?.source??[],e.sourceHandle),a=mo(e.connectionMode===or.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!s||!a)return e.onError?.("008",((e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`)(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const i=s?.position||ur.Bottom,l=a?.position||ur.Top,c=po(t,s,i),u=po(n,a,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:i,targetPosition:l}}({id:e,sourceNode:n,targetNode:r,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:t.connectionMode,onError:x}),s=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1,zIndexMode:s="basic"}){return"manual"===s?r:(o&&n?r+1e3:r)+Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0)}({selected:k.selected,zIndex:k.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect,zIndexMode:t.zIndexMode});return{zIndex:s,...o||ti}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),as),F=(0,a.useMemo)(()=>k.markerStart?`url('#${go(k.markerStart,y)}')`:void 0,[k.markerStart,y]),H=(0,a.useMemo)(()=>k.markerEnd?`url('#${go(k.markerEnd,y)}')`:void 0,[k.markerEnd,y]);if(k.hidden||null===$||null===z||null===D||null===R)return null;const K=i?e=>{i(e,{...k})}:void 0,q=c?e=>{c(e,{...k})}:void 0,W=u?e=>{u(e,{...k})}:void 0,U=d?e=>{d(e,{...k})}:void 0,Y=f?e=>{f(e,{...k})}:void 0;return(0,s.jsx)("svg",{style:{zIndex:T},children:(0,s.jsxs)("g",{className:l(["react-flow__edge",`react-flow__edge-${N}`,k.className,v,{selected:k.selected,animated:k.animated,inactive:!j&&!o,updating:O,selectable:j}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:s}=L.getState();j&&(L.setState({nodesSelectionActive:!1}),k.selected&&s?(r({nodes:[],edges:[k]}),M.current?.blur()):n([e])),o&&o(t,k)},onDoubleClick:K,onContextMenu:q,onMouseEnter:W,onMouseMove:U,onMouseLeave:Y,onKeyDown:C?t=>{if(!w&&nr.includes(t.key)&&j){const{unselectNodesAndEdges:n,addSelectedEdges:r}=L.getState();"Escape"===t.key?(M.current?.blur(),n({edges:[k]})):r([e])}}:void 0,tabIndex:C?0:void 0,role:k.ariaRole??(C?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===k.ariaLabel?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":C?`${ms}-${y}`:void 0,ref:M,...k.domAttributes,children:[!A&&(0,s.jsx)(E,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:j,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:$,sourceY:z,targetX:D,targetY:R,sourcePosition:B,targetPosition:V,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:F,markerEnd:H,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),_&&(0,s.jsx)(ai,{edge:k,isReconnectable:_,reconnectRadius:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,sourceX:$,sourceY:z,targetX:D,targetY:R,sourcePosition:B,targetPosition:V,setUpdateHover:P,setReconnecting:I})]})})});const li=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ci({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:f,reconnectRadius:h,onEdgeDoubleClick:p,onReconnectStart:m,onReconnectEnd:g,disableKeyboardA11y:y}){const{edgesFocusable:b,edgesReconnectable:v,elementsSelectable:x,onError:w}=us(li,as),k=(S=t,us((0,a.useCallback)(e=>{if(!S)return e.edges.map(e=>e.id);const t=[];if(e.width&&e.height)for(const n of e.edges){const r=e.nodeLookup.get(n.source),o=e.nodeLookup.get(n.target);r&&o&&so({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t},[S]),as));var S;return(0,s.jsxs)("div",{className:"react-flow__edges",children:[(0,s.jsx)(Ia,{defaultColor:e,rfId:n}),k.map(e=>(0,s.jsx)(ii,{id:e,edgesFocusable:b,edgesReconnectable:v,elementsSelectable:x,noPanClassName:o,onReconnect:i,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:f,reconnectRadius:h,onDoubleClick:p,onReconnectStart:m,onReconnectEnd:g,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:y},e))]})}ci.displayName="EdgeRenderer";const ui=(0,a.memo)(ci),di=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function fi({children:e}){const t=us(di);return(0,s.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const hi=e=>e.panZoom?.syncViewport;function pi(e){return e.connection.inProgress?{...e.connection,to:Tr(e.connection.to,e.transform)}:{...e.connection}}const mi=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function gi({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:a,height:i,isValid:c,inProgress:u}=us(mi,as);return a&&o&&u?(0,s.jsx)("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:(0,s.jsx)("g",{className:l(["react-flow__connection",fr(c)]),children:(0,s.jsx)(yi,{style:t,type:n,CustomComponent:r,isValid:c})})}):null}const yi=({style:e,type:t=lr.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:a,fromNode:i,fromHandle:l,fromPosition:c,to:u,toNode:d,toHandle:f,toPosition:h,pointer:p}=us(function(e){return e?t=>{const n=pi(t);return e(n)}:pi}(m),as);var m;if(!o)return;if(n)return(0,s.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:l,fromX:a.x,fromY:a.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:h,connectionStatus:fr(r),toNode:d,toHandle:f,pointer:p});let g="";const y={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:h};switch(t){case lr.Bezier:[g]=ro(y);break;case lr.SimpleBezier:[g]=Da(y);break;case lr.Step:[g]=uo({...y,borderRadius:0});break;case lr.SmoothStep:[g]=uo(y);break;default:[g]=io(y)}return(0,s.jsx)("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};yi.displayName="ConnectionLine";const bi={};function vi(e=bi){(0,a.useRef)(e),ds(),(0,a.useEffect)(()=>{},[e])}function xi({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,onSelectionContextMenu:h,onSelectionStart:p,onSelectionEnd:m,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:b,connectionLineContainerStyle:v,selectionKeyCode:x,selectionOnDrag:w,selectionMode:k,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:E,deleteKeyCode:C,onlyRenderVisibleElements:_,elementsSelectable:j,defaultViewport:M,translateExtent:O,minZoom:P,maxZoom:A,preventScrolling:I,defaultMarkerColor:L,zoomOnScroll:T,zoomOnPinch:$,panOnScroll:z,panOnScrollSpeed:D,panOnScrollMode:R,zoomOnDoubleClick:B,panOnDrag:V,onPaneClick:F,onPaneMouseEnter:H,onPaneMouseMove:K,onPaneMouseLeave:q,onPaneScroll:W,onPaneContextMenu:U,paneClickDistance:Y,nodeClickDistance:X,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:G,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,noDragClassName:oe,noWheelClassName:se,noPanClassName:ae,disableKeyboardA11y:ie,nodeExtent:le,rfId:ce,viewport:ue,onViewportChange:de}){return vi(e),vi(t),ds(),(0,a.useRef)(!1),(0,a.useEffect)(()=>{},[]),function(e){const t=Gs(),n=(0,a.useRef)(!1);(0,a.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(n),function(e){const t=us(hi),n=ds();(0,a.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(ue),(0,s.jsx)(Na,{onPaneClick:F,onPaneMouseEnter:H,onPaneMouseMove:K,onPaneMouseLeave:q,onPaneContextMenu:U,onPaneScroll:W,paneClickDistance:Y,deleteKeyCode:C,selectionKeyCode:x,selectionOnDrag:w,selectionMode:k,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:E,elementsSelectable:j,zoomOnScroll:T,zoomOnPinch:$,zoomOnDoubleClick:B,panOnScroll:z,panOnScrollSpeed:D,panOnScrollMode:R,panOnDrag:V,defaultViewport:M,translateExtent:O,minZoom:P,maxZoom:A,onSelectionContextMenu:h,preventScrolling:I,noDragClassName:oe,noWheelClassName:se,noPanClassName:ae,disableKeyboardA11y:ie,onViewportChange:de,isControlledViewport:!!ue,children:(0,s.jsxs)(fi,{children:[(0,s.jsx)(ui,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:l,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,onlyRenderVisibleElements:_,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:G,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:L,noPanClassName:ae,disableKeyboardA11y:ie,rfId:ce}),(0,s.jsx)(gi,{style:y,type:g,component:b,containerStyle:v}),(0,s.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,s.jsx)(Ma,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,nodeClickDistance:X,onlyRenderVisibleElements:_,noPanClassName:ae,noDragClassName:oe,disableKeyboardA11y:ie,nodeExtent:le,rfId:ce}),(0,s.jsx)("div",{className:"react-flow__viewport-portal"})]})})}xi.displayName="GraphView";const wi=(0,a.memo)(xi),ki=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:s,fitView:a,fitViewOptions:i,minZoom:l=.5,maxZoom:c=2,nodeOrigin:u,nodeExtent:d,zIndexMode:f="basic"}={})=>{const h=new Map,p=new Map,m=new Map,g=new Map,y=r??t??[],b=n??e??[],v=u??[0,0],x=d??tr;_o(m,g,y);const w=ko(b,h,p,{nodeOrigin:v,nodeExtent:x,zIndexMode:f});let k=[0,0,1];if(a&&o&&s){const e=gr(h,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=Dr(e,o,s,l,c,i?.padding??.1);k=[t,n,r]}return{rfId:"1",width:o??0,height:s??0,transform:k,nodes:b,nodesInitialized:w,nodeLookup:h,parentLookup:p,edges:y,edgeLookup:g,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:l,maxZoom:c,translateExtent:tr,nodeExtent:x,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:or.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:i,fitViewResolver:null,connection:{...ir},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Ir,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:rr,zIndexMode:f,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},Si=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:s,fitView:a,fitViewOptions:i,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:d,zIndexMode:f})=>{return h=(h,p)=>{async function m(){const{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:o,height:s,minZoom:a,maxZoom:i}=p();t&&(await async function({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:s},a){if(0===e.size)return Promise.resolve(!0);const i=function(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{!e.measured.width||!e.measured.height||!t?.includeHiddenNodes&&e.hidden||r&&!r.has(e.id)||n.set(e.id,e)}),n}(e,a),l=gr(i),c=Dr(l,t,n,a?.minZoom??o,a?.maxZoom??s,a?.padding??.1);return await r.setViewport(c,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}({nodes:e,width:o,height:s,panZoom:t,minZoom:a,maxZoom:i},n),r?.resolve(!0),h({fitViewResolver:null}))}return{...ki({nodes:e,edges:t,width:o,height:s,fitView:a,fitViewOptions:i,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:f}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o,fitViewQueued:s,zIndexMode:a}=p(),i=ko(e,t,n,{nodeOrigin:r,nodeExtent:d,elevateNodesOnSelect:o,checkEquality:!0,zIndexMode:a});s&&i?(m(),h({nodes:e,nodesInitialized:i,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:e,nodesInitialized:i})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=p();_o(t,n,e),h({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=p();t(e),h({hasDefaultNodes:!0})}if(t){const{setEdges:e}=p();e(t),h({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:o,nodeOrigin:s,nodeExtent:a,debug:i,fitViewQueued:l,zIndexMode:c}=p(),{changes:u,updatedInternals:d}=function(e,t,n,r,o,s,a){const i=r?.querySelector(".xyflow__viewport");let l=!1;if(!i)return{changes:[],updatedInternals:l};const c=[],u=window.getComputedStyle(i),{m22:d}=new window.DOMMatrixReadOnly(u.transform),f=[];for(const r of e.values()){const e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),l=!0;continue}const i=Ur(r.nodeElement),u=e.measured.width!==i.width||e.measured.height!==i.height;if(i.width&&i.height&&(u||!e.internals.handleBounds||r.force)){const h=r.nodeElement.getBoundingClientRect(),p=Br(e.extent)?e.extent:s;let{positionAbsolute:m}=e.internals;e.parentId&&"parent"===e.extent?m=wr(m,i,t.get(e.parentId)):p&&(m=xr(m,p,i));const g={...e,measured:i,internals:{...e.internals,positionAbsolute:m,handleBounds:{source:Jr("source",r.nodeElement,h,d,e.id),target:Jr("target",r.nodeElement,h,d,e.id)}}};t.set(e.id,g),e.parentId&&So(g,t,n,{nodeOrigin:o,zIndexMode:a}),l=!0,u&&(c.push({id:e.id,type:"dimensions",dimensions:i}),e.expandParent&&e.parentId&&f.push({id:e.id,parentId:e.parentId,rect:_r(g,o)}))}}if(f.length>0){const e=Eo(f,t,n,o);c.push(...e)}return{changes:c,updatedInternals:l}}(e,n,r,o,s,a,c);d&&(function(e,t,n){const r=vo(yo,n);for(const n of e.values())if(n.parentId)So(n,e,t,r);else{const e=mr(n,r.nodeOrigin),t=Br(n.extent)?n.extent:r.nodeExtent,o=xr(e,t,Vr(n));n.internals.positionAbsolute=o}}(n,r,{nodeOrigin:s,nodeExtent:a,zIndexMode:c}),l?(m(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),u?.length>0&&(i&&console.log("React Flow: trigger node changes",u),t?.(u)))},updateNodePositions:(e,t=!1)=>{const n=[];let r=[];const{nodeLookup:o,triggerNodeChanges:s,connection:a,updateConnection:i,onNodesChangeMiddlewareMap:l}=p();for(const[s,l]of e){const e=o.get(s),c=!!(e?.expandParent&&e?.parentId&&l?.position),u={id:s,type:"position",position:c?{x:Math.max(0,l.position.x),y:Math.max(0,l.position.y)}:l.position,dragging:t};if(e&&a.inProgress&&a.fromNode.id===e.id){const t=po(e,a.fromHandle,ur.Left,!0);i({...a,from:t})}c&&e.parentId&&n.push({id:s,parentId:e.parentId,rect:{...l.internals.positionAbsolute,width:l.measured.width??0,height:l.measured.height??0}}),r.push(u)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=p(),s=Eo(n,o,e,t);r.push(...s)}for(const e of l.values())r=e(r);s(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:s}=p();e?.length&&(o&&n(function(e,t){return Rs(e,t)}(e,r)),s&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:s}=p();e?.length&&(o&&n(function(e,t){return Rs(e,t)}(e,r)),s&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:s}=p();t?o(e.map(e=>Vs(e,!0))):(o(Fs(r,new Set([...e]),!0)),s(Fs(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:s}=p();t?s(e.map(e=>Vs(e,!0))):(s(Fs(n,new Set([...e]))),o(Fs(r,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:s,triggerEdgeChanges:a}=p(),i=t||n,l=(e||r).map(e=>{const t=o.get(e.id);return t&&(t.selected=!1),Vs(e.id,!1)}),c=i.map(e=>Vs(e.id,!1));s(l),a(c)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=p();t?.setScaleExtent([e,n]),h({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=p();t?.setScaleExtent([n,e]),h({maxZoom:e})},setTranslateExtent:e=>{p().panZoom?.setTranslateExtent(e),h({translateExtent:e})},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=p();if(!o)return;const s=t.reduce((e,t)=>t.selected?[...e,Vs(t.id,!1)]:e,[]),a=e.reduce((e,t)=>t.selected?[...e,Vs(t.id,!1)]:e,[]);n(s),r(a)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:s,nodeExtent:a,zIndexMode:i}=p();e[0][0]===a[0][0]&&e[0][1]===a[0][1]&&e[1][0]===a[1][0]&&e[1][1]===a[1][1]||(ko(t,n,r,{nodeOrigin:o,nodeExtent:e,elevateNodesOnSelect:s,checkEquality:!1,zIndexMode:i}),h({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:r,panZoom:o,translateExtent:s}=p();return async function({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,s]],r),i=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(i)}({delta:e,panZoom:o,transform:t,translateExtent:s,width:n,height:r})},setCenter:async(e,t,n)=>{const{width:r,height:o,maxZoom:s,panZoom:a}=p();if(!a)return Promise.resolve(!1);const i=void 0!==n?.zoom?n.zoom:s;return await a.setViewport({x:r/2-e*i,y:o/2-t*i,zoom:i},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...ir}})},updateConnection:e=>{h({connection:e})},reset:()=>h({...ki()})}},p=Object.is,h?ss(h,p):ss;var h,p};function Ni({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,initialMinZoom:l,initialMaxZoom:c,initialFitViewOptions:u,fitView:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p,children:m}){const[g]=(0,a.useState)(()=>Si({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:d,minZoom:l,maxZoom:c,fitViewOptions:u,nodeOrigin:f,nodeExtent:h,zIndexMode:p}));return(0,s.jsx)(ls,{value:g,children:(0,s.jsx)(Zs,{children:m})})}function Ei({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:l,fitView:c,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:h,nodeExtent:p,zIndexMode:m}){return(0,a.useContext)(is)?(0,s.jsx)(s.Fragment,{children:e}):(0,s.jsx)(Ni,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:l,fitView:c,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:f,nodeOrigin:h,nodeExtent:p,zIndexMode:m,children:e})}const Ci={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var _i,ji=Ws(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:c,onNodeClick:u,onEdgeClick:d,onInit:f,onMove:h,onMoveStart:p,onMoveEnd:m,onConnect:g,onConnectStart:y,onConnectEnd:b,onClickConnectStart:v,onClickConnectEnd:x,onNodeMouseEnter:w,onNodeMouseMove:k,onNodeMouseLeave:S,onNodeContextMenu:N,onNodeDoubleClick:E,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:j,onNodesDelete:M,onEdgesDelete:O,onDelete:P,onSelectionChange:A,onSelectionDragStart:I,onSelectionDrag:L,onSelectionDragStop:T,onSelectionContextMenu:$,onSelectionStart:z,onSelectionEnd:D,onBeforeDelete:R,connectionMode:B,connectionLineType:V=lr.Bezier,connectionLineStyle:F,connectionLineComponent:H,connectionLineContainerStyle:K,deleteKeyCode:q="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:U=!1,selectionMode:Y=ar.Full,panActivationKeyCode:X="Space",multiSelectionKeyCode:Z=(Rr()?"Meta":"Control"),zoomActivationKeyCode:Q=(Rr()?"Meta":"Control"),snapToGrid:G,snapGrid:J,onlyRenderVisibleElements:ee=!1,selectNodesOnDrag:te,nodesDraggable:ne,autoPanOnNodeFocus:re,nodesConnectable:oe,nodesFocusable:se,nodeOrigin:ae=js,edgesFocusable:ie,edgesReconnectable:le,elementsSelectable:ce=!0,defaultViewport:ue=Ms,minZoom:de=.5,maxZoom:fe=2,translateExtent:he=tr,preventScrolling:pe=!0,nodeExtent:me,defaultMarkerColor:ge="#b1b1b7",zoomOnScroll:ye=!0,zoomOnPinch:be=!0,panOnScroll:ve=!1,panOnScrollSpeed:xe=.5,panOnScrollMode:we=sr.Free,zoomOnDoubleClick:ke=!0,panOnDrag:Se=!0,onPaneClick:Ne,onPaneMouseEnter:Ee,onPaneMouseMove:Ce,onPaneMouseLeave:_e,onPaneScroll:je,onPaneContextMenu:Me,paneClickDistance:Oe=1,nodeClickDistance:Pe=0,children:Ae,onReconnect:Ie,onReconnectStart:Le,onReconnectEnd:Te,onEdgeContextMenu:$e,onEdgeDoubleClick:ze,onEdgeMouseEnter:De,onEdgeMouseMove:Re,onEdgeMouseLeave:Be,reconnectRadius:Ve=10,onNodesChange:Fe,onEdgesChange:He,noDragClassName:Ke="nodrag",noWheelClassName:qe="nowheel",noPanClassName:We="nopan",fitView:Ue,fitViewOptions:Ye,connectOnClick:Xe,attributionPosition:Ze,proOptions:Qe,defaultEdgeOptions:Ge,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:et=!1,disableKeyboardA11y:tt=!1,autoPanOnConnect:nt,autoPanOnNodeDrag:rt,autoPanSpeed:ot,connectionRadius:st,isValidConnection:at,onError:it,style:lt,id:ct,nodeDragThreshold:ut,connectionDragThreshold:dt,viewport:ft,onViewportChange:ht,width:pt,height:mt,colorMode:gt="light",debug:yt,onScroll:bt,ariaLabelConfig:vt,zIndexMode:xt="basic",...wt},kt){const St=ct||"1",Nt=function(e){const[t,n]=(0,a.useState)("system"===e?null:e);return(0,a.useEffect)(()=>{if("system"!==e)return void n(e);const t=Ls(),r=()=>n(t?.matches?"dark":"light");return r(),t?.addEventListener("change",r),()=>{t?.removeEventListener("change",r)}},[e]),null!==t?t:Ls()?.matches?"dark":"light"}(gt),Et=(0,a.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),bt?.(e)},[bt]);return(0,s.jsx)("div",{"data-testid":"rf__wrapper",...wt,onScroll:Et,style:{...lt,...Ci},ref:kt,className:l(["react-flow",o,Nt]),id:ct,role:"application",children:(0,s.jsxs)(Ei,{nodes:e,edges:t,width:pt,height:mt,fitView:Ue,fitViewOptions:Ye,minZoom:de,maxZoom:fe,nodeOrigin:ae,nodeExtent:me,zIndexMode:xt,children:[(0,s.jsx)(wi,{onInit:f,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:w,onNodeMouseMove:k,onNodeMouseLeave:S,onNodeContextMenu:N,onNodeDoubleClick:E,nodeTypes:i,edgeTypes:c,connectionLineType:V,connectionLineStyle:F,connectionLineComponent:H,connectionLineContainerStyle:K,selectionKeyCode:W,selectionOnDrag:U,selectionMode:Y,deleteKeyCode:q,multiSelectionKeyCode:Z,panActivationKeyCode:X,zoomActivationKeyCode:Q,onlyRenderVisibleElements:ee,defaultViewport:ue,translateExtent:he,minZoom:de,maxZoom:fe,preventScrolling:pe,zoomOnScroll:ye,zoomOnPinch:be,zoomOnDoubleClick:ke,panOnScroll:ve,panOnScrollSpeed:xe,panOnScrollMode:we,panOnDrag:Se,onPaneClick:Ne,onPaneMouseEnter:Ee,onPaneMouseMove:Ce,onPaneMouseLeave:_e,onPaneScroll:je,onPaneContextMenu:Me,paneClickDistance:Oe,nodeClickDistance:Pe,onSelectionContextMenu:$,onSelectionStart:z,onSelectionEnd:D,onReconnect:Ie,onReconnectStart:Le,onReconnectEnd:Te,onEdgeContextMenu:$e,onEdgeDoubleClick:ze,onEdgeMouseEnter:De,onEdgeMouseMove:Re,onEdgeMouseLeave:Be,reconnectRadius:Ve,defaultMarkerColor:ge,noDragClassName:Ke,noWheelClassName:qe,noPanClassName:We,rfId:St,disableKeyboardA11y:tt,nodeExtent:me,viewport:ft,onViewportChange:ht}),(0,s.jsx)(Is,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:y,onConnectEnd:b,onClickConnectStart:v,onClickConnectEnd:x,nodesDraggable:ne,autoPanOnNodeFocus:re,nodesConnectable:oe,nodesFocusable:se,edgesFocusable:ie,edgesReconnectable:le,elementsSelectable:ce,elevateNodesOnSelect:Je,elevateEdgesOnSelect:et,minZoom:de,maxZoom:fe,nodeExtent:me,onNodesChange:Fe,onEdgesChange:He,snapToGrid:G,snapGrid:J,connectionMode:B,translateExtent:he,connectOnClick:Xe,defaultEdgeOptions:Ge,fitView:Ue,fitViewOptions:Ye,onNodesDelete:M,onEdgesDelete:O,onDelete:P,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:j,onSelectionDrag:L,onSelectionDragStart:I,onSelectionDragStop:T,onMove:h,onMoveStart:p,onMoveEnd:m,noPanClassName:We,nodeOrigin:ae,rfId:St,autoPanOnConnect:nt,autoPanOnNodeDrag:rt,autoPanSpeed:ot,onError:it,connectionRadius:st,isValidConnection:at,selectNodesOnDrag:te,nodeDragThreshold:ut,connectionDragThreshold:dt,onBeforeDelete:R,debug:yt,ariaLabelConfig:vt,zIndexMode:xt}),(0,s.jsx)(_s,{onSelectionChange:A}),Ae,(0,s.jsx)(ws,{proOptions:Qe,position:Ze}),(0,s.jsx)(vs,{rfId:St,disableKeyboardA11y:tt})]})})});function Mi({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,s.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:l(["react-flow__background-pattern",n,r])})}function Oi({radius:e,className:t}){return(0,s.jsx)("circle",{cx:e,cy:e,r:e,className:l(["react-flow__background-pattern","dots",t])})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(_i||(_i={}));const Pi={[_i.Dots]:1,[_i.Lines]:1,[_i.Cross]:6},Ai=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ii({id:e,variant:t=_i.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:c,bgColor:u,style:d,className:f,patternClassName:h}){const p=(0,a.useRef)(null),{transform:m,patternId:g}=us(Ai,as),y=r||Pi[t],b=t===_i.Dots,v=t===_i.Cross,x=Array.isArray(n)?n:[n,n],w=[x[0]*m[2]||1,x[1]*m[2]||1],k=y*m[2],S=Array.isArray(i)?i:[i,i],N=v?[k,k]:w,E=[S[0]*m[2]||1+N[0]/2,S[1]*m[2]||1+N[1]/2],C=`${g}${e||""}`;return(0,s.jsxs)("svg",{className:l(["react-flow__background",f]),style:{...d,...ta,"--xy-background-color-props":u,"--xy-background-pattern-color-props":c},ref:p,"data-testid":"rf__background",children:[(0,s.jsx)("pattern",{id:C,x:m[0]%w[0],y:m[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:b?(0,s.jsx)(Oi,{radius:k/2,className:h}):(0,s.jsx)(Mi,{dimensions:N,lineWidth:o,variant:t,className:h})}),(0,s.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}Ii.displayName="Background";const Li=(0,a.memo)(Ii);function Ti(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,s.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function $i(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,s.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function zi(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,s.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Di(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,s.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ri(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,s.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Bi({children:e,className:t,...n}){return(0,s.jsx)("button",{type:"button",className:l(["react-flow__controls-button",t]),...n,children:e})}const Vi=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Fi({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:c,onInteractiveChange:u,className:d,children:f,position:h="bottom-left",orientation:p="vertical","aria-label":m}){const g=ds(),{isInteractive:y,minZoomReached:b,maxZoomReached:v,ariaLabelConfig:x}=us(Vi,as),{zoomIn:w,zoomOut:k,fitView:S}=Gs(),N="horizontal"===p?"horizontal":"vertical";return(0,s.jsxs)(xs,{className:l(["react-flow__controls",N,d]),position:h,style:e,"data-testid":"rf__controls","aria-label":m??x["controls.ariaLabel"],children:[t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Bi,{onClick:()=>{w(),a?.()},className:"react-flow__controls-zoomin",title:x["controls.zoomIn.ariaLabel"],"aria-label":x["controls.zoomIn.ariaLabel"],disabled:v,children:(0,s.jsx)(Ti,{})}),(0,s.jsx)(Bi,{onClick:()=>{k(),i?.()},className:"react-flow__controls-zoomout",title:x["controls.zoomOut.ariaLabel"],"aria-label":x["controls.zoomOut.ariaLabel"],disabled:b,children:(0,s.jsx)($i,{})})]}),n&&(0,s.jsx)(Bi,{className:"react-flow__controls-fitview",onClick:()=>{S(o),c?.()},title:x["controls.fitView.ariaLabel"],"aria-label":x["controls.fitView.ariaLabel"],children:(0,s.jsx)(zi,{})}),r&&(0,s.jsx)(Bi,{className:"react-flow__controls-interactive",onClick:()=>{g.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),u?.(!y)},title:x["controls.interactive.ariaLabel"],"aria-label":x["controls.interactive.ariaLabel"],children:y?(0,s.jsx)(Ri,{}):(0,s.jsx)(Di,{})}),f]})}Fi.displayName="Controls";const Hi=(0,a.memo)(Fi),Ki=(0,a.memo)(function({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:c,strokeWidth:u,className:d,borderRadius:f,shapeRendering:h,selected:p,onClick:m}){const{background:g,backgroundColor:y}=a||{},b=i||g||y;return(0,s.jsx)("rect",{className:l(["react-flow__minimap-node",{selected:p},d]),x:t,y:n,rx:f,ry:f,width:r,height:o,style:{fill:b,stroke:c,strokeWidth:u},shapeRendering:h,onClick:m?t=>m(t,e):void 0})}),qi=e=>e.nodes.map(e=>e.id),Wi=e=>e instanceof Function?e:()=>e,Ui=(0,a.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:l,onClick:c}){const{node:u,x:d,y:f,width:h,height:p}=us(t=>{const{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:o,y:s}=n.positionAbsolute,{width:a,height:i}=Vr(r);return{node:r,x:o,y:s,width:a,height:i}},as);return u&&!u.hidden&&Fr(u)?(0,s.jsx)(l,{x:d,y:f,width:h,height:p,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:o,strokeColor:n(u),strokeWidth:a,shapeRendering:i,onClick:c,id:u.id}):null});var Yi=(0,a.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=Ki,onClick:i}){const l=us(qi,as),c=Wi(t),u=Wi(e),d=Wi(n),f="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,s.jsx)(s.Fragment,{children:l.map(e=>(0,s.jsx)(Ui,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:i,shapeRendering:f},e))})});const Xi=e=>!e.hidden,Zi=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Mr(gr(e.nodeLookup,{filter:Xi}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function Qi({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:c,nodeComponent:u,bgColor:d,maskColor:f,maskStrokeColor:h,maskStrokeWidth:p,position:m="bottom-right",onClick:g,onNodeClick:y,pannable:b=!1,zoomable:v=!1,ariaLabel:x,inversePan:w,zoomStep:k=1,offsetScale:S=5}){const N=ds(),E=(0,a.useRef)(null),{boundingRect:C,viewBB:_,rfId:j,panZoom:M,translateExtent:O,flowWidth:P,flowHeight:A,ariaLabelConfig:I}=us(Zi,as),L=e?.width??200,T=e?.height??150,$=C.width/L,z=C.height/T,D=Math.max($,z),R=D*L,B=D*T,V=S*D,F=C.x-(R-C.width)/2-V,H=C.y-(B-C.height)/2-V,K=R+2*V,q=B+2*V,W=`react-flow__minimap-desc-${j}`,U=(0,a.useRef)(0),Y=(0,a.useRef)();U.current=D,(0,a.useEffect)(()=>{if(E.current&&M)return Y.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=_e(e);return{update:function({translateExtent:e,width:s,height:a,zoomStep:i=1,pannable:l=!0,zoomable:c=!0,inversePan:u=!1}){let d=[0,0];const f=Xn().on("start",e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?o=>{const i=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;const l=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],c=[l[0]-d[0],l[1]-d[1]];d=l;const f=r()*Math.max(i[2],Math.log(i[2]))*(u?-1:1),h={x:i[0]-c[0]*f,y:i[1]-c[1]*f},p=[[0,0],[s,a]];t.setViewportConstrained({x:h.x,y:h.y,zoom:i[2]},p,e)}:null).on("zoom.wheel",c?e=>{if("wheel"!==e.sourceEvent.type||!t)return;const r=n(),o=e.sourceEvent.ctrlKey&&Rr()?10:1,s=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*i,a=r[2]*Math.pow(2,s*o);t.scaleTo(a)}:null);o.call(f,{})},destroy:function(){o.on("zoom",null)},pointer:je}}({domNode:E.current,panZoom:M,getTransform:()=>N.getState().transform,getViewScale:()=>U.current}),()=>{Y.current?.destroy()}},[M]),(0,a.useEffect)(()=>{Y.current?.update({translateExtent:O,width:P,height:A,inversePan:w,pannable:b,zoomStep:k,zoomable:v})},[b,v,w,k,O,P,A]);const X=g?e=>{const[t,n]=Y.current?.pointer(e)||[0,0];g(e,{x:t,y:n})}:void 0,Z=y?(0,a.useCallback)((e,t)=>{const n=N.getState().nodeLookup.get(t).internals.userNode;y(e,n)},[]):void 0,Q=x??I["minimap.ariaLabel"];return(0,s.jsx)(xs,{position:m,style:{...e,"--xy-minimap-background-color-props":"string"==typeof d?d:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof f?f:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof h?h:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof p?p*D:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof c?c:void 0},className:l(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,s.jsxs)("svg",{width:L,height:T,viewBox:`${F} ${H} ${K} ${q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":W,ref:E,onClick:X,children:[Q&&(0,s.jsx)("title",{id:W,children:Q}),(0,s.jsx)(Yi,{onClick:Z,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:c,nodeComponent:u}),(0,s.jsx)("path",{className:"react-flow__minimap-mask",d:`M${F-V},${H-V}h${K+2*V}v${q+2*V}h${-K-2*V}z\n        M${_.x},${_.y}h${_.width}v${_.height}h${-_.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Qi.displayName="MiniMap";const Gi=(0,a.memo)(Qi),Ji={[Ko.Line]:"right",[Ko.Handle]:"bottom-right"};(0,a.memo)(function({nodeId:e,position:t,variant:n=Ko.Handle,className:r,style:o,children:i,color:c,minWidth:u=10,minHeight:d=10,maxWidth:f=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:m,autoScale:g=!0,shouldResize:y,onResizeStart:b,onResize:v,onResizeEnd:x}){const w=pa(),k="string"==typeof e?e:w,S=ds(),N=(0,a.useRef)(null),E=n===Ko.Handle,C=us((0,a.useCallback)((_=E&&g,e=>_?`${Math.max(1/e.transform[2],1)}`:void 0),[E,g]),as);var _;const j=(0,a.useRef)(null),M=t??Ji[n];(0,a.useEffect)(()=>{if(N.current&&k)return j.current||(j.current=function({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const s=_e(e);let a={controlDirection:qo("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};return{update:function({controlPosition:e,boundaries:i,keepAspectRatio:l,resizeDirection:c,onResizeStart:u,onResize:d,onResizeEnd:f,shouldResize:h}){let p,m={...Zo},g={...Qo};a={boundaries:i,resizeDirection:c,keepAspectRatio:l,controlDirection:qo(e)};let y,b,v,x=null,w=[],k=!1;const S=Ve().on("start",e=>{const{nodeLookup:r,transform:o,snapGrid:s,snapToGrid:a,nodeOrigin:i,paneDomNode:l}=n();if(p=r.get(t),!p)return;x=l?.getBoundingClientRect()??null;const{xSnapped:c,ySnapped:d}=Wr(e.sourceEvent,{transform:o,snapGrid:s,snapToGrid:a,containerBounds:x});m={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},g={...m,pointerX:c,pointerY:d,aspectRatio:m.width/m.height},y=void 0,p.parentId&&("parent"===p.extent||p.expandParent)&&(y=r.get(p.parentId),b=y&&"parent"===p.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(y):void 0),w=[],v=void 0;for(const[e,n]of r)if(n.parentId===t&&(w.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=Go(n,p,n.origin??i);v=v?[[Math.min(e[0][0],v[0][0]),Math.min(e[0][1],v[0][1])],[Math.max(e[1][0],v[1][0]),Math.max(e[1][1],v[1][1])]]:e}u?.(e,{...m})}).on("drag",e=>{const{transform:t,snapGrid:o,snapToGrid:s,nodeOrigin:i}=n(),l=Wr(e.sourceEvent,{transform:t,snapGrid:o,snapToGrid:s,containerBounds:x}),c=[];if(!p)return;const{x:u,y:f,width:S,height:N}=m,E={},C=p.origin??i,{width:_,height:j,x:M,y:O}=function(e,t,n,r,o,s,a,i){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:h,ySnapped:p}=n,{minWidth:m,maxWidth:g,minHeight:y,maxHeight:b}=r,{x:v,y:x,width:w,height:k,aspectRatio:S}=e;let N=Math.floor(u?h-e.pointerX:0),E=Math.floor(d?p-e.pointerY:0);const C=w+(l?-N:N),_=k+(c?-E:E),j=-s[0]*w,M=-s[1]*k;let O=Yo(C,m,g),P=Yo(_,y,b);if(a){let e=0,t=0;l&&N<0?e=Wo(v+N+j,a[0][0]):!l&&N>0&&(e=Uo(v+C+j,a[1][0])),c&&E<0?t=Wo(x+E+M,a[0][1]):!c&&E>0&&(t=Uo(x+_+M,a[1][1])),O=Math.max(O,e),P=Math.max(P,t)}if(i){let e=0,t=0;l&&N>0?e=Uo(v+N,i[0][0]):!l&&N<0&&(e=Wo(v+C,i[1][0])),c&&E>0?t=Uo(x+E,i[0][1]):!c&&E<0&&(t=Wo(x+_,i[1][1])),O=Math.max(O,e),P=Math.max(P,t)}if(o){if(u){const e=Yo(C/S,y,b)*S;if(O=Math.max(O,e),a){let e=0;e=!l&&!c||l&&!c&&f?Uo(x+M+C/S,a[1][1])*S:Wo(x+M+(l?N:-N)/S,a[0][1])*S,O=Math.max(O,e)}if(i){let e=0;e=!l&&!c||l&&!c&&f?Wo(x+C/S,i[1][1])*S:Uo(x+(l?N:-N)/S,i[0][1])*S,O=Math.max(O,e)}}if(d){const e=Yo(_*S,m,g)/S;if(P=Math.max(P,e),a){let e=0;e=!l&&!c||c&&!l&&f?Uo(v+_*S+j,a[1][0])/S:Wo(v+(c?E:-E)*S+j,a[0][0])/S,P=Math.max(P,e)}if(i){let e=0;e=!l&&!c||c&&!l&&f?Wo(v+_*S,i[1][0])/S:Uo(v+(c?E:-E)*S,i[0][0])/S,P=Math.max(P,e)}}}E+=E<0?P:-P,N+=N<0?O:-O,o&&(f?C>_*S?E=(Xo(l,c)?-N:N)/S:N=(Xo(l,c)?-E:E)*S:u?(E=N/S,c=l):(N=E*S,l=c));const A=l?v+N:v,I=c?x+E:x;return{width:w+(l?-N:N),height:k+(c?-E:E),x:s[0]*N*(l?-1:1)+A,y:s[1]*E*(c?-1:1)+I}}(g,a.controlDirection,l,a.boundaries,a.keepAspectRatio,C,b,v),P=_!==S,A=j!==N,I=M!==u&&P,L=O!==f&&A;if(!(I||L||P||A))return;if((I||L||1===C[0]||1===C[1])&&(E.x=I?M:m.x,E.y=L?O:m.y,m.x=E.x,m.y=E.y,w.length>0)){const e=M-u,t=O-f;for(const n of w)n.position={x:n.position.x-e+C[0]*(_-S),y:n.position.y-t+C[1]*(j-N)},c.push(n)}if((P||A)&&(E.width=!P||a.resizeDirection&&"horizontal"!==a.resizeDirection?m.width:_,E.height=!A||a.resizeDirection&&"vertical"!==a.resizeDirection?m.height:j,m.width=E.width,m.height=E.height),y&&p.expandParent){const e=C[0]*(E.width??0);E.x&&E.x<e&&(m.x=e,g.x=g.x-(E.x-e));const t=C[1]*(E.height??0);E.y&&E.y<t&&(m.y=t,g.y=g.y-(E.y-t))}const T=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:s}){const a=e-t,i=n-r,l=[a>0?1:a<0?-1:0,i>0?1:i<0?-1:0];return a&&o&&(l[0]=-1*l[0]),i&&s&&(l[1]=-1*l[1]),l}({width:m.width,prevWidth:S,height:m.height,prevHeight:N,affectsX:a.controlDirection.affectsX,affectsY:a.controlDirection.affectsY}),$={...m,direction:T},z=h?.(e,$);!1!==z&&(k=!0,d?.(e,$),r(E,c))}).on("end",e=>{k&&(f?.(e,{...m}),o?.({...m}),k=!1)});s.call(S)},destroy:function(){s.on(".drag",null)}}}({domNode:N.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,domNode:s}=S.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,paneDomNode:s}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:s}=S.getState(),a=[],i={x:e.x,y:e.y},l=r.get(k);if(l&&l.expandParent&&l.parentId){const t=l.origin??s,n=e.width??l.measured.width??0,c=e.height??l.measured.height??0,u=Eo([{id:l.id,parentId:l.parentId,rect:{width:n,height:c,...Hr({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:c},l.parentId,r,t)}}],r,o,s);a.push(...u),i.x=e.x?Math.max(t[0]*n,e.x):void 0,i.y=e.y?Math.max(t[1]*c,e.y):void 0}if(void 0!==i.x&&void 0!==i.y){const e={id:k,type:"position",position:{...i}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:k,type:"dimensions",resizing:!0,setAttributes:!m||("horizontal"===m?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const e of t){const t={...e,type:"position"};a.push(t)}n(a)},onEnd:({width:e,height:t})=>{const n={id:k,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}};S.getState().triggerNodeChanges([n])}})),j.current.update({controlPosition:M,boundaries:{minWidth:u,minHeight:d,maxWidth:f,maxHeight:h},keepAspectRatio:p,resizeDirection:m,onResizeStart:b,onResize:v,onResizeEnd:x,shouldResize:y}),()=>{j.current?.destroy()}},[M,u,d,f,h,p,b,v,x,y]);const O=M.split("-");return(0,s.jsx)("div",{className:l(["react-flow__resize-control","nodrag",...O,n,r]),ref:N,style:{...o,scale:C,...c&&{[E?"backgroundColor":"borderColor"]:c}},children:i})});var el={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tl=a.createContext&&a.createContext(el),nl=["attr","size","title"];function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rl.apply(this,arguments)}function ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ol(Object(n),!0).forEach(function(t){al(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function al(e,t,n){var r;return(t="symbol"==typeof(r=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function il(e){return e&&e.map((e,t)=>a.createElement(e.tag,sl({key:t},e.attr),il(e.child)))}function ll(e){return t=>a.createElement(cl,rl({attr:sl({},e.attr)},t),il(e.child))}function cl(e){var t=t=>{var n,{attr:r,size:o,title:s}=e,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,nl),l=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),a.createElement("svg",rl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,i,{className:n,style:sl(sl({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&a.createElement("title",null,s),e.children)};return void 0!==tl?a.createElement(tl.Consumer,null,e=>t(e)):t(el)}function ul(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8 2a1 1 0 000 2h2a1 1 0 100-2H8z"},child:[]},{tag:"path",attr:{d:"M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z"},child:[]}]})(e)}function dl(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function fl(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"},child:[]}]})(e)}function hl(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z",clipRule:"evenodd"},child:[]},{tag:"path",attr:{d:"M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z"},child:[]}]})(e)}function pl(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},child:[]}]})(e)}function ml(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"},child:[]}]})(e)}function gl(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"},child:[]}]})(e)}function yl(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"},child:[]}]})(e)}function bl(e){return ll({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(e)}function vl(e){return ll({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(e)}function xl(e){return ll({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(e)}function wl(e){return ll({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},child:[]}]})(e)}function kl(e){return ll({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},child:[]}]})(e)}const Sl=(0,a.memo)(function(e){const{selected:t}=e;return(0,s.jsxs)("div",{className:`\n        flex h-10 w-10 items-center justify-center rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800\n        text-lg font-light text-slate-500 dark:text-slate-400 shadow-sm transition-colors\n        hover:border-blue-400 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 hover:text-blue-600 dark:hover:text-blue-400\n        ${t?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 ring-2 ring-blue-200 dark:ring-blue-900":""}\n      `,title:"Add new job",children:[(0,s.jsx)(ga,{type:"target",position:ur.Left,className:"!h-2 !w-2 !border-2 !border-slate-400 dark:!border-slate-600 !bg-white dark:!bg-slate-800"}),"+"]})});function Nl(e){return ll({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"},child:[]}]})(e)}function El(e){return ll({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.61.455a3.41 3.41 0 0 0-3.41 3.41 3.41 3.41 0 0 0 3.41 3.41 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41zM12.92.8C8.923.777 5.137 2.941 3.148 6.451a4.5 4.5 0 0 1 .26-.007 4.92 4.92 0 0 1 2.585.737A8.316 8.316 0 0 1 12.688 3.6 4.944 4.944 0 0 1 13.723.834 11.008 11.008 0 0 0 12.92.8zm9.226 4.994a4.915 4.915 0 0 1-1.918 2.246 8.36 8.36 0 0 1-.273 8.303 4.89 4.89 0 0 1 1.632 2.54 11.156 11.156 0 0 0 .559-13.089zM3.41 7.932A3.41 3.41 0 0 0 0 11.342a3.41 3.41 0 0 0 3.41 3.409 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41zm2.027 7.866a4.908 4.908 0 0 1-2.915.358 11.1 11.1 0 0 0 7.991 6.698 11.234 11.234 0 0 0 2.422.249 4.879 4.879 0 0 1-.999-2.85 8.484 8.484 0 0 1-.836-.136 8.304 8.304 0 0 1-5.663-4.32zm11.405.928a3.41 3.41 0 0 0-3.41 3.41 3.41 3.41 0 0 0 3.41 3.41 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41z"},child:[]}]})(e)}function Cl(e){return ll({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 93.7l183.6-25.3v177.4H0V93.7zm0 324.6l183.6 25.3V268.4H0v149.9zm203.8 28L448 480V268.4H203.8v177.9zm0-380.6v180.1H448V32L203.8 65.7z"},child:[]}]})(e)}function _l({runsOn:e,className:t=""}){const{icon:n,version:r}=function(e){const t=(e||"ubuntu-latest").split(",")[0].trim().toLowerCase();if(t.startsWith("ubuntu")){const e=t.slice(7)||"latest";return{icon:(0,s.jsx)(El,{className:"text-[#E95420] shrink-0",size:14}),version:e}}if(t.startsWith("macos")){const e=t.slice(6)||"latest";return{icon:(0,s.jsx)(Nl,{className:"text-gray-700 dark:text-gray-300 shrink-0",size:14}),version:e}}if(t.startsWith("windows")){const e=t.slice(8)||"latest";return{icon:(0,s.jsx)(Cl,{className:"text-blue-500 shrink-0",size:14}),version:e}}if("self-hosted"===t||t.startsWith("self-hosted"))return{icon:(0,s.jsx)(gl,{className:"text-slate-600 dark:text-slate-400 shrink-0",size:14}),version:"self-hosted"};const n=t.includes("-")?t.slice(t.indexOf("-")+1):t||"latest";return{icon:(0,s.jsx)(gl,{className:"text-slate-600 dark:text-slate-400 shrink-0",size:14}),version:n}}(e);return(0,s.jsxs)("span",{className:`inline-flex items-center gap-1 rounded bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 ${t}`,title:e||"ubuntu-latest",children:[n,(0,s.jsx)("span",{children:r})]})}const jl=(0,a.memo)(function(e){const{data:t,selected:n}=e,r=t;return(0,s.jsxs)("div",{className:`\n        min-w-[180px] rounded-lg border-2 bg-white dark:bg-slate-800 px-3 py-2 shadow-sm\n        ${n?"border-blue-500 dark:border-blue-400 ring-2 ring-blue-200 dark:ring-blue-900":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}\n      `,children:[(0,s.jsx)(ga,{type:"target",position:ur.Left,className:"!h-2 !w-2 !border-2 !border-slate-400 dark:!border-slate-600 !bg-white dark:!bg-slate-800"}),(0,s.jsx)("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:r.label}),(0,s.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-1",children:[(0,s.jsx)(_l,{runsOn:r.runsOn??"ubuntu-latest"}),r.hasMatrix&&r.matrixCombinations&&(0,s.jsxs)("span",{className:"rounded bg-amber-100 dark:bg-amber-900/30 px-1.5 py-0.5 text-xs font-medium text-amber-800 dark:text-amber-200",children:[r.matrixCombinations," matrix"]}),r.stepCount>0&&(0,s.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[r.stepCount," step",1!==r.stepCount?"s":""]})]}),(0,s.jsx)(ga,{type:"source",position:ur.Right,className:"!h-2 !w-2 !border-2 !border-slate-400 dark:!border-slate-600 !bg-white dark:!bg-slate-800"})]})}),Ml=[{name:"node",label:"Node.js",values:["16","18","20","22"]},{name:"python",label:"Python",values:["3.8","3.9","3.10","3.11","3.12","3.13"]},{name:"os",label:"Operating System",values:["ubuntu-latest","ubuntu-22.04","ubuntu-20.04","windows-latest","windows-2022","windows-2019","macos-latest","macos-14","macos-13","macos-12"]},{name:"java",label:"Java",values:["8","11","17","21"]},{name:"go",label:"Go",values:["1.19","1.20","1.21","1.22","1.23"]},{name:"ruby",label:"Ruby",values:["3.0","3.1","3.2","3.3"]},{name:"php",label:"PHP",values:["8.0","8.1","8.2","8.3"]},{name:"dotnet",label:".NET",values:["6.0","7.0","8.0"]}];function Ol(){return(0,s.jsx)(El,{className:"text-[#E95420]",size:16})}function Pl(){return(0,s.jsx)(Nl,{className:"text-gray-700",size:16})}function Al(){return(0,s.jsx)(Cl,{className:"text-blue-500",size:16})}function Il({workflow:e,jobId:t,onWorkflowChange:n,onClose:r,onDeleteJob:o}){const i=e.jobs[t],l=(0,a.useCallback)(r=>{const o={...e,jobs:{...e.jobs}};o.jobs[t]&&(o.jobs[t]=r(o.jobs[t]),n(o))},[e,t,n]),c=(0,a.useCallback)((e,t)=>{l(n=>({...n,[e]:t}))},[l]),u=(0,a.useCallback)(()=>{l(e=>({...e,steps:[...e.steps??[],{run:""}]}))},[l]),d=(0,a.useCallback)((e,t)=>{l(n=>{const r=[...n.steps??[]];return r[e]=t(r[e]??{run:""}),{...n,steps:r}})},[l]),f=(0,a.useCallback)(e=>{l(t=>{const n=(t.steps??[]).filter((t,n)=>n!==e);return{...t,steps:n}})},[l]),h=i?Array.isArray(i["runs-on"])?i["runs-on"].join(", "):String(i["runs-on"]??""):"",p=(0,a.useMemo)(()=>i?.needs?Array.isArray(i.needs)?i.needs:[i.needs]:[],[i?.needs]),m=Object.keys(e.jobs).filter(e=>e!==t),g=[{value:"ubuntu-latest",label:"Ubuntu Latest",icon:Ol()},{value:"ubuntu-22.04",label:"Ubuntu 22.04",icon:Ol()},{value:"ubuntu-20.04",label:"Ubuntu 20.04",icon:Ol()},{value:"macos-latest",label:"macOS Latest",icon:Pl()},{value:"macos-14",label:"macOS 14",icon:Pl()},{value:"macos-13",label:"macOS 13",icon:Pl()},{value:"macos-12",label:"macOS 12",icon:Pl()},{value:"windows-latest",label:"Windows Latest",icon:Al()},{value:"windows-2022",label:"Windows 2022",icon:Al()},{value:"windows-2019",label:"Windows 2019",icon:Al()},{value:"self-hosted",label:"Self-hosted",icon:(0,s.jsx)(gl,{className:"text-slate-600",size:16})}],y=g.find(e=>e.value===h)||{value:h,label:h||"ubuntu-latest",icon:Ol()},[b,v]=(0,a.useState)(!1),[x,w]=(0,a.useState)({}),[k,S]=(0,a.useState)({}),N=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&v(!1);const t=e.target;t instanceof Element&&(t.closest("[data-matrix-dropdown]")||(w({}),S({})))};return(b||Object.keys(x).length>0||Object.keys(k).length>0)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[b,x,k]);const E=(0,a.useCallback)(e=>{c("runs-on",e||"ubuntu-latest"),v(!1)},[c]),C=(0,a.useCallback)((e,t,n)=>{n.stopPropagation();const r=p,o=t?[...r,e]:r.filter(t=>t!==e);c("needs",0===o.length?void 0:1===o.length?o[0]:o)},[p,c]);return i?(0,s.jsxs)("aside",{className:"flex w-96 shrink-0 flex-col border-l border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm pr-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 px-4 py-2",children:[(0,s.jsxs)("h2",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:["Job: ",t]}),(0,s.jsx)("button",{type:"button",onClick:r,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close panel",children:(0,s.jsx)("span",{className:"text-base leading-none",children:""})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Display name"}),(0,s.jsx)("input",{type:"text",value:i.name??"",onChange:e=>c("name",e.target.value||void 0),className:"mt-1 w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1.5 text-sm",placeholder:t})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Runs on"}),(0,s.jsxs)("div",{ref:N,className:"relative mt-1",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>v(!b),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1.5 text-sm text-left flex items-center gap-2 hover:bg-slate-50 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-slate-900 dark:text-slate-200",children:[(0,s.jsx)("span",{className:"flex-shrink-0",children:y.icon}),(0,s.jsx)("span",{className:"flex-1",children:y.label}),(0,s.jsx)("span",{className:"text-slate-400 dark:text-slate-500 transition-transform "+(b?"rotate-180":""),children:""})]}),b&&(0,s.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded shadow-lg max-h-60 overflow-auto",children:[g.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>E(e.value),className:"w-full px-2 py-1.5 text-sm text-left flex items-center gap-2 hover:bg-slate-50 dark:hover:bg-slate-700 "+(e.value===h?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-slate-200"),children:[(0,s.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,s.jsx)("span",{children:e.label})]},e.value)),!g.some(e=>e.value===h)&&(0,s.jsxs)("button",{type:"button",onClick:()=>E(h),className:"w-full px-2 py-1.5 text-sm text-left flex items-center gap-2 hover:bg-slate-50 dark:hover:bg-slate-700 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:[(0,s.jsx)("span",{className:"flex-shrink-0",children:y.icon}),(0,s.jsx)("span",{children:h||"ubuntu-latest"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Needs"}),0===m.length?(0,s.jsx)("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"No other jobs in this workflow."}):(0,s.jsx)("ul",{className:"mt-1 space-y-1.5 rounded border border-slate-300 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 p-2",children:m.map(e=>(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:`needs-${e}`,checked:p.includes(e),onChange:t=>C(e,t.target.checked,t),onClick:e=>e.stopPropagation(),className:"h-4 w-4 rounded border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400 focus:ring-slate-500 dark:focus:ring-slate-400"}),(0,s.jsx)("label",{htmlFor:`needs-${e}`,className:"cursor-pointer text-sm text-slate-700 dark:text-slate-300",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Environment Variables"}),(0,s.jsx)("button",{type:"button",onClick:()=>{const e={...i.env??{},"":""};c("env",e)},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add variable"})]}),i.env&&0!==Object.keys(i.env).length?(0,s.jsx)("div",{className:"space-y-1.5",children:Object.entries(i.env).map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:n=>{const r={...i.env??{}};delete r[e],r[n.target.value]=t,c("env",Object.keys(r).length>0?r:void 0)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Variable name"}),(0,s.jsx)("input",{type:"text",value:t,onChange:t=>{const n={...i.env??{}};""===t.target.value?delete n[e]:n[e]=t.target.value,c("env",Object.keys(n).length>0?n:void 0)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Value"}),(0,s.jsx)("button",{type:"button",onClick:()=>{const t={...i.env??{}};delete t[e],c("env",Object.keys(t).length>0?t:void 0)},className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]},e))}):(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"No environment variables configured"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Matrix Strategy"}),(0,s.jsx)("button",{type:"button",onClick:()=>{i.strategy?.matrix?c("strategy",void 0):c("strategy",{matrix:{}})},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:i.strategy?.matrix?"Remove matrix":"Add matrix"})]}),i.strategy?.matrix&&(0,s.jsxs)("div",{className:"mb-4 rounded border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50 p-3 space-y-3","data-matrix-dropdown":!0,children:[(0,s.jsxs)("div",{className:"space-y-2",children:[Object.entries(i.strategy.matrix).map(([e,t])=>{const n=(r=e,Ml.some(e=>e.name===r));var r;const o=function(e){const t=Ml.find(t=>t.name===e);return t?t.values:null}(e),a=x[e]??!1;return(0,s.jsxs)("div",{className:"rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,s.jsx)("div",{className:"relative flex-1",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",onClick:()=>w(t=>({...t,[e]:!t[e]})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-sm text-left flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-200",children:[(0,s.jsx)("span",{className:"font-medium",children:Ml.find(t=>t.name===e)?.label||e}),(0,s.jsx)("span",{className:"text-slate-400 dark:text-slate-500",children:""})]}),a&&(0,s.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded shadow-lg max-h-60 overflow-auto",children:[Ml.map(n=>(0,s.jsx)("button",{type:"button",onClick:()=>{const r={...i.strategy.matrix};delete r[e];const o=Array.isArray(t)?t:[];r[n.name]=o.length>0?o:[n.values[0]],c("strategy",{...i.strategy,matrix:r}),w(t=>({...t,[e]:!1}))},className:"w-full px-2 py-1.5 text-sm text-left hover:bg-slate-50 dark:hover:bg-slate-700 "+(n.name===e?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-slate-200"),children:n.label},n.name)),(0,s.jsx)("div",{className:"border-t border-slate-200 px-2 py-1.5",children:(0,s.jsx)("input",{type:"text",value:e,onChange:n=>{const r={...i.strategy.matrix};delete r[e],r[n.target.value]=t,c("strategy",{...i.strategy,matrix:r})},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Custom variable name",onClick:e=>e.stopPropagation()})})]})]}):(0,s.jsx)("input",{type:"text",value:e,onChange:n=>{const r={...i.strategy.matrix};delete r[e],r[n.target.value]=t,c("strategy",{...i.strategy,matrix:r})},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm font-medium",placeholder:"Variable name"})}),(0,s.jsx)("button",{type:"button",onClick:()=>{const t={...i.strategy.matrix};delete t[e],c("strategy",{...i.strategy,matrix:Object.keys(t).length>0?t:void 0})},className:"ml-2 rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[Array.isArray(t)&&t.map((t,n)=>{const r=String(t),a=k[`${e}-${n}`]??!1,l=null!==o;return(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[l?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>S(t=>({...t,[`${e}-${n}`]:!t[`${e}-${n}`]})),className:"w-24 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-sm text-left flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-200",children:[(0,s.jsx)("span",{className:"truncate",children:r}),(0,s.jsx)("span",{className:"text-slate-400 dark:text-slate-500 text-xs shrink-0 ml-1",children:""})]}),a&&(0,s.jsxs)("div",{className:"absolute z-10 w-32 mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded shadow-lg max-h-60 overflow-auto",children:[o.map(t=>(0,s.jsx)("button",{type:"button",onClick:()=>{const r={...i.strategy.matrix},o=[...r[e]??[]];o[n]=t,r[e]=o,c("strategy",{...i.strategy,matrix:r}),S(t=>({...t,[`${e}-${n}`]:!1}))},className:"w-full px-2 py-1 text-sm text-left hover:bg-slate-50 dark:hover:bg-slate-700 "+(t===r?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-slate-200"),children:t},t)),(0,s.jsx)("div",{className:"border-t border-slate-200 px-2 py-1",children:(0,s.jsx)("input",{type:"text",value:r,onChange:t=>{const r={...i.strategy.matrix},o=r[e]??[],s=[...o],a=Number(t.target.value);o.length>0&&"number"==typeof o[0]&&!Number.isNaN(a)&&""!==t.target.value.trim()?s[n]=a:s[n]=t.target.value,r[e]=s,c("strategy",{...i.strategy,matrix:r})},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Custom value",onClick:e=>e.stopPropagation()})})]})]}):(0,s.jsx)("input",{type:"text",value:r,onChange:t=>{const r={...i.strategy.matrix},o=r[e]??[],s=[...o],a=Number(t.target.value);o.length>0&&"number"==typeof o[0]&&!Number.isNaN(a)&&""!==t.target.value.trim()?s[n]=a:s[n]=t.target.value,r[e]=s,c("strategy",{...i.strategy,matrix:r})},className:"w-24 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Value"}),(0,s.jsx)("button",{type:"button",onClick:()=>{const t={...i.strategy.matrix},r=(t[e]??[]).filter((e,t)=>t!==n);r.length>0?t[e]=r:delete t[e],c("strategy",{...i.strategy,matrix:Object.keys(t).length>0?t:void 0})},className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]},n)}),(0,s.jsx)("button",{type:"button",onClick:()=>{const t={...i.strategy.matrix},n=[...t[e]??[],o&&o.length>0?o[0]:""];t[e]=n,c("strategy",{...i.strategy,matrix:t})},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add value"})]})]},e)}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>w(e=>({...e,__new__:!e.__new__})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 flex items-center justify-between",children:[(0,s.jsx)("span",{children:"+ Add matrix variable"}),(0,s.jsx)("span",{className:"text-slate-400 dark:text-slate-500",children:""})]}),x.__new__&&(0,s.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded shadow-lg max-h-60 overflow-auto",children:[Ml.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>{const t={...i.strategy.matrix};t[e.name]=[e.values[0]],c("strategy",{...i.strategy,matrix:t}),w(e=>({...e,__new__:!1}))},className:"w-full px-2 py-1.5 text-sm text-left hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-200",children:e.label},e.name)),(0,s.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-700 px-2 py-1",children:(0,s.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){const t=e.currentTarget,n={...i.strategy.matrix,[t.value]:[""]};c("strategy",{...i.strategy,matrix:n}),w(e=>({...e,__new__:!1})),t.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Custom variable name (Enter)",onClick:e=>e.stopPropagation()})})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 border-t border-slate-200 dark:border-slate-700 pt-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-900 dark:text-slate-200",children:[(0,s.jsx)("input",{type:"checkbox",checked:!1!==i.strategy["fail-fast"],onChange:e=>{c("strategy",{...i.strategy,"fail-fast":!!e.target.checked&&void 0})},className:"h-4 w-4 rounded border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400"}),(0,s.jsx)("span",{children:"Fail fast (default: true)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Max parallel:"}),(0,s.jsx)("input",{type:"number",value:i.strategy["max-parallel"]??"",onChange:e=>{const t=""===e.target.value?void 0:Number(e.target.value);c("strategy",{...i.strategy,"max-parallel":t})},className:"w-20 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"",min:"1"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Steps"}),(0,s.jsx)("button",{type:"button",onClick:u,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Add step"})]}),(0,s.jsx)("ul",{className:"mt-2 space-y-3",children:(i.steps??[]).map((e,t)=>(0,s.jsxs)("li",{className:"rounded border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50 p-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Step ",t+1]}),(0,s.jsx)("button",{type:"button",onClick:()=>f(t),className:"rounded p-0.5 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300","aria-label":`Remove step ${t+1}`,children:""})]}),(0,s.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,s.jsx)("input",{type:"text",value:e.name??"",onChange:e=>d(t,t=>({...t,name:e.target.value||void 0})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Step name"}),(0,s.jsx)("input",{type:"text",value:e.uses??"",onChange:e=>d(t,t=>({...t,uses:e.target.value||void 0})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"uses: actions/checkout@v4"}),e.uses&&(0,s.jsxs)("div",{className:"rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"With (action inputs)"}),(0,s.jsx)("button",{type:"button",onClick:()=>{e.with&&Object.keys(e.with).length>0?d(t,e=>({...e,with:void 0})):d(t,e=>({...e,with:{"":""}}))},className:"text-xs text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300",children:e.with&&Object.keys(e.with).length>0?"Remove":"Add"})]}),e.with&&Object.keys(e.with).length>0&&(0,s.jsxs)("div",{className:"space-y-1.5 mt-2",children:[Object.entries(e.with).map(([n,r],o)=>(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:o=>{const s={...e.with};delete s[n],s[o.target.value]=r,d(t,e=>({...e,with:Object.keys(s).length>0?s:void 0}))},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-xs",placeholder:"Input name"}),(0,s.jsx)("input",{type:"text",value:String(r),onChange:o=>{const s={...e.with},a=Number(o.target.value);"number"!=typeof r||Number.isNaN(a)||""===o.target.value.trim()?s[n]=o.target.value:s[n]=a,d(t,e=>({...e,with:s}))},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-xs",placeholder:"Value"}),(0,s.jsx)("button",{type:"button",onClick:()=>{const r={...e.with};delete r[n],d(t,e=>({...e,with:Object.keys(r).length>0?r:void 0}))},className:"rounded p-0.5 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]},o)),(0,s.jsx)("button",{type:"button",onClick:()=>{const n={...e.with,"":""};d(t,e=>({...e,with:n}))},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add input"})]})]}),(0,s.jsx)("textarea",{value:e.run??"",onChange:e=>d(t,t=>({...t,run:e.target.value||void 0})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm font-mono",placeholder:"run: ...",rows:2})]})]},t))})]})]}),o&&(0,s.jsx)("div",{className:"flex justify-center border-t border-slate-200 dark:border-slate-700 p-4",children:(0,s.jsx)("button",{type:"button",onClick:()=>o(t),className:"rounded border border-red-200 dark:border-red-800 bg-white dark:bg-slate-800 px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30","aria-label":`Delete job ${t}`,children:"Delete job"})})]}):null}const Ll=new Set(["branch_protection_rule","check_run","check_suite","discussion","discussion_comment","issue_comment","issues","label","merge_group","milestone","pull_request","pull_request_review","pull_request_review_comment","pull_request_target","registry_package","release","repository_dispatch","watch","workflow_run"]);function Tl(e){if(!e)return[];if("string"==typeof e)return[{event:e,config:{}}];if(Array.isArray(e))return e.flatMap(e=>"string"==typeof e?[{event:e,config:{}}]:"object"==typeof e&&null!==e?Object.entries(e).map(([e,t])=>({event:e,config:t??{}})):[]);if("object"==typeof e&&null!==e){const t=[];for(const[n,r]of Object.entries(e))if("schedule"===n&&Array.isArray(r))for(const e of r)"object"==typeof e&&null!==e&&"cron"in e?t.push({event:n,config:{cron:e.cron}}):t.push({event:n,config:{}});else t.push({event:n,config:r??{}});return t}return[]}const $l="shrink-0 text-purple-700 dark:text-purple-300";function zl({trigger:e,className:t=""}){const n=function(e){const{event:t,config:n}=e,r=function(e){const t=e.toLowerCase();return"push"===t?(0,s.jsx)(kl,{className:$l,size:14}):"pull_request"===t||"pull_request_target"===t?(0,s.jsx)(wl,{className:$l,size:14}):"schedule"===t?(0,s.jsx)(vl,{className:$l,size:14}):(0,s.jsx)(xl,{className:$l,size:14})}(t),o=[];return n.branches&&n.branches.length>0&&o.push({icon:r,label:1===n.branches.length?n.branches[0]:n.branches.join(", ")}),n.tags&&n.tags.length>0&&o.push({icon:r,label:1===n.tags.length?n.tags[0]:n.tags.join(", ")}),n.cron&&o.push({icon:r,label:n.cron}),n.types&&n.types.length>0&&o.push({icon:r,label:1===n.types.length?n.types[0]:n.types.join(", ")}),0===o.length&&o.push({icon:r,label:t}),o}(e),r=function(e){const{event:t,config:n}=e,r=[t];return n.branches&&n.branches.length>0&&r.push(`branches: ${n.branches.join(", ")}`),n.tags&&n.tags.length>0&&r.push(`tags: ${n.tags.join(", ")}`),n.paths&&n.paths.length>0&&r.push(`paths: ${n.paths.join(", ")}`),n.types&&n.types.length>0&&r.push(`types: ${n.types.join(", ")}`),r.join("  ")}(e);return(0,s.jsx)(s.Fragment,{children:n.map(({icon:e,label:n},o)=>(0,s.jsxs)("span",{className:`inline-flex items-center gap-1 rounded bg-purple-100 dark:bg-purple-900/30 px-1.5 py-0.5 text-xs font-medium text-purple-800 dark:text-purple-200 ${t}`,title:r,children:[e,(0,s.jsx)("span",{children:n})]},o))})}const Dl=(0,a.memo)(function(e){const{data:t,selected:n}=e,r=t;return(0,s.jsxs)("div",{className:`\n        min-w-[180px] rounded-lg border-2 bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/30 dark:to-indigo-900/30 px-3 py-2 shadow-sm\n        ${n?"border-purple-500 dark:border-purple-400 ring-2 ring-purple-200 dark:ring-purple-900":"border-purple-300 dark:border-purple-700 hover:border-purple-400 dark:hover:border-purple-600"}\n      `,children:[(0,s.jsx)("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:"Trigger"}),(0,s.jsx)("div",{className:"mt-1 flex flex-wrap items-center gap-1",children:0===r.triggers.length?(0,s.jsx)("span",{className:"rounded bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 text-xs italic text-slate-500 dark:text-slate-400",children:"No triggers"}):r.triggers.map((e,t)=>(0,s.jsx)(zl,{trigger:e},t))}),(0,s.jsx)(ga,{type:"source",position:ur.Right,className:"!h-2 !w-2 !border-2 !border-purple-400 dark:!border-purple-600 !bg-white dark:!bg-slate-800"})]})}),Rl=[{value:"push",label:"Push"},{value:"pull_request",label:"Pull Request"},{value:"pull_request_target",label:"Pull Request Target"},{value:"pull_request_review",label:"Pull Request Review"},{value:"pull_request_review_comment",label:"Pull Request Review Comment"},{value:"workflow_dispatch",label:"Workflow Dispatch"},{value:"repository_dispatch",label:"Repository Dispatch"},{value:"schedule",label:"Schedule (Cron)"},{value:"workflow_call",label:"Workflow Call"},{value:"workflow_run",label:"Workflow Run"},{value:"issues",label:"Issues"},{value:"issue_comment",label:"Issue Comment"},{value:"label",label:"Label"},{value:"milestone",label:"Milestone"},{value:"project",label:"Project"},{value:"project_card",label:"Project Card"},{value:"project_column",label:"Project Column"},{value:"release",label:"Release"},{value:"watch",label:"Watch"},{value:"create",label:"Create"},{value:"delete",label:"Delete"},{value:"fork",label:"Fork"},{value:"gollum",label:"Gollum (Wiki)"},{value:"page_build",label:"Page Build"},{value:"public",label:"Public"},{value:"status",label:"Status"},{value:"branch_protection_rule",label:"Branch Protection Rule"},{value:"check_run",label:"Check Run"},{value:"check_suite",label:"Check Suite"},{value:"discussion",label:"Discussion"},{value:"discussion_comment",label:"Discussion Comment"},{value:"merge_group",label:"Merge Group"},{value:"registry_package",label:"Registry Package"}];function Bl({workflow:e,onWorkflowChange:t,onClose:n}){const[r,o]=(0,a.useState)(()=>Tl(e.on)),i=(0,a.useRef)(e);i.current=e,(0,a.useEffect)(()=>{o(Tl(e.on))},[e.on]);const l=(0,a.useCallback)(e=>{o(e);const n=function(e){if(0===e.length)return{};const t=e.filter(e=>"schedule"===e.event),n=e.filter(e=>"schedule"!==e.event),r={};if(t.length>0&&(r.schedule=t.map(e=>({cron:e.config.cron||"0 0 * * *"}))),1===n.length){const e=n[0];0===Object.keys(e.config).length?r[e.event]={}:r[e.event]=e.config}else if(n.length>1){const e=n.map(e=>0===Object.keys(e.config).length?e.event:{[e.event]:e.config});return t.length>0?[...e,{schedule:t.map(e=>({cron:e.config.cron||"0 0 * * *"}))}]:e}if(t.length>0&&0===n.length)return r;if(1===n.length&&0===t.length){const e=n[0];return 0===Object.keys(e.config).length?e.event:{[e.event]:e.config}}return r}(e);t({...i.current,on:n})},[t]),c=(0,a.useCallback)(()=>{l([...r,{event:"push",config:{}}])},[r,l]),u=(0,a.useCallback)(e=>{l(r.filter((t,n)=>n!==e))},[r,l]),d=(0,a.useCallback)((e,t)=>{const n=[...r];n[e]=t(n[e]),l(n)},[r,l]),f=(0,a.useCallback)((e,t,n)=>{d(e,e=>({...e,config:{...e.config,[t]:n}}))},[d]),h=(0,a.useCallback)((e,t,n)=>{const o=r[e].config[t]??[];n&&!o.includes(n)&&f(e,t,[...o,n])},[r,f]),p=(0,a.useCallback)((e,t,n)=>{const o=r[e].config[t]??[];f(e,t,o.filter((e,t)=>t!==n))},[r,f]);return(0,s.jsxs)("aside",{className:"flex w-96 shrink-0 flex-col border-l border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm pr-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 px-4 py-2",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Workflow Triggers"}),(0,s.jsx)("button",{type:"button",onClick:n,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close panel",children:(0,s.jsx)("span",{className:"text-base leading-none",children:""})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Triggers"}),(0,s.jsx)("button",{type:"button",onClick:c,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add Trigger"})]}),0===r.length?(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"No triggers configured"}):(0,s.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>{return(0,s.jsxs)("div",{className:"rounded border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50 p-3 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Trigger ",t+1]}),(0,s.jsx)("button",{type:"button",onClick:()=>u(t),className:"rounded p-0.5 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300","aria-label":`Remove trigger ${t+1}`,children:""})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Event Type"}),(0,s.jsx)("select",{value:e.event,onChange:e=>d(t,t=>({...t,event:e.target.value,config:{}})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1.5 text-sm",children:Rl.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),("push"===e.event||"pull_request"===e.event)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Branches"}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(e.config.branches??[]).map((n,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:n=>{const o=[...e.config.branches??[]];o[r]=n.target.value,f(t,"branches",o)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"main"}),(0,s.jsx)("button",{type:"button",onClick:()=>p(t,"branches",r),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},r)),(0,s.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;h(t,"branches",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Press Enter to add branch"})]})]}),"push"===e.event&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Tags"}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(e.config.tags??[]).map((n,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:n=>{const o=[...e.config.tags??[]];o[r]=n.target.value,f(t,"tags",o)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"v*"}),(0,s.jsx)("button",{type:"button",onClick:()=>p(t,"tags",r),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},r)),(0,s.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;h(t,"tags",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Press Enter to add tag"})]})]}),(n=e.event,Ll.has(n)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Types (optional)"}),"repository_dispatch"===e.event&&(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Filter by custom event type sent via API"}),"release"===e.event&&(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"e.g. published, unpublished, created, prereleased, released"}),"pull_request"===e.event&&(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"e.g. opened, synchronize, closed, labeled, etc."}),"workflow_run"===e.event&&(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"e.g. completed, requested, in_progress"}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(e.config.types??[]).map((n,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:n=>{const o=[...e.config.types??[]];o[r]=n.target.value,f(t,"types",o)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"release"===e.event?"published":"repository_dispatch"===e.event?"deploy":"pull_request"===e.event?"opened":"workflow_run"===e.event?"completed":"activity_type"}),(0,s.jsx)("button",{type:"button",onClick:()=>p(t,"types",r),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},r)),(0,s.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;h(t,"types",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Press Enter to add type"})]})]})),("push"===e.event||"pull_request"===e.event)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Paths"}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(e.config.paths??[]).map((n,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:n=>{const o=[...e.config.paths??[]];o[r]=n.target.value,f(t,"paths",o)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"src/**"}),(0,s.jsx)("button",{type:"button",onClick:()=>p(t,"paths",r),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},r)),(0,s.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;h(t,"paths",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Press Enter to add path"})]})]}),("push"===e.event||"pull_request"===e.event)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Paths Ignore"}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(e.config.pathsIgnore??[]).map((n,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:n=>{const o=[...e.config.pathsIgnore??[]];o[r]=n.target.value,f(t,"pathsIgnore",o)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"docs/**"}),(0,s.jsx)("button",{type:"button",onClick:()=>p(t,"pathsIgnore",r),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},r)),(0,s.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;h(t,"pathsIgnore",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Press Enter to add path"})]})]}),"schedule"===e.event&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Cron Expression"}),(0,s.jsx)("input",{type:"text",value:e.config.cron??"",onChange:e=>f(t,"cron",e.target.value),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1.5 text-sm font-mono",placeholder:"0 0 * * *"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:'Format: minute hour day month weekday (e.g., "0 0 * * *" for daily at midnight)'})]})]},t);var n})})]})})]})}function Vl({workflow:e,onWorkflowChange:t,onClose:n}){const r=(0,a.useCallback)(n=>{t(n(e))},[e,t]),o=(0,a.useCallback)((e,t)=>{r(n=>({...n,[e]:t}))},[r]),i=(0,a.useMemo)(()=>e.env??{},[e.env]),l=(0,a.useCallback)((e,t)=>{const n={...i};""===t?delete n[e]:n[e]=t,o("env",Object.keys(n).length>0?n:void 0)},[i,o]),c=(0,a.useCallback)(e=>{const t={...i};delete t[e],o("env",Object.keys(t).length>0?t:void 0)},[i,o]);return(0,s.jsxs)("aside",{className:"flex w-96 shrink-0 flex-col border-l border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm pr-5",children:[(0,s.jsxs)("div",{className:"flex flex-col border-b border-slate-200 dark:border-slate-700 px-4 py-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Workflow config"}),(0,s.jsx)("button",{type:"button",onClick:n,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close panel",children:(0,s.jsx)("span",{className:"text-base leading-none",children:""})})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:"Name, run name, and environment variables"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Workflow name"}),(0,s.jsx)("input",{type:"text",value:e.name??"",onChange:e=>o("name",e.target.value||void 0),className:"mt-1 w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1.5 text-sm",placeholder:"Untitled Workflow"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Run name"}),(0,s.jsx)("input",{type:"text",value:e["run-name"]??"",onChange:e=>o("run-name",e.target.value||void 0),className:"mt-1 w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1.5 text-sm",placeholder:"Run name expression"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Environment Variables"}),(0,s.jsx)("button",{type:"button",onClick:()=>{const e={...i,"":""};o("env",e)},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add variable"})]}),0===Object.keys(i).length?(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"No environment variables configured"}):(0,s.jsx)("div",{className:"space-y-1.5",children:Object.entries(i).map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:n=>{const r={...i};delete r[e],r[n.target.value]=t,o("env",Object.keys(r).length>0?r:void 0)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Variable name"}),(0,s.jsx)("input",{type:"text",value:t,onChange:t=>l(e,t.target.value),className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-2 py-1 text-sm",placeholder:"Value"}),(0,s.jsx)("button",{type:"button",onClick:()=>c(e),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]},e))})]})]})]})}function Fl({onClose:e,onLoad:t}){const[n,r]=(0,a.useState)(""),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{o.current?.focus()},[]),(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 dark:bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"paste-dialog-title",onClick:e,children:(0,s.jsxs)("div",{className:"w-full max-w-2xl rounded-lg bg-white dark:bg-slate-800 p-4 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h2",{id:"paste-dialog-title",className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Paste YAML"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Paste your GitHub Actions workflow YAML below, then click Load."}),(0,s.jsx)("textarea",{ref:o,value:n,onChange:e=>r(e.target.value),className:"mt-3 w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 p-3 font-mono text-sm",rows:16,placeholder:"name: My Workflow\non: push\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - run: echo hello","aria-label":"Workflow YAML content"}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:()=>{t(n),e()},className:"rounded bg-slate-800 dark:bg-slate-700 px-3 py-1.5 text-sm text-white dark:text-slate-200 hover:bg-slate-700 dark:hover:bg-slate-600",children:"Load"})]})]})})}const Hl=Symbol.for("yaml.alias"),Kl=Symbol.for("yaml.document"),ql=Symbol.for("yaml.map"),Wl=Symbol.for("yaml.pair"),Ul=Symbol.for("yaml.scalar"),Yl=Symbol.for("yaml.seq"),Xl=Symbol.for("yaml.node.type"),Zl=e=>!!e&&"object"==typeof e&&e[Xl]===Hl,Ql=e=>!!e&&"object"==typeof e&&e[Xl]===Kl,Gl=e=>!!e&&"object"==typeof e&&e[Xl]===ql,Jl=e=>!!e&&"object"==typeof e&&e[Xl]===Wl,ec=e=>!!e&&"object"==typeof e&&e[Xl]===Ul,tc=e=>!!e&&"object"==typeof e&&e[Xl]===Yl;function nc(e){if(e&&"object"==typeof e)switch(e[Xl]){case ql:case Yl:return!0}return!1}function rc(e){if(e&&"object"==typeof e)switch(e[Xl]){case Hl:case ql:case Ul:case Yl:return!0}return!1}const oc=e=>(ec(e)||nc(e))&&!!e.anchor,sc=Symbol("break visit"),ac=Symbol("skip children"),ic=Symbol("remove node");function lc(e,t){const n=fc(t);Ql(e)?cc(null,e.contents,n,Object.freeze([e]))===ic&&(e.contents=null):cc(null,e,n,Object.freeze([]))}function cc(e,t,n,r){const o=hc(e,t,n,r);if(rc(o)||Jl(o))return pc(e,r,o),cc(e,o,n,r);if("symbol"!=typeof o)if(nc(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const o=cc(e,t.items[e],n,r);if("number"==typeof o)e=o-1;else{if(o===sc)return sc;o===ic&&(t.items.splice(e,1),e-=1)}}}else if(Jl(t)){r=Object.freeze(r.concat(t));const e=cc("key",t.key,n,r);if(e===sc)return sc;e===ic&&(t.key=null);const o=cc("value",t.value,n,r);if(o===sc)return sc;o===ic&&(t.value=null)}return o}async function uc(e,t){const n=fc(t);Ql(e)?await dc(null,e.contents,n,Object.freeze([e]))===ic&&(e.contents=null):await dc(null,e,n,Object.freeze([]))}async function dc(e,t,n,r){const o=await hc(e,t,n,r);if(rc(o)||Jl(o))return pc(e,r,o),dc(e,o,n,r);if("symbol"!=typeof o)if(nc(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const o=await dc(e,t.items[e],n,r);if("number"==typeof o)e=o-1;else{if(o===sc)return sc;o===ic&&(t.items.splice(e,1),e-=1)}}}else if(Jl(t)){r=Object.freeze(r.concat(t));const e=await dc("key",t.key,n,r);if(e===sc)return sc;e===ic&&(t.key=null);const o=await dc("value",t.value,n,r);if(o===sc)return sc;o===ic&&(t.value=null)}return o}function fc(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function hc(e,t,n,r){return"function"==typeof n?n(e,t,r):Gl(t)?n.Map?.(e,t,r):tc(t)?n.Seq?.(e,t,r):Jl(t)?n.Pair?.(e,t,r):ec(t)?n.Scalar?.(e,t,r):Zl(t)?n.Alias?.(e,t,r):void 0}function pc(e,t,n){const r=t[t.length-1];if(nc(r))r.items[e]=n;else if(Jl(r))"key"===e?r.key=n:r.value=n;else{if(!Ql(r)){const e=Zl(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}r.contents=n}}lc.BREAK=sc,lc.SKIP=ac,lc.REMOVE=ic,uc.BREAK=sc,uc.SKIP=ac,uc.REMOVE=ic;const mc={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},gc=e=>e.replace(/[!,[\]{}]/g,e=>mc[e]);class yc{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},yc.defaultYaml,e),this.tags=Object.assign({},yc.defaultTags,t)}clone(){const e=new yc(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new yc(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:yc.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},yc.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:yc.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},yc.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,r]=n;return this.tags[e]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1)}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,r]=e.match(/^(.*!)([^!]*)$/s);r||t(`The ${e} tag has no suffix`);const o=this.tags[n];if(o)try{return o+decodeURIComponent(r)}catch(e){return t(String(e)),null}return"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+gc(e.substring(n.length));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(e&&n.length>0&&rc(e.contents)){const t={};lc(e.contents,(e,n)=>{rc(n)&&n.tag&&(t[n.tag]=!0)}),r=Object.keys(t)}else r=[];for(const[o,s]of n)"!!"===o&&"tag:yaml.org,2002:"===s||e&&!r.some(e=>e.startsWith(s))||t.push(`%TAG ${o} ${s}`);return t.join("\n")}}function bc(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function vc(e){const t=new Set;return lc(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function xc(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}function wc(e,t,n,r){if(r&&"object"==typeof r)if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t){const n=r[t],o=wc(e,r,String(t),n);void 0===o?delete r[t]:o!==n&&(r[t]=o)}else if(r instanceof Map)for(const t of Array.from(r.keys())){const n=r.get(t),o=wc(e,r,t,n);void 0===o?r.delete(t):o!==n&&r.set(t,o)}else if(r instanceof Set)for(const t of Array.from(r)){const n=wc(e,r,t,t);void 0===n?r.delete(t):n!==t&&(r.delete(t),r.add(n))}else for(const[t,n]of Object.entries(r)){const o=wc(e,r,t,n);void 0===o?delete r[t]:o!==n&&(r[t]=o)}return e.call(t,n,r)}function kc(e,t,n){if(Array.isArray(e))return e.map((e,t)=>kc(e,String(t),n));if(e&&"function"==typeof e.toJSON){if(!n||!oc(e))return e.toJSON(t,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(e,r),n.onCreate=e=>{r.res=e,delete n.onCreate};const o=e.toJSON(t,n);return n.onCreate&&n.onCreate(o),o}return"bigint"!=typeof e||n?.keep?e:Number(e)}yc.defaultYaml={explicit:!1,version:"1.2"},yc.defaultTags={"!!":"tag:yaml.org,2002:"};class Sc{constructor(e){Object.defineProperty(this,Xl,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:r,reviver:o}={}){if(!Ql(e))throw new TypeError("A document argument is required");const s={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},a=kc(this,"",s);if("function"==typeof r)for(const{count:e,res:t}of s.anchors.values())r(t,e);return"function"==typeof o?wc(o,{"":a},"",a):a}}class Nc extends Sc{constructor(e){super(Hl),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,t){let n,r;t?.aliasResolveCache?n=t.aliasResolveCache:(n=[],lc(e,{Node:(e,t)=>{(Zl(t)||oc(t))&&n.push(t)}}),t&&(t.aliasResolveCache=n));for(const e of n){if(e===this)break;e.anchor===this.source&&(r=e)}return r}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:o}=t,s=this.resolve(r,t);if(!s){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}let a=n.get(s);if(a||(kc(s,null,t),a=n.get(s)),void 0===a?.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(o>=0&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=Ec(r,s,n)),a.count*a.aliasCount>o))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return a.res}toString(e,t,n){const r=`*${this.source}`;if(e){if(bc(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${r} `}return r}}function Ec(e,t,n){if(Zl(t)){const r=t.resolve(e),o=n&&r&&n.get(r);return o?o.count*o.aliasCount:0}if(nc(t)){let r=0;for(const o of t.items){const t=Ec(e,o,n);t>r&&(r=t)}return r}if(Jl(t)){const r=Ec(e,t.key,n),o=Ec(e,t.value,n);return Math.max(r,o)}return 1}const Cc=e=>!e||"function"!=typeof e&&"object"!=typeof e;class _c extends Sc{constructor(e){super(Ul),this.value=e}toJSON(e,t){return t?.keep?this.value:kc(this.value,e,t)}toString(){return String(this.value)}}function jc(e,t,n){if(Ql(e)&&(e=e.contents),rc(e))return e;if(Jl(e)){const t=n.schema[ql].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:r,onAnchor:o,onTagObj:s,schema:a,sourceObjects:i}=n;let l;if(r&&e&&"object"==typeof e){if(l=i.get(e),l)return l.anchor??(l.anchor=o(e)),new Nc(l.anchor);l={anchor:null,node:null},i.set(e,l)}t?.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let c=function(e,t,n){if(t){const e=n.filter(e=>e.tag===t),r=e.find(e=>!e.format)??e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find(t=>t.identify?.(e)&&!t.format)}(e,t,a.tags);if(!c){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new _c(e);return l&&(l.node=t),t}c=e instanceof Map?a[ql]:Symbol.iterator in Object(e)?a[Yl]:a[ql]}s&&(s(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,e,n):"function"==typeof c?.nodeClass?.from?c.nodeClass.from(n.schema,e,n):new _c(e);return t?u.tag=t:c.default||(u.tag=c.tag),l&&(l.node=u),u}function Mc(e,t,n){let r=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=r,r=e}else r=new Map([[n,r]])}return jc(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}_c.BLOCK_FOLDED="BLOCK_FOLDED",_c.BLOCK_LITERAL="BLOCK_LITERAL",_c.PLAIN="PLAIN",_c.QUOTE_DOUBLE="QUOTE_DOUBLE",_c.QUOTE_SINGLE="QUOTE_SINGLE";const Oc=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class Pc extends Sc{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(t=>rc(t)||Jl(t)?t.clone(e):t),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Oc(e))this.add(t);else{const[n,...r]=e,o=this.get(n,!0);if(nc(o))o.addIn(r,t);else{if(void 0!==o||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,Mc(this.schema,r,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const r=this.get(t,!0);if(nc(r))return r.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...r]=e,o=this.get(n,!0);return 0===r.length?!t&&ec(o)?o.value:o:nc(o)?o.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!Jl(t))return!1;const n=t.value;return null==n||e&&ec(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const r=this.get(t,!0);return!!nc(r)&&r.hasIn(n)}setIn(e,t){const[n,...r]=e;if(0===r.length)this.set(n,t);else{const e=this.get(n,!0);if(nc(e))e.setIn(r,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,Mc(this.schema,r,t))}}}}const Ac=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Ic(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const Lc=(e,t,n)=>e.endsWith("\n")?Ic(n,t):n.includes("\n")?"\n"+Ic(n,t):(e.endsWith(" ")?"":" ")+n,Tc="flow",$c="block",zc="quoted";function Dc(e,t,n="flow",{indentAtStart:r,lineWidth:o=80,minContentWidth:s=20,onFold:a,onOverflow:i}={}){if(!o||o<0)return e;o<s&&(s=0);const l=Math.max(1+s,1+o-t.length);if(e.length<=l)return e;const c=[],u={};let d,f,h=o-t.length;"number"==typeof r&&(r>o-Math.max(2,s)?c.push(0):h=o-r);let p=!1,m=-1,g=-1,y=-1;n===$c&&(m=Rc(e,m,t.length),-1!==m&&(h=m+l));for(let r;r=e[m+=1];){if(n===zc&&"\\"===r){switch(g=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}y=m}if("\n"===r)n===$c&&(m=Rc(e,m,t.length)),h=m+t.length+l,d=void 0;else{if(" "===r&&f&&" "!==f&&"\n"!==f&&"\t"!==f){const t=e[m+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(d=m)}if(m>=h)if(d)c.push(d),h=d+l,d=void 0;else if(n===zc){for(;" "===f||"\t"===f;)f=r,r=e[m+=1],p=!0;const t=m>y+1?m-2:g-1;if(u[t])return e;c.push(t),u[t]=!0,h=t+l,d=void 0}else p=!0}f=r}if(p&&i&&i(),0===c.length)return e;a&&a();let b=e.slice(0,c[0]);for(let r=0;r<c.length;++r){const o=c[r],s=c[r+1]||e.length;0===o?b=`\n${t}${e.slice(0,s)}`:(n===zc&&u[o]&&(b+=`${e[o]}\\`),b+=`\n${t}${e.slice(o+1,s)}`)}return b}function Rc(e,t,n){let r=t,o=t+1,s=e[o];for(;" "===s||"\t"===s;)if(t<o+n)s=e[++t];else{do{s=e[++t]}while(s&&"\n"!==s);r=t,o=t+1,s=e[o]}return r}const Bc=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),Vc=e=>/^(%|---|\.\.\.)/m.test(e);function Fc(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,o=t.options.doubleQuotedMinMultiLineLength,s=t.indent||(Vc(e)?"  ":"");let a="",i=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(a+=n.slice(i,e)+"\\ ",e+=1,i=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{a+=n.slice(i,e);const t=n.substr(e+2,4);switch(t){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:"00"===t.substr(0,2)?a+="\\x"+t.substr(2):a+=n.substr(e,6)}e+=5,i=e+1}break;case"n":if(r||'"'===n[e+2]||n.length<o)e+=1;else{for(a+=n.slice(i,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)a+="\n",e+=2;a+=s," "===n[e+2]&&(a+="\\"),e+=1,i=e+1}break;default:e+=1}return a=i?a+n.slice(i):n,r?a:Dc(a,s,zc,Bc(t,!1))}function Hc(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return Fc(e,t);const n=t.indent||(Vc(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?r:Dc(r,n,Tc,Bc(t,!1))}function Kc(e,t){const{singleQuote:n}=t.options;let r;if(!1===n)r=Fc;else{const t=e.includes('"'),o=e.includes("'");r=t&&!o?Hc:o&&!t?Fc:n?Hc:Fc}return r(e,t)}let qc;try{qc=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{qc=/\n+(?!\n|$)/g}function Wc({comment:e,type:t,value:n},r,o,s){const{blockQuote:a,commentString:i,lineWidth:l}=r.options;if(!a||/\n[\t ]+$/.test(n))return Kc(n,r);const c=r.indent||(r.forceBlockIndent||Vc(n)?"  ":""),u="literal"===a||"folded"!==a&&t!==_c.BLOCK_FOLDED&&(t===_c.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const r=t-n,o=e.length;if(o<=r)return!1;for(let t=0,n=0;t<o;++t)if("\n"===e[t]){if(t-n>r)return!0;if(n=t+1,o-n<=r)return!1}return!0}(n,l,c.length));if(!n)return u?"|\n":">\n";let d,f;for(f=n.length;f>0;--f){const e=n[f-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let h=n.substring(f);const p=h.indexOf("\n");-1===p?d="-":n===h||p!==h.length-1?(d="+",s&&s()):d="",h&&(n=n.slice(0,-h.length),"\n"===h[h.length-1]&&(h=h.slice(0,-1)),h=h.replace(qc,`$&${c}`));let m,g=!1,y=-1;for(m=0;m<n.length;++m){const e=n[m];if(" "===e)g=!0;else{if("\n"!==e)break;y=m}}let b=n.substring(0,y<m?y+1:m);b&&(n=n.substring(b.length),b=b.replace(/\n+/g,`$&${c}`));let v=(g?c?"2":"1":"")+d;if(e&&(v+=" "+i(e.replace(/ ?[\r\n]+/g," ")),o&&o()),!u){const e=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let o=!1;const s=Bc(r,!0);"folded"!==a&&t!==_c.BLOCK_FOLDED&&(s.onOverflow=()=>{o=!0});const i=Dc(`${b}${e}${h}`,c,$c,s);if(!o)return`>${v}\n${c}${i}`}return`|${v}\n${c}${b}${n=n.replace(/\n+/g,`$&${c}`)}${h}`}function Uc(e,t,n,r){const{implicitKey:o,inFlow:s}=t,a="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:i}=e;i!==_c.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(i=_c.QUOTE_DOUBLE);const l=e=>{switch(e){case _c.BLOCK_FOLDED:case _c.BLOCK_LITERAL:return o||s?Kc(a.value,t):Wc(a,t,n,r);case _c.QUOTE_DOUBLE:return Fc(a.value,t);case _c.QUOTE_SINGLE:return Hc(a.value,t);case _c.PLAIN:return function(e,t,n,r){const{type:o,value:s}=e,{actualString:a,implicitKey:i,indent:l,indentStep:c,inFlow:u}=t;if(i&&s.includes("\n")||u&&/[[\]{},]/.test(s))return Kc(s,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return i||u||!s.includes("\n")?Kc(s,t):Wc(e,t,n,r);if(!i&&!u&&o!==_c.PLAIN&&s.includes("\n"))return Wc(e,t,n,r);if(Vc(s)){if(""===l)return t.forceBlockIndent=!0,Wc(e,t,n,r);if(i&&l===c)return Kc(s,t)}const d=s.replace(/\n+/g,`$&\n${l}`);if(a){const e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(d),{compat:n,tags:r}=t.doc.schema;if(r.some(e)||n?.some(e))return Kc(s,t)}return i?d:Dc(d,l,Tc,Bc(t,!1))}(a,t,n,r);default:return null}};let c=l(i);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,r=o&&e||n;if(c=l(r),null===c)throw new Error(`Unsupported default string type ${r}`)}return c}function Yc(e,t){const n=Object.assign({blockQuote:!0,commentString:Ac,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function Xc(e,t,n,r){if(Jl(e))return e.toString(t,n,r);if(Zl(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let o;const s=rc(e)?e:t.doc.createNode(e,{onTagObj:e=>o=e});o??(o=function(e,t){if(t.tag){const n=e.filter(e=>e.tag===t.tag);if(n.length>0)return n.find(e=>e.format===t.format)??n[0]}let n,r;if(ec(t)){r=t.value;let o=e.filter(e=>e.identify?.(r));if(o.length>1){const e=o.filter(e=>e.test);e.length>0&&(o=e)}n=o.find(e=>e.format===t.format)??o.find(e=>!e.format)}else r=t,n=e.find(e=>e.nodeClass&&r instanceof e.nodeClass);if(!n)throw new Error(`Tag not resolved for ${r?.constructor?.name??(null===r?"null":typeof r)} value`);return n}(t.doc.schema.tags,s));const a=function(e,t,{anchors:n,doc:r}){if(!r.directives)return"";const o=[],s=(ec(e)||nc(e))&&e.anchor;s&&bc(s)&&(n.add(s),o.push(`&${s}`));const a=e.tag??(t.default?null:t.tag);return a&&o.push(r.directives.tagString(a)),o.join(" ")}(s,o,t);a.length>0&&(t.indentAtStart=(t.indentAtStart??0)+a.length+1);const i="function"==typeof o.stringify?o.stringify(s,t,n,r):ec(s)?Uc(s,t,n,r):s.toString(t,n,r);return a?ec(s)||"{"===i[0]||"["===i[0]?`${a} ${i}`:`${a}\n${t.indent}${i}`:i}function Zc(e,t){"debug"!==e&&"warn"!==e||console.warn(t)}const Qc="<<",Gc={identify:e=>e===Qc||"symbol"==typeof e&&e.description===Qc,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new _c(Symbol(Qc)),{addToJSMap:Jc}),stringify:()=>Qc};function Jc(e,t,n){if(n=e&&Zl(n)?n.resolve(e.doc):n,tc(n))for(const r of n.items)eu(e,t,r);else if(Array.isArray(n))for(const r of n)eu(e,t,r);else eu(e,t,n)}function eu(e,t,n){const r=e&&Zl(n)?n.resolve(e.doc):n;if(!Gl(r))throw new Error("Merge sources must be maps or map aliases");const o=r.toJSON(null,e,Map);for(const[e,n]of o)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function tu(e,t,{key:n,value:r}){if(rc(n)&&n.addToJSMap)n.addToJSMap(e,t,r);else if(((e,t)=>(Gc.identify(t)||ec(t)&&(!t.type||t.type===_c.PLAIN)&&Gc.identify(t.value))&&e?.doc.schema.tags.some(e=>e.tag===Gc.tag&&e.default))(e,n))Jc(e,t,r);else{const o=kc(n,"",e);if(t instanceof Map)t.set(o,kc(r,o,e));else if(t instanceof Set)t.add(o);else{const s=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(rc(e)&&n?.doc){const t=Yc(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const r=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(r);e.length>40&&(e=e.substring(0,36)+'..."'),Zc(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(t)}(n,o,e),a=kc(r,s,e);s in t?Object.defineProperty(t,s,{value:a,writable:!0,enumerable:!0,configurable:!0}):t[s]=a}}return t}function nu(e,t,n){const r=jc(e,void 0,n),o=jc(t,void 0,n);return new ru(r,o)}class ru{constructor(e,t=null){Object.defineProperty(this,Xl,{value:Wl}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return rc(t)&&(t=t.clone(e)),rc(n)&&(n=n.clone(e)),new ru(t,n)}toJSON(e,t){return tu(t,t?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,r,o){const{allNullValues:s,doc:a,indent:i,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:d}}=n;let f=rc(e)&&e.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(nc(e)||!rc(e)&&"object"==typeof e)throw new Error("With simple keys, collection cannot be used as a key value")}let h=!d&&(!e||f&&null==t&&!n.inFlow||nc(e)||(ec(e)?e.type===_c.BLOCK_FOLDED||e.type===_c.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!h&&(d||!s),indent:i+l});let p,m,g,y=!1,b=!1,v=Xc(e,n,()=>y=!0,()=>b=!0);if(!h&&!n.inFlow&&v.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(n.inFlow){if(s||null==t)return y&&r&&r(),""===v?"?":h?`? ${v}`:v}else if(s&&!d||null==t&&h)return v=`? ${v}`,f&&!y?v+=Lc(v,n.indent,c(f)):b&&o&&o(),v;y&&(f=null),h?(f&&(v+=Lc(v,n.indent,c(f))),v=`? ${v}\n${i}:`):(v=`${v}:`,f&&(v+=Lc(v,n.indent,c(f)))),rc(t)?(p=!!t.spaceBefore,m=t.commentBefore,g=t.comment):(p=!1,m=null,g=null,t&&"object"==typeof t&&(t=a.createNode(t))),n.implicitKey=!1,h||f||!ec(t)||(n.indentAtStart=v.length+1),b=!1,u||!(l.length>=2)||n.inFlow||h||!tc(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let x=!1;const w=Xc(t,n,()=>x=!0,()=>b=!0);let k=" ";if(f||p||m)k=p?"\n":"",m&&(k+=`\n${Ic(c(m),n.indent)}`),""!==w||n.inFlow?k+=`\n${n.indent}`:"\n"===k&&g&&(k="\n\n");else if(!h&&nc(t)){const e=w[0],r=w.indexOf("\n"),o=-1!==r,s=n.inFlow??t.flow??0===t.items.length;if(o||!s){let t=!1;if(o&&("&"===e||"!"===e)){let n=w.indexOf(" ");"&"===e&&-1!==n&&n<r&&"!"===w[n+1]&&(n=w.indexOf(" ",n+1)),(-1===n||r<n)&&(t=!0)}t||(k=`\n${n.indent}`)}}else""!==w&&"\n"!==w[0]||(k="");return v+=k+w,n.inFlow?x&&r&&r():g&&!x?v+=Lc(v,n.indent,c(g)):b&&o&&o(),v}(this,e,t,n):JSON.stringify(this)}}function ou(e,t,n){return(t.inFlow??e.flow?au:su)(e,t,n)}function su({comment:e,items:t},n,{blockItemPrefix:r,flowChars:o,itemIndent:s,onChompKeep:a,onComment:i}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:s,type:null});let d=!1;const f=[];for(let e=0;e<t.length;++e){const o=t[e];let a=null;if(rc(o))!d&&o.spaceBefore&&f.push(""),iu(n,f,o.commentBefore,d),o.comment&&(a=o.comment);else if(Jl(o)){const e=rc(o.key)?o.key:null;e&&(!d&&e.spaceBefore&&f.push(""),iu(n,f,e.commentBefore,d))}d=!1;let i=Xc(o,u,()=>a=null,()=>d=!0);a&&(i+=Lc(i,s,c(a))),d&&a&&(d=!1),f.push(r+i)}let h;if(0===f.length)h=o.start+o.end;else{h=f[0];for(let e=1;e<f.length;++e){const t=f[e];h+=t?`\n${l}${t}`:"\n"}}return e?(h+="\n"+Ic(c(e),l),i&&i()):d&&a&&a(),h}function au({items:e},t,{flowChars:n,itemIndent:r}){const{indent:o,indentStep:s,flowCollectionPadding:a,options:{commentString:i}}=t;r+=s;const l=Object.assign({},t,{indent:r,inFlow:!0,type:null});let c=!1,u=0;const d=[];for(let n=0;n<e.length;++n){const o=e[n];let s=null;if(rc(o))o.spaceBefore&&d.push(""),iu(t,d,o.commentBefore,!1),o.comment&&(s=o.comment);else if(Jl(o)){const e=rc(o.key)?o.key:null;e&&(e.spaceBefore&&d.push(""),iu(t,d,e.commentBefore,!1),e.comment&&(c=!0));const n=rc(o.value)?o.value:null;n?(n.comment&&(s=n.comment),n.commentBefore&&(c=!0)):null==o.value&&e?.comment&&(s=e.comment)}s&&(c=!0);let a=Xc(o,l,()=>s=null);n<e.length-1&&(a+=","),s&&(a+=Lc(a,r,i(s))),!c&&(d.length>u||a.includes("\n"))&&(c=!0),d.push(a),u=d.length}const{start:f,end:h}=n;if(0===d.length)return f+h;if(!c){const e=d.reduce((e,t)=>e+t.length+2,2);c=t.options.lineWidth>0&&e>t.options.lineWidth}if(c){let e=f;for(const t of d)e+=t?`\n${s}${o}${t}`:"\n";return`${e}\n${o}${h}`}return`${f}${a}${d.join(" ")}${a}${h}`}function iu({indent:e,options:{commentString:t}},n,r,o){if(r&&o&&(r=r.replace(/^\n+/,"")),r){const o=Ic(t(r),e);n.push(o.trimStart())}}function lu(e,t){const n=ec(t)?t.value:t;for(const r of e)if(Jl(r)){if(r.key===t||r.key===n)return r;if(ec(r.key)&&r.key.value===n)return r}}class cu extends Pc{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(ql,e),this.items=[]}static from(e,t,n){const{keepUndefined:r,replacer:o}=n,s=new this(e),a=(e,a)=>{if("function"==typeof o)a=o.call(t,e,a);else if(Array.isArray(o)&&!o.includes(e))return;(void 0!==a||r)&&s.items.push(nu(e,a,n))};if(t instanceof Map)for(const[e,n]of t)a(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))a(e,t[e]);return"function"==typeof e.sortMapEntries&&s.items.sort(e.sortMapEntries),s}add(e,t){let n;n=Jl(e)?e:e&&"object"==typeof e&&"key"in e?new ru(e.key,e.value):new ru(e,e?.value);const r=lu(this.items,n.key),o=this.schema?.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);ec(r.value)&&Cc(n.value)?r.value.value=n.value:r.value=n.value}else if(o){const e=this.items.findIndex(e=>o(n,e)<0);-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=lu(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=lu(this.items,e),r=n?.value;return(!t&&ec(r)?r.value:r)??void 0}has(e){return!!lu(this.items,e)}set(e,t){this.add(new ru(e,t),!0)}toJSON(e,t,n){const r=n?new n:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(r);for(const e of this.items)tu(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!Jl(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ou(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const uu={collection:"map",default:!0,nodeClass:cu,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(Gl(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,n)=>cu.from(e,t,n)};class du extends Pc{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Yl,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=fu(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){const n=fu(e);if("number"!=typeof n)return;const r=this.items[n];return!t&&ec(r)?r.value:r}has(e){const t=fu(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=fu(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];ec(r)&&Cc(t)?r.value=t:this.items[n]=t}toJSON(e,t){const n=[];t?.onCreate&&t.onCreate(n);let r=0;for(const e of this.items)n.push(kc(e,String(r++),t));return n}toString(e,t,n){return e?ou(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){const{replacer:r}=n,o=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let s of t){if("function"==typeof r){const n=t instanceof Set?s:String(e++);s=r.call(t,n,s)}o.items.push(jc(s,void 0,n))}}return o}}function fu(e){let t=ec(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const hu={collection:"seq",default:!0,nodeClass:du,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(tc(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,n)=>du.from(e,t,n)},pu={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,r)=>Uc(e,t=Object.assign({actualString:!0},t),n,r)},mu={identify:e=>null==e,createNode:()=>new _c(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new _c(null),stringify:({source:e},t)=>"string"==typeof e&&mu.test.test(e)?e:t.options.nullStr},gu={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new _c("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},n)=>e&&gu.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?n.options.trueStr:n.options.falseStr};function yu({format:e,minFractionDigits:t,tag:n,value:r}){if("bigint"==typeof r)return String(r);const o="number"==typeof r?r:Number(r);if(!isFinite(o))return isNaN(o)?".nan":o<0?"-.inf":".inf";let s=Object.is(r,-0)?"-0":JSON.stringify(r);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(s)){let e=s.indexOf(".");e<0&&(e=s.length,s+=".");let n=t-(s.length-e-1);for(;n-- >0;)s+="0"}return s}const bu={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:yu},vu={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():yu(e)}},xu={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new _c(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:yu},wu=e=>"bigint"==typeof e||Number.isInteger(e),ku=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function Su(e,t,n){const{value:r}=e;return wu(r)&&r>=0?n+r.toString(t):yu(e)}const Nu={identify:e=>wu(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>ku(e,2,8,n),stringify:e=>Su(e,8,"0o")},Eu={identify:wu,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>ku(e,0,10,n),stringify:yu},Cu={identify:e=>wu(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>ku(e,2,16,n),stringify:e=>Su(e,16,"0x")},_u=[uu,hu,pu,mu,gu,Nu,Eu,Cu,bu,vu,xu];function ju(e){return"bigint"==typeof e||Number.isInteger(e)}const Mu=({value:e})=>JSON.stringify(e),Ou=[{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Mu},{identify:e=>null==e,createNode:()=>new _c(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Mu},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>"true"===e,stringify:Mu},{identify:ju,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>ju(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Mu}],Pu=[uu,hu].concat(Ou,{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),Au={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,o,s){if(!n)return"";const a=n;let i;if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<a.length;++t)e+=String.fromCharCode(a[t]);i=btoa(e)}if(t??(t=_c.BLOCK_LITERAL),t!==_c.QUOTE_DOUBLE){const e=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(i.length/e),o=new Array(n);for(let t=0,r=0;t<n;++t,r+=e)o[t]=i.substr(r,e);i=o.join(t===_c.BLOCK_LITERAL?"\n":" ")}return Uc({comment:e,type:t,value:i},r,o,s)}};function Iu(e,t){if(tc(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!Jl(r)){if(Gl(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const e=r.items[0]||new ru(new _c(null));if(r.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${r.commentBefore}\n${e.key.commentBefore}`:r.commentBefore),r.comment){const t=e.value??e.key;t.comment=t.comment?`${r.comment}\n${t.comment}`:r.comment}r=e}e.items[n]=Jl(r)?r:new ru(r)}}else t("Expected a sequence for this tag");return e}function Lu(e,t,n){const{replacer:r}=n,o=new du(e);o.tag="tag:yaml.org,2002:pairs";let s=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let a,i;if("function"==typeof r&&(e=r.call(t,String(s++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);a=e[0],i=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected tuple with one key, not ${t.length} keys`);a=t[0],i=e[a]}else a=e;o.items.push(nu(a,i,n))}return o}const Tu={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Iu,createNode:Lu};class $u extends du{constructor(){super(),this.add=cu.prototype.add.bind(this),this.delete=cu.prototype.delete.bind(this),this.get=cu.prototype.get.bind(this),this.has=cu.prototype.has.bind(this),this.set=cu.prototype.set.bind(this),this.tag=$u.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t?.onCreate&&t.onCreate(n);for(const e of this.items){let r,o;if(Jl(e)?(r=kc(e.key,"",t),o=kc(e.value,r,t)):r=kc(e,"",t),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,o)}return n}static from(e,t,n){const r=Lu(e,t,n),o=new this;return o.items=r.items,o}}$u.tag="tag:yaml.org,2002:omap";const zu={collection:"seq",identify:e=>e instanceof Map,nodeClass:$u,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=Iu(e,t),r=[];for(const{key:e}of n.items)ec(e)&&(r.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):r.push(e.value));return Object.assign(new $u,n)},createNode:(e,t,n)=>$u.from(e,t,n)};function Du({value:e,source:t},n){return t&&(e?Ru:Bu).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const Ru={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new _c(!0),stringify:Du},Bu={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new _c(!1),stringify:Du},Vu={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:yu},Fu={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():yu(e)}},Hu={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new _c(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const r=e.substring(n+1).replace(/_/g,"");"0"===r[r.length-1]&&(t.minFractionDigits=r.length)}return t},stringify:yu},Ku=e=>"bigint"==typeof e||Number.isInteger(e);function qu(e,t,n,{intAsBigInt:r}){const o=e[0];if("-"!==o&&"+"!==o||(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===o?BigInt(-1)*t:t}const s=parseInt(e,n);return"-"===o?-1*s:s}function Wu(e,t,n){const{value:r}=e;if(Ku(r)){const e=r.toString(t);return r<0?"-"+n+e.substr(1):n+e}return yu(e)}const Uu={identify:Ku,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>qu(e,2,2,n),stringify:e=>Wu(e,2,"0b")},Yu={identify:Ku,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>qu(e,1,8,n),stringify:e=>Wu(e,8,"0")},Xu={identify:Ku,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>qu(e,0,10,n),stringify:yu},Zu={identify:Ku,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>qu(e,2,16,n),stringify:e=>Wu(e,16,"0x")};class Qu extends cu{constructor(e){super(e),this.tag=Qu.tag}add(e){let t;t=Jl(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new ru(e.key,null):new ru(e,null),lu(this.items,t.key)||this.items.push(t)}get(e,t){const n=lu(this.items,e);return!t&&Jl(n)?ec(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=lu(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new ru(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}static from(e,t,n){const{replacer:r}=n,o=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof r&&(e=r.call(t,e,e)),o.items.push(nu(e,null,n));return o}}Qu.tag="tag:yaml.org,2002:set";const Gu={collection:"map",identify:e=>e instanceof Set,nodeClass:Qu,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>Qu.from(e,t,n),resolve(e,t){if(Gl(e)){if(e.hasAllNullValues(!0))return Object.assign(new Qu,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function Ju(e,t){const n=e[0],r="-"===n||"+"===n?e.substring(1):e,o=e=>t?BigInt(e):Number(e),s=r.replace(/_/g,"").split(":").reduce((e,t)=>e*o(60)+o(t),o(0));return"-"===n?o(-1)*s:s}function ed(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return yu(e);let r="";t<0&&(r="-",t*=n(-1));const o=n(60),s=[t%o];return t<60?s.unshift(0):(t=(t-s[0])/o,s.unshift(t%o),t>=60&&(t=(t-s[0])/o,s.unshift(t))),r+s.map(e=>String(e).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const td={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>Ju(e,n),stringify:ed},nd={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>Ju(e,!1),stringify:ed},rd={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(rd.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,o,s,a,i]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(n,r-1,o,s||0,a||0,i||0,l);const u=t[8];if(u&&"Z"!==u){let e=Ju(u,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},od=[uu,hu,pu,mu,Ru,Bu,Uu,Yu,Xu,Zu,Vu,Fu,Hu,Au,Gc,zu,Tu,Gu,td,nd,rd],sd=new Map([["core",_u],["failsafe",[uu,hu,pu]],["json",Pu],["yaml11",od],["yaml-1.1",od]]),ad={binary:Au,bool:gu,float:xu,floatExp:vu,floatNaN:bu,floatTime:nd,int:Eu,intHex:Cu,intOct:Nu,intTime:td,map:uu,merge:Gc,null:mu,omap:zu,pairs:Tu,seq:hu,set:Gu,timestamp:rd},id={"tag:yaml.org,2002:binary":Au,"tag:yaml.org,2002:merge":Gc,"tag:yaml.org,2002:omap":zu,"tag:yaml.org,2002:pairs":Tu,"tag:yaml.org,2002:set":Gu,"tag:yaml.org,2002:timestamp":rd};function ld(e,t,n){const r=sd.get(t);if(r&&!e)return n&&!r.includes(Gc)?r.concat(Gc):r.slice();let o=r;if(!o){if(!Array.isArray(e)){const e=Array.from(sd.keys()).filter(e=>"yaml11"!==e).map(e=>JSON.stringify(e)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}o=[]}if(Array.isArray(e))for(const t of e)o=o.concat(t);else"function"==typeof e&&(o=e(o.slice()));return n&&(o=o.concat(Gc)),o.reduce((e,t)=>{const n="string"==typeof t?ad[t]:t;if(!n){const e=JSON.stringify(t),n=Object.keys(ad).map(e=>JSON.stringify(e)).join(", ");throw new Error(`Unknown custom tag ${e}; use one of ${n}`)}return e.includes(n)||e.push(n),e},[])}const cd=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class ud{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:r,schema:o,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?ld(e,"compat"):e?ld(null,e):null,this.name="string"==typeof o&&o||"core",this.knownTags=r?id:{},this.tags=ld(t,this.name,n),this.toStringOptions=a??null,Object.defineProperty(this,ql,{value:uu}),Object.defineProperty(this,Ul,{value:pu}),Object.defineProperty(this,Yl,{value:hu}),this.sortMapEntries="function"==typeof s?s:!0===s?cd:null}clone(){const e=Object.create(ud.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}class dd{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Xl,{value:Kl});let r=null;"function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t,t=void 0);const o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=o;let{version:s}=o;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new yc({version:s}),this.setSchema(s,n),this.contents=void 0===e?null:this.createNode(e,r,n)}clone(){const e=Object.create(dd.prototype,{[Xl]:{value:Kl}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=rc(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){fd(this.contents)&&this.contents.add(e)}addIn(e,t){fd(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=vc(this);e.anchor=!t||n.has(t)?xc(t||"a",n):t}return new Nc(e.anchor)}createNode(e,t,n){let r;if("function"==typeof t)e=t.call({"":e},"",e),r=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),r=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:i,onTagObj:l,tag:c}=n??{},{onAnchor:u,setAnchors:d,sourceObjects:f}=function(e,t){const n=[],r=new Map;let o=null;return{onAnchor:r=>{n.push(r),o??(o=vc(e));const s=xc(t,o);return o.add(s),s},setAnchors:()=>{for(const e of n){const t=r.get(e);if("object"!=typeof t||!t.anchor||!ec(t.node)&&!nc(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:r}}(this,s||"a"),h=jc(e,c,{aliasDuplicateObjects:o??!0,keepUndefined:i??!1,onAnchor:u,onTagObj:l,replacer:r,schema:this.schema,sourceObjects:f});return a&&nc(h)&&(h.flow=!0),d(),h}createPair(e,t,n={}){const r=this.createNode(e,null,n),o=this.createNode(t,null,n);return new ru(r,o)}delete(e){return!!fd(this.contents)&&this.contents.delete(e)}deleteIn(e){return Oc(e)?null!=this.contents&&(this.contents=null,!0):!!fd(this.contents)&&this.contents.deleteIn(e)}get(e,t){return nc(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Oc(e)?!t&&ec(this.contents)?this.contents.value:this.contents:nc(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!nc(this.contents)&&this.contents.has(e)}hasIn(e){return Oc(e)?void 0!==this.contents:!!nc(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=Mc(this.schema,[e],t):fd(this.contents)&&this.contents.set(e,t)}setIn(e,t){Oc(e)?this.contents=t:null==this.contents?this.contents=Mc(this.schema,Array.from(e),t):fd(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new yc({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new yc({version:e}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new ud(Object.assign(n,t))}}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:o,reviver:s}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100},i=kc(this.contents,t??"",a);if("function"==typeof o)for(const{count:e,res:t}of a.anchors.values())o(t,e);return"function"==typeof s?wc(s,{"":i},"",i):i}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let r=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(n.push(t),r=!0):e.directives.docStart&&(r=!0)}r&&n.push("---");const o=Yc(e,t),{commentString:s}=o.options;if(e.commentBefore){1!==n.length&&n.unshift("");const t=s(e.commentBefore);n.unshift(Ic(t,""))}let a=!1,i=null;if(e.contents){if(rc(e.contents)){if(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore){const t=s(e.contents.commentBefore);n.push(Ic(t,""))}o.forceBlockIndent=!!e.comment,i=e.contents.comment}const t=i?void 0:()=>a=!0;let l=Xc(e.contents,o,()=>i=null,t);i&&(l+=Lc(l,"",s(i))),"|"!==l[0]&&">"!==l[0]||"---"!==n[n.length-1]?n.push(l):n[n.length-1]=`--- ${l}`}else n.push(Xc(e.contents,o));if(e.directives?.docEnd)if(e.comment){const t=s(e.comment);t.includes("\n")?(n.push("..."),n.push(Ic(t,""))):n.push(`... ${t}`)}else n.push("...");else{let t=e.comment;t&&a&&(t=t.replace(/^\n+/,"")),t&&(a&&!i||""===n[n.length-1]||n.push(""),n.push(Ic(s(t),"")))}return n.join("\n")+"\n"}(this,e)}}function fd(e){if(nc(e))return!0;throw new Error("Expected a YAML collection as document contents")}class hd extends Error{constructor(e,t,n,r){super(),this.name=e,this.code=n,this.message=r,this.pos=t}}class pd extends hd{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class md extends hd{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const gd=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map(e=>t.linePos(e));const{line:r,col:o}=n.linePos[0];n.message+=` at line ${r}, column ${o}`;let s=o-1,a=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(s>=60&&a.length>80){const e=Math.min(s-39,a.length-79);a=""+a.substring(e),s-=e-1}if(a.length>80&&(a=a.substring(0,79)+""),r>1&&/^ *$/.test(a.substring(0,s))){let n=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);n.length>80&&(n=n.substring(0,79)+"\n"),a=n+a}if(/[^ ]/.test(a)){let e=1;const t=n.linePos[1];t?.line===r&&t.col>o&&(e=Math.max(1,Math.min(t.col-o,80-s)));const i=" ".repeat(s)+"^".repeat(e);n.message+=`:\n\n${a}\n${i}\n`}};function yd(e,{flow:t,indicator:n,next:r,offset:o,onError:s,parentIndent:a,startOnNewline:i}){let l=!1,c=i,u=i,d="",f="",h=!1,p=!1,m=null,g=null,y=null,b=null,v=null,x=null,w=null;for(const o of e)switch(p&&("space"!==o.type&&"newline"!==o.type&&"comma"!==o.type&&s(o.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),m&&(c&&"comment"!==o.type&&"newline"!==o.type&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),o.type){case"space":t||"doc-start"===n&&"flow-collection"===r?.type||!o.source.includes("\t")||(m=o),u=!0;break;case"comment":{u||s(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=o.source.substring(1)||" ";d?d+=f+e:d=e,f="",c=!1;break}case"newline":c?d?d+=o.source:x&&"seq-item-ind"===n||(l=!0):f+=o.source,c=!0,h=!0,(g||y)&&(b=o),u=!0;break;case"anchor":g&&s(o,"MULTIPLE_ANCHORS","A node can have at most one anchor"),o.source.endsWith(":")&&s(o.offset+o.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=o,w??(w=o.offset),c=!1,u=!1,p=!0;break;case"tag":y&&s(o,"MULTIPLE_TAGS","A node can have at most one tag"),y=o,w??(w=o.offset),c=!1,u=!1,p=!0;break;case n:(g||y)&&s(o,"BAD_PROP_ORDER",`Anchors and tags must be after the ${o.source} indicator`),x&&s(o,"UNEXPECTED_TOKEN",`Unexpected ${o.source} in ${t??"collection"}`),x=o,c="seq-item-ind"===n||"explicit-key-ind"===n,u=!1;break;case"comma":if(t){v&&s(o,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),v=o,c=!1,u=!1;break}default:s(o,"UNEXPECTED_TOKEN",`Unexpected ${o.type} token`),c=!1,u=!1}const k=e[e.length-1],S=k?k.offset+k.source.length:o;return p&&r&&"space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&("scalar"!==r.type||""!==r.source)&&s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(c&&m.indent<=a||"block-map"===r?.type||"block-seq"===r?.type)&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:v,found:x,spaceBefore:l,comment:d,hasNewline:h,anchor:g,tag:y,newlineAfterProp:b,end:S,start:w??S}}function bd(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(bd(t.key)||bd(t.value))return!0}return!1;default:return!0}}function vd(e,t,n){if("flow-collection"===t?.type){const r=t.end[0];r.indent!==e||"]"!==r.source&&"}"!==r.source||!bd(t)||n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function xd(e,t,n){const{uniqueKeys:r}=e.options;if(!1===r)return!1;const o="function"==typeof r?r:(e,t)=>e===t||ec(e)&&ec(t)&&e.value===t.value;return t.some(e=>o(e.key,n))}const wd="All mapping items must start at the same column";function kd(e,t,n,r){let o="";if(e){let s=!1,a="";for(const i of e){const{source:e,type:l}=i;switch(l){case"space":s=!0;break;case"comment":{n&&!s&&r(i,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";o?o+=a+t:o=t,a="";break}case"newline":o&&(a+=e),s=!0;break;default:r(i,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}t+=e.length}}return{comment:o,offset:t}}const Sd="Block collections are not allowed within flow collections",Nd=e=>e&&("block-map"===e.type||"block-seq"===e.type);function Ed(e,t,n,r,o,s){const a="block-map"===n.type?function({composeNode:e,composeEmptyNode:t},n,r,o,s){const a=new(s?.nodeClass??cu)(n.schema);n.atRoot&&(n.atRoot=!1);let i=r.offset,l=null;for(const s of r.items){const{start:c,key:u,sep:d,value:f}=s,h=yd(c,{indicator:"explicit-key-ind",next:u??d?.[0],offset:i,onError:o,parentIndent:r.indent,startOnNewline:!0}),p=!h.found;if(p){if(u&&("block-seq"===u.type?o(i,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==r.indent&&o(i,"BAD_INDENT",wd)),!h.anchor&&!h.tag&&!d){l=h.end,h.comment&&(a.comment?a.comment+="\n"+h.comment:a.comment=h.comment);continue}(h.newlineAfterProp||bd(u))&&o(u??c[c.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else h.found?.indent!==r.indent&&o(i,"BAD_INDENT",wd);n.atKey=!0;const m=h.end,g=u?e(n,u,h,o):t(n,m,c,null,h,o);n.schema.compat&&vd(r.indent,u,o),n.atKey=!1,xd(n,a.items,g)&&o(m,"DUPLICATE_KEY","Map keys must be unique");const y=yd(d??[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:o,parentIndent:r.indent,startOnNewline:!u||"block-scalar"===u.type});if(i=y.end,y.found){p&&("block-map"!==f?.type||y.hasNewline||o(i,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&h.start<y.found.offset-1024&&o(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const l=f?e(n,f,y,o):t(n,i,d,null,y,o);n.schema.compat&&vd(r.indent,f,o),i=l.range[2];const c=new ru(g,l);n.options.keepSourceTokens&&(c.srcToken=s),a.items.push(c)}else{p&&o(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),y.comment&&(g.comment?g.comment+="\n"+y.comment:g.comment=y.comment);const e=new ru(g);n.options.keepSourceTokens&&(e.srcToken=s),a.items.push(e)}}return l&&l<i&&o(l,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,i,l??i],a}(e,t,n,r,s):"block-seq"===n.type?function({composeNode:e,composeEmptyNode:t},n,r,o,s){const a=new(s?.nodeClass??du)(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let i=r.offset,l=null;for(const{start:s,value:c}of r.items){const u=yd(s,{indicator:"seq-item-ind",next:c,offset:i,onError:o,parentIndent:r.indent,startOnNewline:!0});if(!u.found){if(!(u.anchor||u.tag||c)){l=u.end,u.comment&&(a.comment=u.comment);continue}"block-seq"===c?.type?o(u.end,"BAD_INDENT","All sequence items must start at the same column"):o(i,"MISSING_CHAR","Sequence item without - indicator")}const d=c?e(n,c,u,o):t(n,u.end,s,null,u,o);n.schema.compat&&vd(r.indent,c,o),i=d.range[2],a.items.push(d)}return a.range=[r.offset,i,l??i],a}(e,t,n,r,s):function({composeNode:e,composeEmptyNode:t},n,r,o,s){const a="{"===r.start.source,i=a?"flow map":"flow sequence",l=new(s?.nodeClass??(a?cu:du))(n.schema);l.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let u=r.offset+r.start.source.length;for(let s=0;s<r.items.length;++s){const c=r.items[s],{start:d,key:f,sep:h,value:p}=c,m=yd(d,{flow:i,indicator:"explicit-key-ind",next:f??h?.[0],offset:u,onError:o,parentIndent:r.indent,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||h||p)){0===s&&m.comma?o(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${i}`):s<r.items.length-1&&o(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${i}`),m.comment&&(l.comment?l.comment+="\n"+m.comment:l.comment=m.comment),u=m.end;continue}!a&&n.options.strict&&bd(f)&&o(f,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===s)m.comma&&o(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${i}`);else if(m.comma||o(m.start,"MISSING_CHAR",`Missing , between ${i} items`),m.comment){let e="";e:for(const t of d)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=l.items[l.items.length-1];Jl(t)&&(t=t.value??t.key),t.comment?t.comment+="\n"+e:t.comment=e,m.comment=m.comment.substring(e.length+1)}}if(a||h||m.found){n.atKey=!0;const s=m.end,g=f?e(n,f,m,o):t(n,s,d,null,m,o);Nd(f)&&o(g.range,"BLOCK_IN_FLOW",Sd),n.atKey=!1;const y=yd(h??[],{flow:i,indicator:"map-value-ind",next:p,offset:g.range[2],onError:o,parentIndent:r.indent,startOnNewline:!1});if(y.found){if(!a&&!m.found&&n.options.strict){if(h)for(const e of h){if(e===y.found)break;if("newline"===e.type){o(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<y.found.offset-1024&&o(y.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else p&&("source"in p&&":"===p.source?.[0]?o(p,"MISSING_CHAR",`Missing space after : in ${i}`):o(y.start,"MISSING_CHAR",`Missing , or : between ${i} items`));const b=p?e(n,p,y,o):y.found?t(n,y.end,h,null,y,o):null;b?Nd(p)&&o(b.range,"BLOCK_IN_FLOW",Sd):y.comment&&(g.comment?g.comment+="\n"+y.comment:g.comment=y.comment);const v=new ru(g,b);if(n.options.keepSourceTokens&&(v.srcToken=c),a){const e=l;xd(n,e.items,g)&&o(s,"DUPLICATE_KEY","Map keys must be unique"),e.items.push(v)}else{const e=new cu(n.schema);e.flow=!0,e.items.push(v);const t=(b??g).range;e.range=[g.range[0],t[1],t[2]],l.items.push(e)}u=b?b.range[2]:y.end}else{const r=p?e(n,p,m,o):t(n,m.end,h,null,m,o);l.items.push(r),u=r.range[2],Nd(p)&&o(r.range,"BLOCK_IN_FLOW",Sd)}}const d=a?"}":"]",[f,...h]=r.end;let p=u;if(f?.source===d)p=f.offset+f.source.length;else{const e=i[0].toUpperCase()+i.substring(1);o(u,c?"MISSING_CHAR":"BAD_INDENT",c?`${e} must end with a ${d}`:`${e} in block collection must be sufficiently indented and end with a ${d}`),f&&1!==f.source.length&&h.unshift(f)}if(h.length>0){const e=kd(h,p,n.options.strict,o);e.comment&&(l.comment?l.comment+="\n"+e.comment:l.comment=e.comment),l.range=[r.offset,p,e.offset]}else l.range=[r.offset,p,p];return l}(e,t,n,r,s),i=a.constructor;return"!"===o||o===i.tagName?(a.tag=i.tagName,a):(o&&(a.tag=o),a)}function Cd(e,t,n){const r=t.offset,o=function({offset:e,props:t},n,r){if("block-scalar-header"!==t[0].type)return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:o}=t[0],s=o[0];let a=0,i="",l=-1;for(let t=1;t<o.length;++t){const n=o[t];if(i||"-"!==n&&"+"!==n){const r=Number(n);!a&&r?a=r:-1===l&&(l=e+t)}else i=n}-1!==l&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${o}`);let c=!1,u="",d=o.length;for(let e=1;e<t.length;++e){const o=t[e];switch(o.type){case"space":c=!0;case"newline":d+=o.source.length;break;case"comment":n&&!c&&r(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=o.source.length,u=o.source.substring(1);break;case"error":r(o,"UNEXPECTED_TOKEN",o.message),d+=o.source.length;break;default:{r(o,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${o.type}`);const e=o.source;e&&"string"==typeof e&&(d+=e.length)}}}return{mode:s,indent:a,chomp:i,comment:u,length:d}}(t,e.options.strict,n);if(!o)return{value:"",type:null,comment:"",range:[r,r,r]};const s=">"===o.mode?_c.BLOCK_FOLDED:_c.BLOCK_LITERAL,a=t.source?function(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),o=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)o.push([t[e],t[e+1]]);return o}(t.source):[];let i=a.length;for(let e=a.length-1;e>=0;--e){const t=a[e][1];if(""!==t&&"\r"!==t)break;i=e}if(0===i){const e="+"===o.chomp&&a.length>0?"\n".repeat(Math.max(1,a.length-1)):"";let n=r+o.length;return t.source&&(n+=t.source.length),{value:e,type:s,comment:o.comment,range:[r,n,n]}}let l=t.indent+o.indent,c=t.offset+o.length,u=0;for(let t=0;t<i;++t){const[r,s]=a[t];if(""!==s&&"\r"!==s){if(r.length<l){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(c+r.length,"MISSING_CHAR",e)}0===o.indent&&(l=r.length),u=t,0!==l||e.atRoot||n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}0===o.indent&&r.length>l&&(l=r.length),c+=r.length+s.length+1}for(let e=a.length-1;e>=i;--e)a[e][0].length>l&&(i=e+1);let d="",f="",h=!1;for(let e=0;e<u;++e)d+=a[e][0].slice(l)+"\n";for(let e=u;e<i;++e){let[t,r]=a[e];c+=t.length+r.length+1;const i="\r"===r[r.length-1];if(i&&(r=r.slice(0,-1)),r&&t.length<l){const e="Block scalar lines must not be less indented than their "+(o.indent?"explicit indentation indicator":"first line");n(c-r.length-(i?2:1),"BAD_INDENT",e),t=""}s===_c.BLOCK_LITERAL?(d+=f+t.slice(l)+r,f="\n"):t.length>l||"\t"===r[0]?(" "===f?f="\n":h||"\n"!==f||(f="\n\n"),d+=f+t.slice(l)+r,f="\n",h=!0):""===r?"\n"===f?d+="\n":f="\n":(d+=f+r,f=" ",h=!1)}switch(o.chomp){case"-":break;case"+":for(let e=i;e<a.length;++e)d+="\n"+a[e][0].slice(l);"\n"!==d[d.length-1]&&(d+="\n");break;default:d+="\n"}const p=r+o.length+t.source.length;return{value:d,type:s,comment:o.comment,range:[r,p,p]}}function _d(e,t,n){const{offset:r,type:o,source:s,end:a}=e;let i,l;const c=(e,t,o)=>n(r+e,t,o);switch(o){case"scalar":i=_c.PLAIN,l=function(e,t){let n="";switch(e[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${e[0]}`;break;case"@":case"`":n=`reserved character ${e[0]}`}return n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),jd(e)}(s,c);break;case"single-quoted-scalar":i=_c.QUOTE_SINGLE,l=function(e,t){return"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote"),jd(e.slice(1,-1)).replace(/''/g,"'")}(s,c);break;case"double-quoted-scalar":i=_c.QUOTE_DOUBLE,l=function(e,t){let n="";for(let r=1;r<e.length-1;++r){const o=e[r];if("\r"!==o||"\n"!==e[r+1])if("\n"===o){const{fold:t,offset:o}=Md(e,r);n+=t,r=o}else if("\\"===o){let o=e[++r];const s=Od[o];if(s)n+=s;else if("\n"===o)for(o=e[r+1];" "===o||"\t"===o;)o=e[1+ ++r];else if("\r"===o&&"\n"===e[r+1])for(o=e[1+ ++r];" "===o||"\t"===o;)o=e[1+ ++r];else if("x"===o||"u"===o||"U"===o){const s={x:2,u:4,U:8}[o];n+=Pd(e,r+1,s,t),r+=s}else{const o=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),n+=o}}else if(" "===o||"\t"===o){const t=r;let s=e[r+1];for(;" "===s||"\t"===s;)s=e[1+ ++r];"\n"===s||"\r"===s&&"\n"===e[r+2]||(n+=r>t?e.slice(t,r+1):o)}else n+=o}return'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}(s,c);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${o}`),{value:"",type:null,comment:"",range:[r,r+s.length,r+s.length]}}const u=r+s.length,d=kd(a,u,t,n);return{value:l,type:i,comment:d.comment,range:[r,u,d.offset]}}function jd(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=t.exec(e);if(!r)return e;let o=r[1],s=" ",a=t.lastIndex;for(n.lastIndex=a;r=n.exec(e);)""===r[1]?"\n"===s?o+=s:s="\n":(o+=s+r[1],s=" "),a=n.lastIndex;const i=/[ \t]*(.*)/sy;return i.lastIndex=a,r=i.exec(e),o+s+(r?.[1]??"")}function Md(e,t){let n="",r=e[t+1];for(;!(" "!==r&&"\t"!==r&&"\n"!==r&&"\r"!==r||"\r"===r&&"\n"!==e[t+2]);)"\n"===r&&(n+="\n"),r=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const Od={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Pd(e,t,n,r){const o=e.substr(t,n),s=o.length===n&&/^[0-9a-fA-F]+$/.test(o)?parseInt(o,16):NaN;if(isNaN(s)){const o=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(s)}function Ad(e,t,n,r){const{value:o,type:s,comment:a,range:i}="block-scalar"===t.type?Cd(e,t,r):_d(t,e.options.strict,r),l=n?e.directives.tagName(n.source,e=>r(n,"TAG_RESOLVE_FAILED",e)):null;let c,u;c=e.options.stringKeys&&e.atKey?e.schema[Ul]:l?function(e,t,n,r,o){if("!"===n)return e[Ul];const s=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;s.push(t)}for(const e of s)if(e.test?.test(t))return e;const a=e.knownTags[n];return a&&!a.collection?(e.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(o(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),e[Ul])}(e.schema,o,l,n,r):"scalar"===t.type?function({atKey:e,directives:t,schema:n},r,o,s){const a=n.tags.find(t=>(!0===t.default||e&&"key"===t.default)&&t.test?.test(r))||n[Ul];if(n.compat){const e=n.compat.find(e=>e.default&&e.test?.test(r))??n[Ul];a.tag!==e.tag&&s(o,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${t.tagString(a.tag)} or ${t.tagString(e.tag)}`,!0)}return a}(e,o,t,r):e.schema[Ul];try{const s=c.resolve(o,e=>r(n??t,"TAG_RESOLVE_FAILED",e),e.options);u=ec(s)?s:new _c(s)}catch(e){const s=e instanceof Error?e.message:String(e);r(n??t,"TAG_RESOLVE_FAILED",s),u=new _c(o)}return u.range=i,u.source=o,s&&(u.type=s),l&&(u.tag=l),c.format&&(u.format=c.format),a&&(u.comment=a),u}function Id(e,t,n){if(t){n??(n=t.length);for(let r=n-1;r>=0;--r){let n=t[r];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++r];"space"===n?.type;)e+=n.source.length,n=t[++r];break}}return e}const Ld={composeNode:Td,composeEmptyNode:$d};function Td(e,t,n,r){const o=e.atKey,{spaceBefore:s,comment:a,anchor:i,tag:l}=n;let c,u=!0;switch(t.type){case"alias":c=function({options:e},{offset:t,source:n,end:r},o){const s=new Nc(n.substring(1));""===s.source&&o(t,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&o(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=t+n.length,i=kd(r,a,e.strict,o);return s.range=[t,a,i.offset],i.comment&&(s.comment=i.comment),s}(e,t,r),(i||l)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Ad(e,t,l,r),i&&(c.anchor=i.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=function(e,t,n,r,o){const s=r.tag,a=s?t.directives.tagName(s.source,e=>o(s,"TAG_RESOLVE_FAILED",e)):null;if("block-seq"===n.type){const{anchor:e,newlineAfterProp:t}=r,n=e&&s?e.offset>s.offset?e:s:e??s;n&&(!t||t.offset<n.offset)&&o(n,"MISSING_CHAR","Missing newline after block sequence props")}const i="block-map"===n.type?"map":"block-seq"===n.type?"seq":"{"===n.start.source?"map":"seq";if(!s||!a||"!"===a||a===cu.tagName&&"map"===i||a===du.tagName&&"seq"===i)return Ed(e,t,n,o,a);let l=t.schema.tags.find(e=>e.tag===a&&e.collection===i);if(!l){const r=t.schema.knownTags[a];if(r?.collection!==i)return r?o(s,"BAD_COLLECTION_TYPE",`${r.tag} used for ${i} collection, but expects ${r.collection??"scalar"}`,!0):o(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${a}`,!0),Ed(e,t,n,o,a);t.schema.tags.push(Object.assign({},r,{default:!1})),l=r}const c=Ed(e,t,n,o,a,l),u=l.resolve?.(c,e=>o(s,"TAG_RESOLVE_FAILED",e),t.options)??c,d=rc(u)?u:new _c(u);return d.range=c.range,d.tag=a,l?.format&&(d.format=l.format),d}(Ld,e,t,n,r),i&&(c.anchor=i.source.substring(1));break;default:r(t,"UNEXPECTED_TOKEN","error"===t.type?t.message:`Unsupported token (type: ${t.type})`),c=$d(e,t.offset,void 0,null,n,r),u=!1}return i&&""===c.anchor&&r(i,"BAD_ALIAS","Anchor cannot be an empty string"),o&&e.options.stringKeys&&(!ec(c)||"string"!=typeof c.value||c.tag&&"tag:yaml.org,2002:str"!==c.tag)&&r(l??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(c.spaceBefore=!0),a&&("scalar"===t.type&&""===t.source?c.comment=a:c.commentBefore=a),e.options.keepSourceTokens&&u&&(c.srcToken=t),c}function $d(e,t,n,r,{spaceBefore:o,comment:s,anchor:a,tag:i,end:l},c){const u=Ad(e,{type:"scalar",offset:Id(t,n,r),indent:-1,source:""},i,c);return a&&(u.anchor=a.source.substring(1),""===u.anchor&&c(a,"BAD_ALIAS","Anchor cannot be an empty string")),o&&(u.spaceBefore=!0),s&&(u.comment=s,u.range[2]=l),u}function zd(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+("string"==typeof n?n.length:1)]}function Dd(e){let t="",n=!1,r=!1;for(let o=0;o<e.length;++o){const s=e[o];switch(s[0]){case"#":t+=(""===t?"":r?"\n\n":"\n")+(s.substring(1)||" "),n=!0,r=!1;break;case"%":"#"!==e[o+1]?.[0]&&(o+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class Rd{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,r)=>{const o=zd(e);r?this.warnings.push(new md(o,t,n)):this.errors.push(new pd(o,t,n))},this.directives=new yc({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:r}=Dd(this.prelude);if(n){const o=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(r||e.directives.docStart||!o)e.commentBefore=n;else if(nc(o)&&!o.flow&&o.items.length>0){let e=o.items[0];Jl(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=o.commentBefore;o.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Dd(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,n,r)=>{const o=zd(e);o[0]+=t,this.onError(o,"BAD_DIRECTIVE",n,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:r,value:o,end:s},a){const i=Object.assign({_directives:t},e),l=new dd(void 0,i),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=yd(r,{indicator:"doc-start",next:o??s?.[0],offset:n,onError:a,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,!o||"block-map"!==o.type&&"block-seq"!==o.type||u.hasNewline||a(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=o?Td(c,o,u,a):$d(c,u.end,r,null,u,a);const d=l.contents.range[2],f=kd(s,d,!1,a);return f.comment&&(l.comment=f.comment),l.range=[n,d,f.offset],l}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new pd(zd(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new pd(zd(e),"UNEXPECTED_TOKEN",t));break}this.doc.directives.docEnd=!0;const t=kd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new pd(zd(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),n=new dd(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}}function Bd(e,t=!0,n){if(e){const r=(e,t,r)=>{const o="number"==typeof e?e:Array.isArray(e)?e[0]:e.offset;if(!n)throw new pd([o,o+1],t,r);n(o,t,r)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return _d(e,t,r);case"block-scalar":return Cd({options:{strict:t}},e,r)}}return null}function Vd(e,t){const{implicitKey:n=!1,indent:r,inFlow:o=!1,offset:s=-1,type:a="PLAIN"}=t,i=Uc({type:a,value:e},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),l=t.end??[{type:"newline",offset:-1,indent:r,source:"\n"}];switch(i[0]){case"|":case">":{const e=i.indexOf("\n"),t=i.substring(0,e),n=i.substring(e+1)+"\n",o=[{type:"block-scalar-header",offset:s,indent:r,source:t}];return Hd(o,l)||o.push({type:"newline",offset:-1,indent:r,source:"\n"}),{type:"block-scalar",offset:s,indent:r,props:o,source:n}}case'"':return{type:"double-quoted-scalar",offset:s,indent:r,source:i,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:r,source:i,end:l};default:return{type:"scalar",offset:s,indent:r,source:i,end:l}}}function Fd(e,t,n={}){let{afterKey:r=!1,implicitKey:o=!1,inFlow:s=!1,type:a}=n,i="indent"in e?e.indent:null;if(r&&"number"==typeof i&&(i+=2),!a)switch(e.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");a=">"===t.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}const l=Uc({type:a,value:t},{implicitKey:o||null===i,indent:null!==i&&i>0?" ".repeat(i):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":!function(e,t){const n=t.indexOf("\n"),r=t.substring(0,n),o=t.substring(n+1)+"\n";if("block-scalar"===e.type){const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");t.source=r,e.source=o}else{const{offset:t}=e,n="indent"in e?e.indent:-1,s=[{type:"block-scalar-header",offset:t,indent:n,source:r}];Hd(s,"end"in e?e.end:void 0)||s.push({type:"newline",offset:-1,indent:n,source:"\n"});for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:"block-scalar",indent:n,props:s,source:o})}}(e,l);break;case'"':Kd(e,l,"double-quoted-scalar");break;case"'":Kd(e,l,"single-quoted-scalar");break;default:Kd(e,l,"scalar")}}function Hd(e,t){if(t)for(const n of t)switch(n.type){case"space":case"comment":e.push(n);break;case"newline":return e.push(n),!0}return!1}function Kd(e,t,n){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=n,e.source=t;break;case"block-scalar":{const r=e.props.slice(1);let o=t.length;"block-scalar-header"===e.props[0].type&&(o-=e.props[0].source.length);for(const e of r)e.offset+=o;delete e.props,Object.assign(e,{type:n,source:t,end:r});break}case"block-map":case"block-seq":{const r={type:"newline",offset:e.offset+t.length,indent:e.indent,source:"\n"};delete e.items,Object.assign(e,{type:n,source:t,end:[r]});break}default:{const r="indent"in e?e.indent:-1,o="end"in e&&Array.isArray(e.end)?e.end.filter(e=>"space"===e.type||"comment"===e.type||"newline"===e.type):[];for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:n,indent:r,source:t,end:o})}}}const qd=e=>"type"in e?Wd(e):Ud(e);function Wd(e){switch(e.type){case"block-scalar":{let t="";for(const n of e.props)t+=Wd(n);return t+e.source}case"block-map":case"block-seq":{let t="";for(const n of e.items)t+=Ud(n);return t}case"flow-collection":{let t=e.start.source;for(const n of e.items)t+=Ud(n);for(const n of e.end)t+=n.source;return t}case"document":{let t=Ud(e);if(e.end)for(const n of e.end)t+=n.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const n of e.end)t+=n.source;return t}}}function Ud({start:e,key:t,sep:n,value:r}){let o="";for(const t of e)o+=t.source;if(t&&(o+=Wd(t)),n)for(const e of n)o+=e.source;return r&&(o+=Wd(r)),o}const Yd=Symbol("break visit"),Xd=Symbol("skip children"),Zd=Symbol("remove item");function Qd(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),Gd(Object.freeze([]),e,t)}function Gd(e,t,n){let r=n(t,e);if("symbol"==typeof r)return r;for(const o of["key","value"]){const s=t[o];if(s&&"items"in s){for(let t=0;t<s.items.length;++t){const r=Gd(Object.freeze(e.concat([[o,t]])),s.items[t],n);if("number"==typeof r)t=r-1;else{if(r===Yd)return Yd;r===Zd&&(s.items.splice(t,1),t-=1)}}"function"==typeof r&&"key"===o&&(r=r(t,e))}}return"function"==typeof r?r(t,e):r}Qd.BREAK=Yd,Qd.SKIP=Xd,Qd.REMOVE=Zd,Qd.itemAtPath=(e,t)=>{let n=e;for(const[e,r]of t){const t=n?.[e];if(!t||!("items"in t))return;n=t.items[r]}return n},Qd.parentCollection=(e,t)=>{const n=Qd.itemAtPath(e,t.slice(0,-1)),r=t[t.length-1][0],o=n?.[r];if(o&&"items"in o)return o;throw new Error("Parent collection not found")};const Jd="\ufeff",ef="",tf="",nf="",rf=e=>!!e&&"items"in e,of=e=>!!e&&("scalar"===e.type||"single-quoted-scalar"===e.type||"double-quoted-scalar"===e.type||"block-scalar"===e.type);function sf(e){switch(e){case Jd:return"<BOM>";case ef:return"<DOC>";case tf:return"<FLOW_END>";case nf:return"<SCALAR>";default:return JSON.stringify(e)}}function af(e){switch(e){case Jd:return"byte-order-mark";case ef:return"doc-mode";case tf:return"flow-error-end";case nf:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function lf(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const cf=new Set("0123456789ABCDEFabcdef"),uf=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),df=new Set(",[]{}"),ff=new Set(" ,[]{}\n\r\t"),hf=e=>!e||ff.has(e);class pf{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if("string"!=typeof e)throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let n=this.next??"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&lf(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if(e[0]===Jd&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length,n=e.indexOf("#");for(;-1!==n;){const r=e[n-1];if(" "===r||"\t"===r){t=n-1;break}n=e.indexOf("#",n+1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const r=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield ef,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if(("---"===e||"..."===e)&&lf(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"---"===e?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!lf(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&lf(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(hf),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const r=this.getLine();if(null===r)return this.setNext("flow");if((-1!==n&&n<this.indentNext&&"#"!==r[0]||0===n&&(r.startsWith("---")||r.startsWith("..."))&&lf(r[3]))&&(n!==this.indentNext-1||1!==this.flowLevel||"]"!==r[0]&&"}"!==r[0]))return this.flowLevel=0,yield tf,yield*this.parseLineStart();let o=0;for(;","===r[o];)o+=(yield*this.pushCount(1)),o+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(o+=(yield*this.pushIndicators()),r[o]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(hf),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||lf(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let r=n.indexOf("\n",this.pos);if(-1!==r){for(;-1!==r;){const e=this.continueScalar(r+1);if(-1===e)break;r=n.indexOf("\n",e)}-1!==r&&(t=r-("\r"===n[r-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil(e=>lf(e)||"#"===e)}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let r=this.pos;e=this.buffer[r];++r)switch(e){case" ":n+=1;break;case"\n":t=r,n=0;break;case"\r":{const e=this.buffer[r+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let r=t+1;for(e=this.buffer[r];" "===e;)e=this.buffer[++r];if("\t"===e){for(;"\t"===e||" "===e||"\r"===e||"\n"===e;)e=this.buffer[++r];t=r-1}else if(!this.blockScalarKeep)for(;;){let e=t-1,r=this.buffer[e];"\r"===r&&(r=this.buffer[--e]);const o=e;for(;" "===r;)r=this.buffer[--e];if(!("\n"===r&&e>=this.pos&&e+1+n>o))break;t=e}return yield nf,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,r=this.pos-1;for(;t=this.buffer[++r];)if(":"===t){const t=this.buffer[r+1];if(lf(t)||e&&df.has(t))break;n=r}else if(lf(t)){let o=this.buffer[r+1];if("\r"===t&&("\n"===o?(r+=1,t="\n",o=this.buffer[r+1]):n=r),"#"===o||e&&df.has(o))break;if("\n"===t){const e=this.continueScalar(r+1);if(-1===e)break;r=Math.max(r,e-2)}}else{if(e&&df.has(t))break;n=r}return t||this.atEnd?(yield nf,yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(hf))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(lf(t)||e&&df.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!lf(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(uf.has(t))t=this.buffer[++e];else{if("%"!==t||!cf.has(this.buffer[e+1])||!cf.has(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class mf{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const r=t+n>>1;this.lineStarts[r]<e?t=r+1:n=r}return this.lineStarts[t]===e?{line:t+1,col:1}:0===t?{line:0,col:e}:{line:t,col:e-this.lineStarts[t-1]+1}}}}function gf(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function yf(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function bf(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function vf(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function xf(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===e[++t]?.type;);return e.splice(t,e.length)}function wf(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||gf(t.start,"explicit-key-ind")||gf(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,bf(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class kf{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new pf,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=af(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||"doc-end"===e?.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in e?e.indent:0:"flow-collection"===t.type&&"document"===e.type&&(t.indent=0),"flow-collection"===t.type&&wf(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!n.explicitKey);n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===yf(n.start)&&(0===t.indent||n.start.every(e=>"comment"!==e.type||e.indent<t.indent))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(-1!==yf(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=xf(vf(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const n="end"in t.value?t.value.end:void 0,r=Array.isArray(n)?n[n.length-1]:void 0;"comment"===r?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],r=n?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent,r=n&&(t.sep||t.explicitKey)&&"seq-item-ind"!==this.type;let o=[];if(r&&t.sep&&!t.value){const n=[];for(let r=0;r<t.sep.length;++r){const o=t.sep[r];switch(o.type){case"newline":n.push(r);break;case"space":break;case"comment":o.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(o=t.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(r||t.value?(o.push(this.sourceToken),e.items.push({start:o}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"explicit-key-ind":return t.sep||t.explicitKey?r||t.value?(o.push(this.sourceToken),e.items.push({start:o,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(t.start.push(this.sourceToken),t.explicitKey=!0),void(this.onKeyLine=!0);case"map-value-ind":if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(gf(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(bf(t.key)&&!gf(t.sep,"newline")){const e=xf(t.start),n=t.key,r=t.sep;r.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:r}]})}else o.length>0?t.sep=t.sep.concat(o,this.sourceToken):t.sep.push(this.sourceToken);else if(gf(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=xf(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||r?e.items.push({start:o,key:null,sep:[this.sourceToken]}):gf(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(r||t.value?(e.items.push({start:o,key:n,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(n):(Object.assign(t,{key:n,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(e);if(r){if("block-seq"===r.type){if(!t.explicitKey&&t.sep&&!gf(t.sep,"newline"))return void(yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source}))}else n&&e.items.push({start:o});return void this.stack.push(r)}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const n="end"in t.value?t.value.end:void 0,r=Array.isArray(n)?n[n.length-1]:void 0;"comment"===r?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],r=n?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(t.value||gf(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while("flow-collection"===e?.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"===t.type&&("map-value-ind"===this.type&&t.indent===e.indent||"newline"===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=xf(vf(t));wf(e);const r=e.end.splice(1,e.end.length);r.push(this.sourceToken);const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=xf(vf(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const t=xf(vf(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&!(this.indent<=t)&&e.every(e=>"newline"===e.type||"space"===e.type)}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function Sf(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new mf||null,prettyErrors:t}}function Nf(e,t={}){const{lineCounter:n,prettyErrors:r}=Sf(t),o=new kf(n?.addNewLine),s=new Rd(t),a=Array.from(s.compose(o.parse(e)));if(r&&n)for(const t of a)t.errors.forEach(gd(e,n)),t.warnings.forEach(gd(e,n));return a.length>0?a:Object.assign([],{empty:!0},s.streamInfo())}function Ef(e,t={}){const{lineCounter:n,prettyErrors:r}=Sf(t),o=new kf(n?.addNewLine),s=new Rd(t);let a=null;for(const t of s.compose(o.parse(e),!0,e.length))if(a){if("silent"!==a.options.logLevel){a.errors.push(new pd(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else a=t;return r&&n&&(a.errors.forEach(gd(e,n)),a.warnings.forEach(gd(e,n))),a}function Cf(e,t,n){let r;"function"==typeof t?r=t:void 0===n&&t&&"object"==typeof t&&(n=t);const o=Ef(e,n);if(!o)return null;if(o.warnings.forEach(e=>Zc(o.options.logLevel,e)),o.errors.length>0){if("silent"!==o.options.logLevel)throw o.errors[0];o.errors=[]}return o.toJS(Object.assign({reviver:r},n))}function _f(e,t,n){let r=null;if("function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t),"string"==typeof n&&(n=n.length),"number"==typeof n){const e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=n??t??{};if(!e)return}return Ql(e)&&!r?e.toString(n):new dd(e,r,n).toString(n)}const jf=o;function Mf(e){const t=[];let n;try{n=jf.parse(e,{strict:!1})}catch(e){return{workflow:{name:"",on:{},jobs:{}},errors:[`YAML parse error: ${e instanceof Error?e.message:String(e)}`]}}if(null==n||"object"!=typeof n)return{workflow:{name:"",on:{},jobs:{}},errors:["Invalid workflow: root must be an object"]};const r=n;"jobs"in r&&null!=r.jobs&&"object"==typeof r.jobs||t.push('Workflow must have a "jobs" object');const o=r.jobs??{},s={...r,name:"string"==typeof r.name?r.name:void 0,"run-name":"string"==typeof r["run-name"]?r["run-name"]:void 0,on:r.on??{},env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,jobs:{}};for(const[e,n]of Object.entries(o)){if(null==n||"object"!=typeof n||Array.isArray(n)){t.push(`Job "${e}" must be an object`);continue}const r=n,o=Array.isArray(r.steps)?r.steps:[];let a;if(r.strategy&&"object"==typeof r.strategy&&null!==r.strategy&&!Array.isArray(r.strategy)){const e=r.strategy,t="object"!=typeof e.matrix||null===e.matrix||Array.isArray(e.matrix)?void 0:e.matrix,n="boolean"==typeof e["fail-fast"]?e["fail-fast"]:void 0,o="number"==typeof e["max-parallel"]?e["max-parallel"]:void 0;(t||void 0!==n||void 0!==o)&&(a={matrix:t,"fail-fast":n,"max-parallel":o})}s.jobs[e]={...r,name:"string"==typeof r.name?r.name:void 0,"runs-on":"string"==typeof r["runs-on"]||Array.isArray(r["runs-on"])?r["runs-on"]:"ubuntu-latest",needs:r.needs,permissions:"object"!=typeof r.permissions||null===r.permissions||Array.isArray(r.permissions)?void 0:r.permissions,env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,strategy:a,steps:o.map((e,t)=>Of(e,0,t))}}return{workflow:s,errors:t}}function Of(e,t,n){if(null==e||"object"!=typeof e||Array.isArray(e))return{name:`Step ${n+1}`,run:""};const r=e;return{id:"string"==typeof r.id?r.id:void 0,name:"string"==typeof r.name?r.name:void 0,uses:"string"==typeof r.uses?r.uses:void 0,run:"string"==typeof r.run?r.run:void 0,with:"object"!=typeof r.with||null===r.with||Array.isArray(r.with)?void 0:r.with,env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,shell:"string"==typeof r.shell?r.shell:void 0,...r}}const Pf=new Set(["push","pull_request","pull_request_target","workflow_dispatch","workflow_call","workflow_run","repository_dispatch","schedule","create","delete","deployment","deployment_status","fork","gollum","issue_comment","issues","label","milestone","page_build","project","project_card","project_column","public","pull_request_review","pull_request_review_comment","push","registry_package","release","status","watch","branch_protection_rule","check_run","check_suite","discussion","discussion_comment","merge_group","pull_request_review","pull_request_review_comment","pull_request_target","registry_package"]),Af=new Set(["assigned","auto_merge_disabled","auto_merge_enabled","closed","converted_to_draft","edited","labeled","locked","opened","ready_for_review","reopened","review_requested","review_request_removed","synchronize","unassigned","unlabeled","unlocked"]),If=new Set(["completed","requested","in_progress"]),Lf=new Set(["published","unpublished","created","edited","deleted","prereleased","released"]),Tf=new Set(["created","edited","deleted"]),$f=new Set(["created","rerequested","completed","requested_action"]),zf=new Set(["completed"]),Df=new Set(["created","edited","deleted","transferred","pinned","unpinned","labeled","unlabeled","locked","unlocked","category_changed","answered","unanswered"]),Rf=new Set(["created","edited","deleted"]),Bf=new Set(["created","edited","deleted"]),Vf=new Set(["opened","edited","deleted","transferred","pinned","unpinned","closed","reopened","assigned","unassigned","labeled","unlabeled","locked","unlocked","milestoned","demilestoned","typed","untyped"]),Ff=new Set(["created","edited","deleted"]),Hf=new Set(["checks_requested"]),Kf=new Set(["created","closed","opened","edited","deleted"]),qf=new Set(["submitted","edited","dismissed"]),Wf=new Set(["created","edited","deleted"]),Uf=Af,Yf=new Set(["published","updated"]),Xf=new Set(["started"]),Zf=new Set(["ubuntu-latest","ubuntu-22.04","ubuntu-20.04","windows-latest","windows-2022","windows-2019","macos-latest","macos-14","macos-13","macos-12","self-hosted"]);function Qf(e){const t=[],n=Tl(e.on);0===n.length?t.push({message:'Workflow must have at least one trigger in "on" field',path:"on",severity:"error"}):n.forEach((e,n)=>{t.push(...function(e,t){const n=[],r=`on[${t}]`;Pf.has(e.event)||n.push({message:`Invalid trigger event: "${e.event}". Valid events: ${Array.from(Pf).slice(0,10).join(", ")}, ...`,path:`${r}.${e.event}`,severity:"error"});const o=e.config;if("push"!==e.event&&"pull_request"!==e.event||("branches"in o&&o.branches&&((Array.isArray(o.branches)?o.branches:[o.branches]).every(e=>"string"==typeof e)||n.push({message:`Invalid branches format in ${e.event} trigger. Branches must be strings.`,path:`${r}.${e.event}.branches`,severity:"error"})),"tags"in o&&o.tags&&((Array.isArray(o.tags)?o.tags:[o.tags]).every(e=>"string"==typeof e)||n.push({message:`Invalid tags format in ${e.event} trigger. Tags must be strings.`,path:`${r}.${e.event}.tags`,severity:"error"})),"paths"in o&&o.paths&&((Array.isArray(o.paths)?o.paths:[o.paths]).every(e=>"string"==typeof e)||n.push({message:`Invalid paths format in ${e.event} trigger. Paths must be strings.`,path:`${r}.${e.event}.paths`,severity:"error"})),"paths-ignore"in o&&o.pathsIgnore&&((Array.isArray(o.pathsIgnore)?o.pathsIgnore:[o.pathsIgnore]).every(e=>"string"==typeof e)||n.push({message:`Invalid paths-ignore format in ${e.event} trigger. Paths must be strings.`,path:`${r}.${e.event}.paths-ignore`,severity:"error"}))),o.types){const t=Array.isArray(o.types)?o.types:[o.types],s=function(e){switch(e){case"branch_protection_rule":return Tf;case"check_run":return $f;case"check_suite":return zf;case"discussion":return Df;case"discussion_comment":return Rf;case"issue_comment":return Bf;case"issues":return Vf;case"label":return Ff;case"merge_group":return Hf;case"milestone":return Kf;case"pull_request":return Af;case"pull_request_review":return qf;case"pull_request_review_comment":return Wf;case"pull_request_target":return Uf;case"registry_package":return Yf;case"release":return Lf;case"repository_dispatch":default:return null;case"watch":return Xf;case"workflow_run":return If}}(e.event);if(null===s)"repository_dispatch"===e.event&&(t.every(e=>"string"==typeof e)||n.push({message:"repository_dispatch types must be strings",path:`${r}.${e.event}.types`,severity:"error"}));else for(const o of t)if("string"==typeof o&&!s.has(o)){const t=Array.from(s).slice(0,10).join(", "),a=s.size>10?", ...":"";n.push({message:`Invalid ${e.event} type: "${o}". Valid types: ${t}${a}`,path:`${r}.${e.event}.types`,severity:"workflow_run"===e.event?"error":"warning"})}}return"workflow_run"===e.event&&(o.workflows&&("string"==typeof o.workflows||Array.isArray(o.workflows))||n.push({message:'workflow_run trigger requires a "workflows" field (string or array of strings)',path:`${r}.${e.event}`,severity:"error"})),"schedule"===e.event&&(o.cron&&"string"==typeof o.cron?function(e){const t=e.trim().split(/\s+/);return 5===t.length&&t.every(e=>/^[\d*,/-]+$/.test(e))}(o.cron)||n.push({message:`Invalid cron expression: "${o.cron}". Format: "minute hour day month weekday" (e.g., "0 0 * * *")`,path:`${r}.${e.event}.cron`,severity:"error"}):n.push({message:'schedule trigger requires a "cron" field (string)',path:`${r}.${e.event}`,severity:"error"})),n}(e,n))});const r=Object.keys(e.jobs);return 0===r.length?t.push({message:"Workflow must have at least one job",path:"jobs",severity:"error"}):(t.push(...function(e){const t=[],n=new Set,r=new Set;function o(t){if(r.has(t))return!0;if(n.has(t))return!1;n.add(t),r.add(t);const s=e[t];if(s?.needs){const e=Array.isArray(s.needs)?s.needs:[s.needs];for(const t of e)if("string"==typeof t&&o(t))return!0}return r.delete(t),!1}for(const r of Object.keys(e))!n.has(r)&&o(r)&&t.push({message:`Circular dependency detected involving job "${r}"`,path:`jobs.${r}.needs`,severity:"error"});return t}(e.jobs)),r.forEach(n=>{t.push(...function(e,t,n){const r=[],o=`jobs.${e}`;if(t["runs-on"]){const e=Array.isArray(t["runs-on"])?t["runs-on"]:[t["runs-on"]];for(const t of e)"string"!=typeof t||t.startsWith("self-hosted")||Zf.has(t)||t.includes("[")||t.includes("${{")||r.push({message:`Unknown runner label: "${t}". Common runners: ${Array.from(Zf).join(", ")}`,path:`${o}.runs-on`,severity:"warning"})}else r.push({message:`Job "${e}" is missing required field "runs-on"`,path:`${o}.runs-on`,severity:"error"});if(t.needs){const s=Array.isArray(t.needs)?t.needs:[t.needs];for(const t of s)"string"!=typeof t||n.includes(t)||r.push({message:`Job "${e}" depends on job "${t}" which does not exist`,path:`${o}.needs`,severity:"error"})}if(t.strategy?.matrix){const n=t.strategy.matrix;if(0===Object.keys(n).length)r.push({message:`Job "${e}" has an empty matrix. Remove strategy or add matrix variables.`,path:`${o}.strategy.matrix`,severity:"warning"});else for(const[t,s]of Object.entries(n))Array.isArray(s)&&0!==s.length||r.push({message:`Matrix variable "${t}" in job "${e}" must be a non-empty array`,path:`${o}.strategy.matrix.${t}`,severity:"error"});void 0!==t.strategy["max-parallel"]&&t.strategy["max-parallel"]<1&&r.push({message:`max-parallel in job "${e}" must be at least 1`,path:`${o}.strategy.max-parallel`,severity:"error"})}return t.steps&&0!==t.steps.length?t.steps.forEach((t,n)=>{const s=`${o}.steps[${n}]`;t.run||t.uses||r.push({message:`Step ${n+1} in job "${e}" must have either "run" or "uses"`,path:s,severity:"error"}),t.run&&t.uses&&r.push({message:`Step ${n+1} in job "${e}" cannot have both "run" and "uses"`,path:s,severity:"error"}),t.uses&&"string"==typeof t.uses&&(/^[\w.-]+\/[\w.-]+(@[\w.-]+)?(\/[\w.-/]+)?(@[\w.-]+)?$/.test(t.uses)||r.push({message:`Invalid action reference format: "${t.uses}". Expected format: "owner/repo@ref"`,path:`${s}.uses`,severity:"warning"}))}):r.push({message:`Job "${e}" has no steps`,path:`${o}.steps`,severity:"warning"}),r}(n,e.jobs[n],r))})),t}function Gf({initialYaml:e,onClose:t,onSave:n}){const[r,o]=(0,a.useState)(e),[i,l]=(0,a.useState)(null),[c,u]=(0,a.useState)([]),d=(0,a.useRef)(null);return(0,a.useEffect)(()=>{o(e),l(null),u([])},[e]),(0,a.useEffect)(()=>{d.current?.focus()},[]),(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 dark:bg-black/70 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"source-dialog-title",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,s.jsxs)("div",{className:"flex h-[85vh] w-full max-w-4xl flex-col rounded-lg bg-white dark:bg-slate-800 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 px-4 py-3",children:[(0,s.jsx)("h2",{id:"source-dialog-title",className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Workflow source (YAML)"}),(0,s.jsx)("button",{type:"button",onClick:t,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close",children:(0,s.jsx)("span",{className:"text-xl leading-none",children:""})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-100 dark:border-slate-700 px-4 py-2",children:[(0,s.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Edit the YAML below. The flow diagram updates only when you click Save."}),(0,s.jsx)("button",{type:"button",onClick:()=>{l(null);const{workflow:e,errors:t}=Mf(r);if(t.length>0&&(t[0].includes("YAML parse error")||t[0].includes("Invalid workflow")))return l(t[0]),void u([]);const n=Qf(e);u(n)},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Check syntax"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:(0,s.jsx)("textarea",{ref:d,value:r,onChange:e=>o(e.target.value),className:"flex-1 w-full resize-none rounded-none border-0 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 p-4 font-mono text-sm text-slate-800 dark:text-slate-200 focus:ring-0",spellCheck:!1,"aria-label":"Workflow YAML content"})}),(i||c.length>0)&&(0,s.jsxs)("div",{role:"alert",className:"border-t border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/30 px-4 py-2 text-sm text-amber-800 dark:text-amber-200 max-h-40 overflow-y-auto",children:[i&&(0,s.jsx)("div",{className:"mb-2 font-medium",children:i}),c.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-1 font-medium",children:[c.length," lint error",1!==c.length?"s":"",":"]}),(0,s.jsx)("ul",{className:"ml-4 list-disc space-y-0.5 text-xs",children:c.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)("span",{className:"error"===e.severity?"font-medium":"",children:[e.path&&(0,s.jsxs)("code",{className:"text-xs",children:[e.path,":"]})," ",e.message]})},t))})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 border-t border-slate-200 dark:border-slate-700 px-4 py-3",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:()=>{l(null);const{workflow:e,errors:o}=Mf(r);if(o.length>0&&(o[0].includes("YAML parse error")||o[0].includes("Invalid workflow")))return void l(o[0]);const s=Qf(e);u(s),n(e,o),t()},className:"rounded bg-slate-800 dark:bg-slate-700 px-3 py-1.5 text-sm text-white dark:text-slate-200 hover:bg-slate-700 dark:hover:bg-slate-600",children:"Save changes"})]})]})})}function Jf(e,t,n){if(null==e||"object"!=typeof e||Array.isArray(e))return{name:`Step ${n+1}`,run:""};const r=e;return{id:"string"==typeof r.id?r.id:void 0,name:"string"==typeof r.name?r.name:void 0,uses:"string"==typeof r.uses?r.uses:void 0,run:"string"==typeof r.run?r.run:void 0,with:"object"!=typeof r.with||null===r.with||Array.isArray(r.with)?void 0:r.with,env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,shell:"string"==typeof r.shell?r.shell:void 0,...r}}function eh(e){const t={...e};void 0!==e.name&&(t.name=e.name),void 0!==e["run-name"]&&(t["run-name"]=e["run-name"]),t.on=e.on,e.env&&Object.keys(e.env).length>0&&(t.env=e.env);const n={};for(const[t,r]of Object.entries(e.jobs)){const{steps:e,strategy:o,...s}=r,a={...s,"runs-on":r["runs-on"],steps:e.map(e=>th(e))};if(o){const e={};o.matrix&&Object.keys(o.matrix).length>0&&(e.matrix=o.matrix),void 0!==o["fail-fast"]&&(e["fail-fast"]=o["fail-fast"]),void 0!==o["max-parallel"]&&(e["max-parallel"]=o["max-parallel"]),Object.keys(e).length>0&&(a.strategy=e)}n[t]=a}return t.jobs=n,jf.stringify(t,{indent:2,lineWidth:0,collectionStyle:"block",defaultStringType:"PLAIN"})}function th(e){const{id:t,name:n,uses:r,run:o,with:s,env:a,shell:i,...l}=e,c={...l};return void 0!==t&&(c.id=t),void 0!==n&&(c.name=n),void 0!==r&&(c.uses=r),void 0!==o&&(c.run=o),s&&Object.keys(s).length>0&&(c.with=s),a&&Object.keys(a).length>0&&(c.env=a),void 0!==i&&(c.shell=i),c}function nh(){return window.vscode}function rh(e){const{workflow:t,errors:n}=function(e){const t=[];let n;try{n=jf.parse(e,{strict:!1})}catch(e){return{workflow:{name:"",on:{},jobs:{}},errors:[`YAML parse error: ${e instanceof Error?e.message:String(e)}`]}}if(null==n||"object"!=typeof n)return{workflow:{name:"",on:{},jobs:{}},errors:["Invalid workflow: root must be an object"]};const r=n;"jobs"in r&&null!=r.jobs&&"object"==typeof r.jobs||t.push('Workflow must have a "jobs" object');const o=r.jobs??{},s={...r,name:"string"==typeof r.name?r.name:void 0,"run-name":"string"==typeof r["run-name"]?r["run-name"]:void 0,on:r.on??{},env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,jobs:{}};for(const[e,n]of Object.entries(o)){if(null==n||"object"!=typeof n||Array.isArray(n)){t.push(`Job "${e}" must be an object`);continue}const r=n,o=Array.isArray(r.steps)?r.steps:[];let a;if(r.strategy&&"object"==typeof r.strategy&&null!==r.strategy&&!Array.isArray(r.strategy)){const e=r.strategy,t="object"!=typeof e.matrix||null===e.matrix||Array.isArray(e.matrix)?void 0:e.matrix,n="boolean"==typeof e["fail-fast"]?e["fail-fast"]:void 0,o="number"==typeof e["max-parallel"]?e["max-parallel"]:void 0;(t||void 0!==n||void 0!==o)&&(a={matrix:t,"fail-fast":n,"max-parallel":o})}s.jobs[e]={...r,name:"string"==typeof r.name?r.name:void 0,"runs-on":"string"==typeof r["runs-on"]||Array.isArray(r["runs-on"])?r["runs-on"]:"ubuntu-latest",needs:r.needs,permissions:"object"!=typeof r.permissions||null===r.permissions||Array.isArray(r.permissions)?void 0:r.permissions,env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,strategy:a,steps:o.map((e,t)=>Jf(e,0,t))}}return{workflow:s,errors:t}}(e);return{workflow:t,errors:n}}function oh(e){if(!e)return[];if("string"==typeof e)return[{event:e,config:{}}];if(Array.isArray(e))return e.flatMap(e=>"string"==typeof e?[{event:e,config:{}}]:"object"==typeof e&&null!==e?Object.entries(e).map(([e,t])=>({event:e,config:t??{}})):[]);if("object"==typeof e&&null!==e){const t=[];for(const[n,r]of Object.entries(e))if("schedule"===n&&Array.isArray(r))for(const e of r)"object"==typeof e&&null!==e&&"cron"in e?t.push({event:n,config:{cron:e.cron}}):t.push({event:n,config:{}});else t.push({event:n,config:r??{}});return t}return[]}new Set(["branch_protection_rule","check_run","check_suite","discussion","discussion_comment","issue_comment","issues","label","merge_group","milestone","pull_request","pull_request_review","pull_request_review_comment","pull_request_target","registry_package","release","repository_dispatch","watch","workflow_run"]);const sh=new Set(["push","pull_request","pull_request_target","workflow_dispatch","workflow_call","workflow_run","repository_dispatch","schedule","create","delete","deployment","deployment_status","fork","gollum","issue_comment","issues","label","milestone","page_build","project","project_card","project_column","public","pull_request_review","pull_request_review_comment","push","registry_package","release","status","watch","branch_protection_rule","check_run","check_suite","discussion","discussion_comment","merge_group","pull_request_review","pull_request_review_comment","pull_request_target","registry_package"]),ah=new Set(["assigned","auto_merge_disabled","auto_merge_enabled","closed","converted_to_draft","edited","labeled","locked","opened","ready_for_review","reopened","review_requested","review_request_removed","synchronize","unassigned","unlabeled","unlocked"]),ih=new Set(["completed","requested","in_progress"]),lh=new Set(["published","unpublished","created","edited","deleted","prereleased","released"]),ch=new Set(["created","edited","deleted"]),uh=new Set(["created","rerequested","completed","requested_action"]),dh=new Set(["completed"]),fh=new Set(["created","edited","deleted","transferred","pinned","unpinned","labeled","unlabeled","locked","unlocked","category_changed","answered","unanswered"]),hh=new Set(["created","edited","deleted"]),ph=new Set(["created","edited","deleted"]),mh=new Set(["opened","edited","deleted","transferred","pinned","unpinned","closed","reopened","assigned","unassigned","labeled","unlabeled","locked","unlocked","milestoned","demilestoned","typed","untyped"]),gh=new Set(["created","edited","deleted"]),yh=new Set(["checks_requested"]),bh=new Set(["created","closed","opened","edited","deleted"]),vh=new Set(["submitted","edited","dismissed"]),xh=new Set(["created","edited","deleted"]),wh=ah,kh=new Set(["published","updated"]),Sh=new Set(["started"]),Nh=new Set(["ubuntu-latest","ubuntu-22.04","ubuntu-20.04","windows-latest","windows-2022","windows-2019","macos-latest","macos-14","macos-13","macos-12","self-hosted"]);function Eh(e){const t=[],n=oh(e.on);0===n.length?t.push({message:'Workflow must have at least one trigger in "on" field',path:"on",severity:"error"}):n.forEach((e,n)=>{t.push(...function(e,t){const n=[],r=`on[${t}]`;sh.has(e.event)||n.push({message:`Invalid trigger event: "${e.event}". Valid events: ${Array.from(sh).slice(0,10).join(", ")}, ...`,path:`${r}.${e.event}`,severity:"error"});const o=e.config;if("push"!==e.event&&"pull_request"!==e.event||("branches"in o&&o.branches&&((Array.isArray(o.branches)?o.branches:[o.branches]).every(e=>"string"==typeof e)||n.push({message:`Invalid branches format in ${e.event} trigger. Branches must be strings.`,path:`${r}.${e.event}.branches`,severity:"error"})),"tags"in o&&o.tags&&((Array.isArray(o.tags)?o.tags:[o.tags]).every(e=>"string"==typeof e)||n.push({message:`Invalid tags format in ${e.event} trigger. Tags must be strings.`,path:`${r}.${e.event}.tags`,severity:"error"})),"paths"in o&&o.paths&&((Array.isArray(o.paths)?o.paths:[o.paths]).every(e=>"string"==typeof e)||n.push({message:`Invalid paths format in ${e.event} trigger. Paths must be strings.`,path:`${r}.${e.event}.paths`,severity:"error"})),"paths-ignore"in o&&o.pathsIgnore&&((Array.isArray(o.pathsIgnore)?o.pathsIgnore:[o.pathsIgnore]).every(e=>"string"==typeof e)||n.push({message:`Invalid paths-ignore format in ${e.event} trigger. Paths must be strings.`,path:`${r}.${e.event}.paths-ignore`,severity:"error"}))),o.types){const t=Array.isArray(o.types)?o.types:[o.types],s=function(e){switch(e){case"branch_protection_rule":return ch;case"check_run":return uh;case"check_suite":return dh;case"discussion":return fh;case"discussion_comment":return hh;case"issue_comment":return ph;case"issues":return mh;case"label":return gh;case"merge_group":return yh;case"milestone":return bh;case"pull_request":return ah;case"pull_request_review":return vh;case"pull_request_review_comment":return xh;case"pull_request_target":return wh;case"registry_package":return kh;case"release":return lh;case"repository_dispatch":default:return null;case"watch":return Sh;case"workflow_run":return ih}}(e.event);if(null===s)"repository_dispatch"===e.event&&(t.every(e=>"string"==typeof e)||n.push({message:"repository_dispatch types must be strings",path:`${r}.${e.event}.types`,severity:"error"}));else for(const o of t)if("string"==typeof o&&!s.has(o)){const t=Array.from(s).slice(0,10).join(", "),a=s.size>10?", ...":"";n.push({message:`Invalid ${e.event} type: "${o}". Valid types: ${t}${a}`,path:`${r}.${e.event}.types`,severity:"workflow_run"===e.event?"error":"warning"})}}return"workflow_run"===e.event&&(o.workflows&&("string"==typeof o.workflows||Array.isArray(o.workflows))||n.push({message:'workflow_run trigger requires a "workflows" field (string or array of strings)',path:`${r}.${e.event}`,severity:"error"})),"schedule"===e.event&&(o.cron&&"string"==typeof o.cron?function(e){const t=e.trim().split(/\s+/);return 5===t.length&&t.every(e=>/^[\d*,/-]+$/.test(e))}(o.cron)||n.push({message:`Invalid cron expression: "${o.cron}". Format: "minute hour day month weekday" (e.g., "0 0 * * *")`,path:`${r}.${e.event}.cron`,severity:"error"}):n.push({message:'schedule trigger requires a "cron" field (string)',path:`${r}.${e.event}`,severity:"error"})),n}(e,n))});const r=Object.keys(e.jobs);return 0===r.length?t.push({message:"Workflow must have at least one job",path:"jobs",severity:"error"}):(t.push(...function(e){const t=[],n=new Set,r=new Set;function o(t){if(r.has(t))return!0;if(n.has(t))return!1;n.add(t),r.add(t);const s=e[t];if(s?.needs){const e=Array.isArray(s.needs)?s.needs:[s.needs];for(const t of e)if("string"==typeof t&&o(t))return!0}return r.delete(t),!1}for(const r of Object.keys(e))!n.has(r)&&o(r)&&t.push({message:`Circular dependency detected involving job "${r}"`,path:`jobs.${r}.needs`,severity:"error"});return t}(e.jobs)),r.forEach(n=>{t.push(...function(e,t,n){const r=[],o=`jobs.${e}`;if(t["runs-on"]){const e=Array.isArray(t["runs-on"])?t["runs-on"]:[t["runs-on"]];for(const t of e)"string"!=typeof t||t.startsWith("self-hosted")||Nh.has(t)||t.includes("[")||t.includes("${{")||r.push({message:`Unknown runner label: "${t}". Common runners: ${Array.from(Nh).join(", ")}`,path:`${o}.runs-on`,severity:"warning"})}else r.push({message:`Job "${e}" is missing required field "runs-on"`,path:`${o}.runs-on`,severity:"error"});if(t.needs){const s=Array.isArray(t.needs)?t.needs:[t.needs];for(const t of s)"string"!=typeof t||n.includes(t)||r.push({message:`Job "${e}" depends on job "${t}" which does not exist`,path:`${o}.needs`,severity:"error"})}if(t.strategy?.matrix){const n=t.strategy.matrix;if(0===Object.keys(n).length)r.push({message:`Job "${e}" has an empty matrix. Remove strategy or add matrix variables.`,path:`${o}.strategy.matrix`,severity:"warning"});else for(const[t,s]of Object.entries(n))Array.isArray(s)&&0!==s.length||r.push({message:`Matrix variable "${t}" in job "${e}" must be a non-empty array`,path:`${o}.strategy.matrix.${t}`,severity:"error"});void 0!==t.strategy["max-parallel"]&&t.strategy["max-parallel"]<1&&r.push({message:`max-parallel in job "${e}" must be at least 1`,path:`${o}.strategy.max-parallel`,severity:"error"})}return t.steps&&0!==t.steps.length?t.steps.forEach((t,n)=>{const s=`${o}.steps[${n}]`;t.run||t.uses||r.push({message:`Step ${n+1} in job "${e}" must have either "run" or "uses"`,path:s,severity:"error"}),t.run&&t.uses&&r.push({message:`Step ${n+1} in job "${e}" cannot have both "run" and "uses"`,path:s,severity:"error"}),t.uses&&"string"==typeof t.uses&&(/^[\w.-]+\/[\w.-]+(@[\w.-]+)?(\/[\w.-/]+)?(@[\w.-]+)?$/.test(t.uses)||r.push({message:`Invalid action reference format: "${t.uses}". Expected format: "owner/repo@ref"`,path:`${s}.uses`,severity:"warning"}))}):r.push({message:`Job "${e}" has no steps`,path:`${o}.steps`,severity:"warning"}),r}(n,e.jobs[n],r))})),t}const Ch={job:jl,trigger:Dl,addJob:Sl},_h={name:"Sample",on:{push:{branches:["main"]}},jobs:{build:{"runs-on":"ubuntu-latest",steps:[{run:"echo build"}]},test:{needs:"build","runs-on":"ubuntu-latest",steps:[{run:"echo test"}]}}};function jh(){const[e,t]=(0,a.useState)("dark"),[n,r]=(0,a.useState)(null),[o,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{const e=e=>{const n=e.detail.theme;t(n);const r=document.documentElement;"dark"===n?r.classList.add("dark"):r.classList.remove("dark")};window.addEventListener("vscode-themeChanged",e);const n=nh();return n&&n.postMessage?n.postMessage({command:"getTheme"}):console.error("VSCode API not available"),()=>{window.removeEventListener("vscode-themeChanged",e)}},[]),(0,a.useEffect)(()=>{const e=e=>{const{content:t}=e.detail,{workflow:n,errors:s}=rh(t);k(!1),N.current=!0,r(n),p(s),o&&n.jobs[o]||i(null),setTimeout(()=>{N.current=!1},100)};return window.addEventListener("vscode-loadFile",e),()=>{window.removeEventListener("vscode-loadFile",e)}},[o]);const l=e,[c,u]=(0,a.useState)(!1),[d,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),[y,b]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),S=(0,a.useRef)(null),N=(0,a.useRef)(!1),E=n??{name:"",on:{},jobs:{}},{nodes:C,edges:_}=function(e){const t=Object.keys(e.jobs),n=oh(e.on),r=[],o=[];if(0===n.length){const e={id:"__trigger__0",type:"trigger",position:{x:0,y:0},data:{triggers:[]}};r.push(e)}else n.forEach((e,t)=>{const n={id:`__trigger__${t}`,type:"trigger",position:{x:0,y:160*t},data:{triggers:[e]}};r.push(n)});if(0===t.length)return{nodes:r,edges:o};const s=new Map;for(const n of t){const t=e.jobs[n],r=t.needs?Array.isArray(t.needs)?t.needs:[t.needs]:[];s.set(n,r);for(const e of r)o.push({id:`${e}-${n}`,source:e,target:n})}const a=[],i=new Set;let l=[...t];for(;l.length>0;){const e=[];for(const t of l)(s.get(t)??[]).every(e=>i.has(e))&&e.push(t);0===e.length&&e.push(l[0]);for(const t of e)i.add(t);a.push(e),l=l.filter(e=>!i.has(e))}const c=a[0]?.length??0,u=160*r.filter(e=>e.id.startsWith("__trigger__")).length-60,d=c>0?Math.max(0,140*(c-1)/2-u/2):0;r.forEach(e=>{if(e.id.startsWith("__trigger__")){const t=parseInt(e.id.replace("__trigger__",""),10);Number.isNaN(t)||(e.position.y=d+160*t)}});for(let t=0;t<a.length;t++){const n=a[t],o=320+280*t;for(let t=0;t<n.length;t++){const s=n[t],a=e.jobs[s],i=140*t,l=Array.isArray(a["runs-on"])?a["runs-on"].join(", "):String(a["runs-on"]??""),c=a.steps?.length??0,u=!!a.strategy?.matrix&&Object.keys(a.strategy.matrix).length>0;let d;u&&a.strategy?.matrix&&(d=Object.values(a.strategy.matrix).reduce((e,t)=>e*(Array.isArray(t)?t.length:1),1)),r.push({id:s,type:"job",position:{x:o,y:i},data:{jobId:s,label:a.name??s,runsOn:l,stepCount:c,hasMatrix:u,matrixCombinations:d}})}}if(a.length>0){const e=r.filter(e=>e.id.startsWith("__trigger__")).map(e=>e.id);for(const t of e)for(const e of a[0])o.push({id:`${t}-${e}`,source:t,target:e})}const f=a[a.length-1];if(f&&f.length>0){const e=320+280*(a.length-1)+200+80,t=f.length,n={id:"__add_job__",type:"addJob",position:{x:e,y:(t>0?140*(t-1)/2+40:40)-20},data:{needs:f}};r.push(n);for(const e of f)o.push({id:`${e}-__add_job__`,source:e,target:"__add_job__"})}return{nodes:r,edges:o}}(E);(0,a.useEffect)(()=>{if(n){const e=Eh(n);g(e)}else g([])},[n]);const j=(0,a.useCallback)(e=>{if(!n?.jobs[e])return;const t=`Are you sure you want to delete the job "${n.jobs[e].name||e}"? This cannot be undone.`;if(!window.confirm(t))return;const o={...n.jobs};delete o[e];for(const t of Object.keys(o)){const n=o[t];if(n.needs){const r=Array.isArray(n.needs)?n.needs:[n.needs],s=r.filter(t=>t!==e);s.length!==r.length&&(o[t]={...n,needs:0===s.length?void 0:1===s.length?s[0]:s})}}N.current=!0,r({...n,jobs:o}),i(null),setTimeout(()=>{N.current=!1},100)},[n]),M=(0,a.useMemo)(()=>C.map(e=>{const t="__add_job__"!==e.id&&(e.id.startsWith("__trigger__")?c:o===e.id);return"job"===e.type&&e.data&&e.data,{...e,selected:t}}),[C,o,c]);(0,a.useEffect)(()=>{o&&n&&!n.jobs[o]&&i(null)},[n,o]);const O=(0,a.useCallback)(({nodes:e})=>{if(N.current)return;if(e.find(e=>"__add_job__"===e.id))return i(null),void u(!1);const t=e.find(e=>"trigger"===e.type),n=e.find(e=>"job"===e.type);if(t)u(!0),i(null);else if(n){const e=n.data.jobId;i(e),u(!1)}else 0===e.length&&(i(null),u(!1))},[]),P=(0,a.useCallback)(()=>{!function(){const e=nh();e&&e.postMessage?e.postMessage({command:"openFile"}):console.error("VSCode API not available for opening file")}()},[]),A=(0,a.useCallback)(e=>{const{workflow:t,errors:n}=rh(e);k(!1),N.current=!0,r(t),p(n),o&&t.jobs[o]||i(null),setTimeout(()=>{N.current=!1},100)},[o]),I=(0,a.useCallback)(()=>{if(!n)return;const e=n.name?.replace(/\s+/g,"-").toLowerCase()||"workflow";!function(e,t="workflow.yml"){const n=eh(e),r=nh();r&&r.postMessage?r.postMessage({command:"saveFile",content:n,filename:t}):console.error("VSCode API not available for saving file")}(n,`${e}.yml`)},[n]),L=(0,a.useCallback)(e=>{let t=1,n=`job-${t}`;for(;e.includes(n);)t++,n=`job-${t}`;return n},[]),T=(0,a.useCallback)(()=>{if(!n){const e={name:"Untitled Workflow",on:{push:{branches:["main"]}},jobs:{}};return N.current=!0,r(e),u(!0),i(null),void setTimeout(()=>{N.current=!1},100)}const e=function(e){if(0===e.length)return{};const t=e.filter(e=>"schedule"===e.event),n=e.filter(e=>"schedule"!==e.event),r={};if(t.length>0&&(r.schedule=t.map(e=>({cron:e.config.cron||"0 0 * * *"}))),1===n.length){const e=n[0];0===Object.keys(e.config).length?r[e.event]={}:r[e.event]=e.config}else if(n.length>1){const e=n.map(e=>0===Object.keys(e.config).length?e.event:{[e.event]:e.config});return t.length>0?[...e,{schedule:t.map(e=>({cron:e.config.cron||"0 0 * * *"}))}]:e}if(t.length>0&&0===n.length)return r;if(1===n.length&&0===t.length){const e=n[0];return 0===Object.keys(e.config).length?e.event:{[e.event]:e.config}}return r}([...oh(n.on),{event:"push",config:{}}]);N.current=!0,r({...n,on:e}),u(!0),i(null),setTimeout(()=>{N.current=!1},100)},[n]),$=(0,a.useCallback)(e=>{if(!n){const e={name:"Untitled Workflow",on:{push:{branches:["main"]}},jobs:{}},t=L([]);return e.jobs[t]={"runs-on":"ubuntu-latest",steps:[{run:'echo "Hello, World!"'}]},r(e),void i(t)}const t=0===oh(n.on).length?{push:{branches:["main"]}}:n.on,o=Object.keys(n.jobs),s=L(o),a={"runs-on":"ubuntu-latest",steps:[{run:'echo "Hello, World!"'}]};e&&e.length>0&&(a.needs=1===e.length?e[0]:e),N.current=!0,r({...n,on:t,jobs:{...n.jobs,[s]:a}}),i(s),setTimeout(()=>{N.current=!1},100)},[n,L]),z=(0,a.useCallback)((e,t)=>{if("__add_job__"===t.id){const e=t.data;e?.needs?.length&&$(e.needs)}},[$]),D=M.some(e=>"job"===e.type),R=n&&n.on&&("string"==typeof n.on||Array.isArray(n.on)&&n.on.length>0||"object"==typeof n.on&&Object.keys(n.on).length>0),B=D||R,V=(0,a.useCallback)(e=>{if(y)"Escape"===e.key&&b(!1);else if(v)"Escape"===e.key&&x(!1);else{if("Escape"===e.key)return u(!1),void i(null);(e.metaKey||e.ctrlKey)&&"o"===e.key&&(e.preventDefault(),P()),(e.metaKey||e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),n&&D&&I())}},[y,v,n,D,I,P]);(0,a.useEffect)(()=>(window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)),[V]),(0,a.useEffect)(()=>{w&&S.current&&(S.current.focus(),S.current.select())},[w]);const F=(0,a.useCallback)(e=>{n&&(N.current=!0,r({...n,name:e||void 0}),setTimeout(()=>{N.current=!1},100))},[n]),H=(0,a.useCallback)(e=>{"Enter"===e.key?(e.currentTarget.blur(),k(!1)):"Escape"===e.key&&k(!1)},[]);return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col bg-slate-100 dark:bg-slate-900 pr-4 box-border max-w-full overflow-x-hidden",children:[y&&(0,s.jsx)(Fl,{onClose:()=>b(!1),onLoad:A}),v&&n&&(0,s.jsx)(Gf,{initialYaml:eh(n),onClose:()=>x(!1),onSave:(e,t)=>{k(!1),N.current=!0,r(e),p(t),setTimeout(()=>{N.current=!1},100)}}),(0,s.jsxs)("header",{className:"flex flex-wrap items-center gap-3 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-1.5 shadow-sm text-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:n?w?(0,s.jsx)("input",{ref:S,type:"text",value:n.name||"",onChange:e=>F(e.target.value),onBlur:()=>k(!1),onKeyDown:H,className:"text-sm font-semibold text-slate-800 dark:text-slate-200 bg-transparent border-b-2 border-slate-400 dark:border-slate-600 focus:border-slate-600 dark:focus:border-slate-400 focus:outline-none px-1 -mx-1 min-w-0 flex-1 max-w-md",placeholder:"Untitled Workflow"}):(0,s.jsx)("h1",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 cursor-text hover:text-slate-600 dark:hover:text-slate-300 transition-colors min-w-0 flex-1",onClick:()=>k(!0),title:"Click to edit workflow name",children:n.name||"Untitled Workflow"}):(0,s.jsx)("h1",{className:"text-sm font-semibold text-slate-400 dark:text-slate-500",children:"No workflow loaded"})}),(0,s.jsx)("div",{className:"text-[11px] text-slate-400 dark:text-slate-500 font-medium",children:"Workflow Editor"}),(0,s.jsx)("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700","aria-hidden":!0}),(0,s.jsxs)("div",{className:"flex items-center gap-2",role:"group","aria-label":"File",children:[(0,s.jsx)("button",{type:"button",onClick:P,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 p-2 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",title:"Open file","aria-label":"Open file",children:(0,s.jsx)(hl,{className:"w-5 h-5"})}),(0,s.jsx)("button",{type:"button",onClick:()=>b(!0),className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 p-2 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",title:"Paste YAML","aria-label":"Paste YAML",children:(0,s.jsx)(ul,{className:"w-5 h-5"})}),(0,s.jsx)("button",{type:"button",onClick:I,disabled:!n||!D,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 p-2 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 disabled:opacity-50",title:"Save","aria-label":"Save",children:(0,s.jsx)(ml,{className:"w-5 h-5"})}),(0,s.jsx)("button",{type:"button",onClick:()=>x(!0),disabled:!n,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 p-2 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 disabled:opacity-50",title:"View source","aria-label":"View source",children:(0,s.jsx)(dl,{className:"w-5 h-5"})}),(0,s.jsx)("button",{type:"button",onClick:()=>{k(!1),r(n?null:_h)},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 p-2 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",title:n?"Clear":"Load sample","aria-label":n?"Clear":"Load sample",children:n?(0,s.jsx)(bl,{className:"w-5 h-5"}):(0,s.jsx)(hl,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"h-6 w-px bg-slate-200","aria-hidden":!0}),(0,s.jsxs)("div",{className:"flex items-center gap-2",role:"group","aria-label":"Editor",children:[(0,s.jsx)("button",{type:"button",onClick:T,className:"rounded border border-purple-300 dark:border-purple-600 bg-purple-50 dark:bg-purple-900/30 px-2 py-0.5 text-xs font-medium text-purple-700 dark:text-purple-300 hover:bg-purple-100 dark:hover:bg-purple-900/50",children:"+ Add Trigger"}),(0,s.jsx)("button",{type:"button",onClick:()=>$(),className:"rounded border border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 text-xs font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50",children:"+ Add Job"})]}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{},disabled:!0,className:"rounded p-2 text-slate-400 dark:text-slate-500 cursor-not-allowed opacity-50",title:"Theme follows VSCode theme","aria-label":"Theme follows VSCode theme",children:"dark"===l?(0,s.jsx)(yl,{className:"w-5 h-5"}):(0,s.jsx)(pl,{className:"w-5 h-5"})}),(0,s.jsx)("button",{type:"button",onClick:()=>f(!0),disabled:!n,className:"rounded p-2 disabled:opacity-50 "+(d?"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"),title:"Edit workflow name, run name, and environment variables","aria-label":"Workflow config",children:(0,s.jsx)(fl,{className:"w-5 h-5"})})]})]}),(h.length>0||m.length>0)&&(0,s.jsxs)("div",{role:"alert",className:"flex flex-col gap-2 border-b border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/30 px-4 py-2 text-sm text-amber-800 dark:text-amber-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Validation:"})," ",h.length>0&&`${h.length} parse error${1!==h.length?"s":""}`,h.length>0&&m.length>0&&"  ",m.length>0&&`${m.length} lint error${1!==m.length?"s":""}`]}),(0,s.jsx)("button",{type:"button",onClick:()=>{p([]),g([])},className:"shrink-0 rounded p-1 hover:bg-amber-100 dark:hover:bg-amber-800/50","aria-label":"Dismiss errors",children:""})]}),h.length>0&&(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("strong",{children:"Parse errors:"})," ",h.join("  ")]}),m.length>0&&(0,s.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,s.jsx)("strong",{children:"Lint errors:"}),(0,s.jsx)("ul",{className:"ml-4 list-disc space-y-0.5",children:m.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)("span",{className:"error"===e.severity?"font-medium":"",children:[e.path&&(0,s.jsxs)("code",{className:"text-xs",children:[e.path,":"]})," ",e.message]})},t))})]})]}),(0,s.jsxs)("main",{className:"flex-1 overflow-hidden flex",role:"main","aria-label":"Workflow diagram",children:[(0,s.jsx)("div",{className:"flex-1 relative",children:B?(0,s.jsxs)(ji,{nodes:M,edges:_,onSelectionChange:O,onNodeClick:z,nodeTypes:Ch,fitView:!0,className:"bg-slate-50 dark:bg-slate-900",children:[(0,s.jsx)(Li,{}),(0,s.jsx)(Hi,{}),(0,s.jsx)(Gi,{})]},n?`flow-on-${JSON.stringify(n.on)}`:"flow"):(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-900 gap-4",children:[(0,s.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"No jobs in workflow."}),(0,s.jsx)("button",{type:"button",onClick:()=>$(),className:"rounded border border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/30 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50",children:"+ Add Your First Job"})]})}),d&&n&&(0,s.jsx)(Vl,{workflow:n,onWorkflowChange:e=>{N.current=!0,r(e),setTimeout(()=>{N.current=!1},100)},onClose:()=>f(!1)}),c&&n&&!d&&(0,s.jsx)(Bl,{workflow:n,onWorkflowChange:e=>{N.current=!0,r(e),setTimeout(()=>{N.current=!1},100)},onClose:()=>u(!1)}),o&&n&&!c&&!d&&(0,s.jsx)(Il,{workflow:n,jobId:o,onWorkflowChange:e=>{N.current=!0,r(e),setTimeout(()=>{N.current=!1},100)},onClose:()=>i(null),onDeleteJob:j})]})]})}const Mh=function(){return(0,s.jsx)(Ni,{children:(0,s.jsx)(jh,{})})},Oh=nh();window.addEventListener("message",e=>{const t=e.data;switch(t.command){case"loadFile":window.dispatchEvent(new CustomEvent("vscode-loadFile",{detail:{content:t.content,filename:t.filename}}));break;case"themeChanged":window.dispatchEvent(new CustomEvent("vscode-themeChanged",{detail:{theme:t.theme}}))}}),Oh&&Oh.postMessage?Oh.postMessage({command:"ready"}):console.error("VSCode API not available");const Ph=document.getElementById("root");if(Ph)try{(0,i.H)(Ph).render((0,s.jsx)(a.StrictMode,{children:(0,s.jsx)(Mh,{})}))}catch(e){console.error("Failed to render React app:",e)}else console.error("Root element not found")})();
//# sourceMappingURL=main.js.map